var h4=(Z)=>{let $,J=new Set,X=(G,W)=>{let j=typeof G==="function"?G($):G;if(!Object.is(j,$)){let z=$;$=(W!=null?W:typeof j!=="object"||j===null)?j:Object.assign({},$,j),J.forEach((_)=>_($,z))}},Y=()=>$,U={setState:X,getState:Y,getInitialState:()=>q,subscribe:(G)=>{return J.add(G),()=>J.delete(G)}},q=$=Z(X,Y,U);return U},v4=(Z)=>Z?h4(Z):h4;function RQ(Z,$){let J;try{J=Z()}catch(Y){return}return{getItem:(Y)=>{var Q;let K=(q)=>{if(q===null)return null;return JSON.parse(q,$==null?void 0:$.reviver)},U=(Q=J.getItem(Y))!=null?Q:null;if(U instanceof Promise)return U.then(K);return K(U)},setItem:(Y,Q)=>J.setItem(Y,JSON.stringify(Q,$==null?void 0:$.replacer)),removeItem:(Y)=>J.removeItem(Y)}}var a9=(Z)=>($)=>{try{let J=Z($);if(J instanceof Promise)return J;return{then(X){return a9(X)(J)},catch(X){return this}}}catch(J){return{then(X){return this},catch(X){return a9(X)(J)}}}},FQ=(Z,$)=>(J,X,Y)=>{let Q={storage:RQ(()=>localStorage),partialize:(O)=>O,version:0,merge:(O,N)=>({...N,...O}),...$},K=!1,U=new Set,q=new Set,G=Q.storage;if(!G)return Z((...O)=>{console.warn(`[zustand persist middleware] Unable to update item '${Q.name}', the given storage is currently unavailable.`),J(...O)},X,Y);let W=()=>{let O=Q.partialize({...X()});return G.setItem(Q.name,{state:O,version:Q.version})},j=Y.setState;Y.setState=(O,N)=>{return j(O,N),W()};let z=Z((...O)=>{return J(...O),W()},X,Y);Y.getInitialState=()=>z;let _,V=()=>{var O,N;if(!G)return;K=!1,U.forEach((D)=>{var A;return D((A=X())!=null?A:z)});let F=((N=Q.onRehydrateStorage)==null?void 0:N.call(Q,(O=X())!=null?O:z))||void 0;return a9(G.getItem.bind(G))(Q.name).then((D)=>{if(D)if(typeof D.version==="number"&&D.version!==Q.version){if(Q.migrate){let A=Q.migrate(D.state,D.version);if(A instanceof Promise)return A.then((L)=>[!0,L]);return[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then((D)=>{var A;let[L,B]=D;if(_=Q.merge(B,(A=X())!=null?A:z),J(_,!0),L)return W()}).then(()=>{F==null||F(_,void 0),_=X(),K=!0,q.forEach((D)=>D(_))}).catch((D)=>{F==null||F(void 0,D)})};if(Y.persist={setOptions:(O)=>{if(Q={...Q,...O},O.storage)G=O.storage},clearStorage:()=>{G==null||G.removeItem(Q.name)},getOptions:()=>Q,rehydrate:()=>V(),hasHydrated:()=>K,onHydrate:(O)=>{return U.add(O),()=>{U.delete(O)}},onFinishHydration:(O)=>{return q.add(O),()=>{q.delete(O)}}},!Q.skipHydration)V();return _||z},u4=FQ;var m4=`This series of exercises takes you through the basic syntax and concepts of OCaml. All exercies can be run right here in your browser.

We start with the basics and build up to the more advanced concepts. The objective is to write a (very simple) clone of FFTW in OCaml.

(Fun fact, while FFTW is a C library, the core \`genfft\` part is written in OCaml)

If you're coming from C-styled languages, the functional style might take some time to get used to. But no worries, we'll get there. For now, let's start with the classic "Hello World" program.

In OCaml, the \`print_endline\` function is used to print to the console. So, to print a message you would use something like:

\`\`\`ocaml
print_endline "some message";;
\`\`\`
Now, when writing code in an OCaml script, you generally use a single semicolon (;) to sequence commands or simply rely on the compiler's structure.

However, in the in-browser environment (like we're using here), you must use double semicolons (;;) to signal to the interpreter that you have finished your expression and want it evaluated.

Now, check if the code in the exercise window looks alright and fix it if needed. Then, you can user the \`Run\` button to run the code.

# Problem Statement

Use \`print_endline\` to print out "Hello, world!"

`;var g4=`print_endline "some message";;
`;var f4=`(* no tests needed here *)
`;var AQ={id:"1.1",title:"Hello World",description:m4,initialCode:g4,testCode:f4,validate:(Z,$)=>{let J=$.toLowerCase();if(J.includes("hello")&&J.includes("world"))return!0;return"Expected output to contain: hello and world"}},p4=AQ;var l4="Like most (good) languages, OCaml is a statically typed language. This means the compiler checks for type errors before your code ever runs. But unlike C or Java, instead of manually declaring the type of each variable, in OCaml, you can let the compiler infer the type of the variable for you.\n\n## Ints vs. Floats\n\nOcaml does this by a smart use of operators. For example, if you were adding two integers, you would use the standard operator:\n\n```ocaml\n1 + 2;;\n```\nBut, if you were adding an two floating point numbers, you would use the floating point operator:\n\n```ocaml\n1. +. 2.;;\n```\nNotice the `.` after the `+` operator. It tells the compiler that the operation is a floating point operation. f you try to use + with floats, or +. with ints, the compiler will complain.\n\nNow, to assign the result of such operation to a variable, we would use the let keyword. For example:\n\n```ocaml\nlet x = 1 + 2;;\n```\nSo think of the right hand side to be be an expression or a function that is evalauted and the result is then assigned to the variable on the left hand side (x in this case).\n\n## Functions\n\nThe `let` keyword can also be used to define functions. Typically in C-style languages you would define a function like this:\n\n```c\nfloat sum(float a, float b) {\n    return a + b;\n}\n```\nBut in OCaml, you could define a function like this:\n\n```ocaml\nlet sum a b = a +. b;;\n```\nHere `let` is the keyword that defines a function. Then, `sum` is the name of the function. Right after that, we have the arguments of the function i.e. `a` and `b` here.\n\nSo one way to read the function would be, the function `sum` takes two arguments `a` and `b` and the expression used to calculate the result is the one to the right of the `=` sign.\n\nOnce we define the function, we can use it like this:\n\n```ocaml\nlet x = sum 1. 2.;;\n```\nSo here, what we're doing is evaluate the function sum, which takes two arguments `1.` and `2.` and assigns the result to the variable `x`.\n\n# Problem Statement\n\nImplement a function average that takes two floating-point numbers and returns their average as a float.\n";var d4=`(* use the same function name and signature but fix the implementation *)

let average a b = (a + b);;

(* do not edit below this line *)

let x = average 1. 2.;;`;var c4=`let () =
  let result = average 2. 5. in
  if result <> 3.5 then begin
    Printf.printf "\\nTest failed: average 2. 5. returned %s but expected 3.5\\n\\n" (string_of_float result);
    failwith "Test failed"
  end else
    Printf.printf "\\nTest passed: average 2. 5. = 3.5\\n";;`;var PQ={id:"1.2",title:"Int, Float and Functions",description:l4,initialCode:d4,testCode:c4,validate:()=>{return!0}},s4=PQ;var n4=`We looked at the \`let\` keyword earlier. But there's something fundamentally different about how OCaml treats functions compared to C-style languages.

Say you want to process a list of numbers - add 5 to some, multiply by 2 for others. In C with function pointers, you might write something like:

\`\`\`c
int add_five(int x) { return x + 5; }
int add_ten(int x) { return x + 10; }

void process(int* arr, int len, int (*fn)(int)) {
    for(int i = 0; i < len; i++) {
        arr[i] = fn(arr[i]);
    }
}

process(arr, len, add_five);
\`\`\`
But now, say you wanted to process the list with additional similar functions (likesay \`add_ten\`). For this, you'd have to write a new function that does this and then call it with \`process\` like this:

\`\`\`c
...
process(arr, len, add_five);

//now add ten
process(arr, len, add_ten);
\`\`\`

So what if you could build up  \`add_ten\` and \`add_five\` from a general \`add\` function?

## Currying

In OCaml, when you write something like:

\`\`\`ocaml
let sum x y = x + y;;
\`\`\`
Here, technically, \`sum\` is not a function that takes two arguments. It builds up like this: When you call \`sum 1 2\`, what actually happens is, \`sum 1\` returns a new function that adds 1 to its argument.

Now, that new function is immediately called with \`2\` as its argument which gives the result \`3\`.

This is called currying (names after Haskell Curry) and what this means is technically, every function in Ocaml takes exactly one argument. So multi-argument functions are essentially just syntactic sugar.

But why do this? What benefits does this give us?

## Partial Application

Since multi-argument functions are built up via currying, if we provide fewer argumnets than a function expects, we get a perfectly usable function back.

Again, we can compare this with C-styled languages. If we had a multi-argument function, we would need all argumnets to call it.

Well, this idea, called partial application can be useful in creating specialised functions without wrappers as we saw earlier.

If we already had \`add\` and \`multiply\` functions, we could we could create specialised functions by partail application like this:

\`\`\`ocaml
let add x y = x + y;;
let multiply x y = x * y;;

(* now we can create specialized functions *)
let add_five = add 5;;
let multiply_by_two = multiply 2;;
\`\`\`
Notice how although \`add\` requires two arguments, we can define \`add_five\` as a derived function of add but it just adds 5 to its input.

While this example is a bit silly, the point was to intoduce the way in which currying and partial application work.

# Problem Statement

Given two functions, \`add\` and \`multiply\`, create a function \`add_thirteen\` and a function \`multiply_by_17\`
`;var i4=`let add x y = x + y;;
let multiply x y = x * y;;

(* do not edit above *)


(* ?? your code goes in here *)


(* do not edit below *)

let num1 = add_thirteen 13;;
let num2 =  multiply_by_17 17;;
`;var r4=`(* This code is silently appended to the user's code *)
let () =
  let result1 = add_thirteen 7 in
  if result1 <> 20 then begin
    Printf.printf "\\nTest failed: add_thirteen 7 returned %d but expected 20\\n\\n" result1;
    failwith "Test failed"
  end else
    Printf.printf "\\nTest passed: add_thirteen 7 = 20\\n";;

let () =
  let result2 = multiply_by_17 2 in
  if result2 <> 34 then begin
    Printf.printf "\\nTest failed: multiply_by_17 2 returned %d but expected 34\\n\\n" result2;
    failwith "Test failed"
  end else
    Printf.printf "\\nTest passed: multiply_by_17 2 = 34\\n";;
`;var bQ={id:"1.3",title:"Currying",description:n4,initialCode:i4,testCode:r4,validate:()=>!0},a4=bQ;var x0=[p4,s4,a4];var J1=v4()(u4((Z,$)=>({currentExerciseId:x0[0]?.id||"1.1",completedIds:[],userCode:{},markComplete:(J)=>{let{completedIds:X}=$();if(!X.includes(J))Z({completedIds:[...X,J]})},setCurrent:(J)=>Z({currentExerciseId:J}),saveUserCode:(J,X)=>Z({userCode:{...$().userCode,[J]:X}})}),{name:"sowar-storage"}));var t9=[],Z5=[];(()=>{let Z="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(($)=>$?parseInt($,36):1);for(let $=0,J=0;$<Z.length;$++)($%2?Z5:t9).push(J=J+Z[$])})();function kQ(Z){if(Z<768)return!1;for(let $=0,J=t9.length;;){let X=$+J>>1;if(Z<t9[X])J=X;else if(Z>=Z5[X])$=X+1;else return!0;if($==J)return!1}}function o4(Z){return Z>=127462&&Z<=127487}var t4=8205;function $5(Z,$,J=!0,X=!0){return(J?J5:SQ)(Z,$,X)}function J5(Z,$,J){if($==Z.length)return $;if($&&X5(Z.charCodeAt($))&&Y5(Z.charCodeAt($-1)))$--;let X=o9(Z,$);$+=e4(X);while($<Z.length){let Y=o9(Z,$);if(X==t4||Y==t4||J&&kQ(Y))$+=e4(Y),X=Y;else if(o4(Y)){let Q=0,K=$-2;while(K>=0&&o4(o9(Z,K)))Q++,K-=2;if(Q%2==0)break;else $+=2}else break}return $}function SQ(Z,$,J){while($>0){let X=J5(Z,$-2,J);if(X<$)return X;$--}return 0}function o9(Z,$){let J=Z.charCodeAt($);if(!Y5(J)||$+1==Z.length)return J;let X=Z.charCodeAt($+1);if(!X5(X))return J;return(J-55296<<10)+(X-56320)+65536}function X5(Z){return Z>=56320&&Z<57344}function Y5(Z){return Z>=55296&&Z<56320}function e4(Z){return Z<65536?1:2}class e{lineAt(Z){if(Z<0||Z>this.length)throw RangeError(`Invalid position ${Z} in document of length ${this.length}`);return this.lineInner(Z,!1,1,0)}line(Z){if(Z<1||Z>this.lines)throw RangeError(`Invalid line number ${Z} in ${this.lines}-line document`);return this.lineInner(Z,!0,1,0)}replace(Z,$,J){[Z,$]=T2(this,Z,$);let X=[];if(this.decompose(0,Z,X,2),J.length)J.decompose(0,J.length,X,3);return this.decompose($,this.length,X,1),T1.from(X,this.length-($-Z)+J.length)}append(Z){return this.replace(this.length,this.length,Z)}slice(Z,$=this.length){[Z,$]=T2(this,Z,$);let J=[];return this.decompose(Z,$,J,0),T1.from(J,$-Z)}eq(Z){if(Z==this)return!0;if(Z.length!=this.length||Z.lines!=this.lines)return!1;let $=this.scanIdentical(Z,1),J=this.length-this.scanIdentical(Z,-1),X=new P2(this),Y=new P2(Z);for(let Q=$,K=$;;){if(X.next(Q),Y.next(Q),Q=0,X.lineBreak!=Y.lineBreak||X.done!=Y.done||X.value!=Y.value)return!1;if(K+=X.value.length,X.done||K>=J)return!0}}iter(Z=1){return new P2(this,Z)}iterRange(Z,$=this.length){return new G7(this,Z,$)}iterLines(Z,$){let J;if(Z==null)J=this.iter();else{if($==null)$=this.lines+1;let X=this.line(Z).from;J=this.iterRange(X,Math.max(X,$==this.lines+1?this.length:$<=1?0:this.line($-1).to))}return new W7(J)}toString(){return this.sliceString(0)}toJSON(){let Z=[];return this.flatten(Z),Z}constructor(){}static of(Z){if(Z.length==0)throw RangeError("A document must have at least one line");if(Z.length==1&&!Z[0])return e.empty;return Z.length<=32?new I0(Z):T1.from(I0.split(Z,[]))}}class I0 extends e{constructor(Z,$=xQ(Z)){super();this.text=Z,this.length=$}get lines(){return this.text.length}get children(){return null}lineInner(Z,$,J,X){for(let Y=0;;Y++){let Q=this.text[Y],K=X+Q.length;if(($?J:K)>=Z)return new W5(X,K,J,Q);X=K+1,J++}}decompose(Z,$,J,X){let Y=Z<=0&&$>=this.length?this:new I0(Q5(this.text,Z,$),Math.min($,this.length)-Math.max(0,Z));if(X&1){let Q=J.pop(),K=W6(Y.text,Q.text.slice(),0,Y.length);if(K.length<=32)J.push(new I0(K,Q.length+Y.length));else{let U=K.length>>1;J.push(new I0(K.slice(0,U)),new I0(K.slice(U)))}}else J.push(Y)}replace(Z,$,J){if(!(J instanceof I0))return super.replace(Z,$,J);[Z,$]=T2(this,Z,$);let X=W6(this.text,W6(J.text,Q5(this.text,0,Z)),$),Y=this.length+J.length-($-Z);if(X.length<=32)return new I0(X,Y);return T1.from(I0.split(X,[]),Y)}sliceString(Z,$=this.length,J=`
`){[Z,$]=T2(this,Z,$);let X="";for(let Y=0,Q=0;Y<=$&&Q<this.text.length;Q++){let K=this.text[Q],U=Y+K.length;if(Y>Z&&Q)X+=J;if(Z<U&&$>Y)X+=K.slice(Math.max(0,Z-Y),$-Y);Y=U+1}return X}flatten(Z){for(let $ of this.text)Z.push($)}scanIdentical(){return 0}static split(Z,$){let J=[],X=-1;for(let Y of Z)if(J.push(Y),X+=Y.length+1,J.length==32)$.push(new I0(J,X)),J=[],X=-1;if(X>-1)$.push(new I0(J,X));return $}}class T1 extends e{constructor(Z,$){super();this.children=Z,this.length=$,this.lines=0;for(let J of Z)this.lines+=J.lines}lineInner(Z,$,J,X){for(let Y=0;;Y++){let Q=this.children[Y],K=X+Q.length,U=J+Q.lines-1;if(($?U:K)>=Z)return Q.lineInner(Z,$,J,X);X=K+1,J=U+1}}decompose(Z,$,J,X){for(let Y=0,Q=0;Q<=$&&Y<this.children.length;Y++){let K=this.children[Y],U=Q+K.length;if(Z<=U&&$>=Q){let q=X&((Q<=Z?1:0)|(U>=$?2:0));if(Q>=Z&&U<=$&&!q)J.push(K);else K.decompose(Z-Q,$-Q,J,q)}Q=U+1}}replace(Z,$,J){if([Z,$]=T2(this,Z,$),J.lines<this.lines)for(let X=0,Y=0;X<this.children.length;X++){let Q=this.children[X],K=Y+Q.length;if(Z>=Y&&$<=K){let U=Q.replace(Z-Y,$-Y,J),q=this.lines-Q.lines+U.lines;if(U.lines<q>>4&&U.lines>q>>6){let G=this.children.slice();return G[X]=U,new T1(G,this.length-($-Z)+J.length)}return super.replace(Y,K,U)}Y=K+1}return super.replace(Z,$,J)}sliceString(Z,$=this.length,J=`
`){[Z,$]=T2(this,Z,$);let X="";for(let Y=0,Q=0;Y<this.children.length&&Q<=$;Y++){let K=this.children[Y],U=Q+K.length;if(Q>Z&&Y)X+=J;if(Z<U&&$>Q)X+=K.sliceString(Z-Q,$-Q,J);Q=U+1}return X}flatten(Z){for(let $ of this.children)$.flatten(Z)}scanIdentical(Z,$){if(!(Z instanceof T1))return 0;let J=0,[X,Y,Q,K]=$>0?[0,0,this.children.length,Z.children.length]:[this.children.length-1,Z.children.length-1,-1,-1];for(;;X+=$,Y+=$){if(X==Q||Y==K)return J;let U=this.children[X],q=Z.children[Y];if(U!=q)return J+U.scanIdentical(q,$);J+=U.length+1}}static from(Z,$=Z.reduce((J,X)=>J+X.length+1,-1)){let J=0;for(let z of Z)J+=z.lines;if(J<32){let z=[];for(let _ of Z)_.flatten(z);return new I0(z,$)}let X=Math.max(32,J>>5),Y=X<<1,Q=X>>1,K=[],U=0,q=-1,G=[];function W(z){let _;if(z.lines>Y&&z instanceof T1)for(let V of z.children)W(V);else if(z.lines>Q&&(U>Q||!U))j(),K.push(z);else if(z instanceof I0&&U&&(_=G[G.length-1])instanceof I0&&z.lines+_.lines<=32)U+=z.lines,q+=z.length+1,G[G.length-1]=new I0(_.text.concat(z.text),_.length+1+z.length);else{if(U+z.lines>X)j();U+=z.lines,q+=z.length+1,G.push(z)}}function j(){if(U==0)return;K.push(G.length==1?G[0]:T1.from(G,q)),q=-1,U=G.length=0}for(let z of Z)W(z);return j(),K.length==1?K[0]:new T1(K,$)}}e.empty=new I0([""],0);function xQ(Z){let $=-1;for(let J of Z)$+=J.length+1;return $}function W6(Z,$,J=0,X=1e9){for(let Y=0,Q=0,K=!0;Q<Z.length&&Y<=X;Q++){let U=Z[Q],q=Y+U.length;if(q>=J){if(q>X)U=U.slice(0,X-Y);if(Y<J)U=U.slice(J-Y);if(K)$[$.length-1]+=U,K=!1;else $.push(U)}Y=q+1}return $}function Q5(Z,$,J){return W6(Z,[""],$,J)}class P2{constructor(Z,$=1){this.dir=$,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[Z],this.offsets=[$>0?1:(Z instanceof I0?Z.text.length:Z.children.length)<<1]}nextInner(Z,$){this.done=this.lineBreak=!1;for(;;){let J=this.nodes.length-1,X=this.nodes[J],Y=this.offsets[J],Q=Y>>1,K=X instanceof I0?X.text.length:X.children.length;if(Q==($>0?K:0)){if(J==0)return this.done=!0,this.value="",this;if($>0)this.offsets[J-1]++;this.nodes.pop(),this.offsets.pop()}else if((Y&1)==($>0?0:1)){if(this.offsets[J]+=$,Z==0)return this.lineBreak=!0,this.value=`
`,this;Z--}else if(X instanceof I0){let U=X.text[Q+($<0?-1:0)];if(this.offsets[J]+=$,U.length>Math.max(0,Z))return this.value=Z==0?U:$>0?U.slice(Z):U.slice(0,U.length-Z),this;Z-=U.length}else{let U=X.children[Q+($<0?-1:0)];if(Z>U.length)Z-=U.length,this.offsets[J]+=$;else{if($<0)this.offsets[J]--;this.nodes.push(U),this.offsets.push($>0?1:(U instanceof I0?U.text.length:U.children.length)<<1)}}}}next(Z=0){if(Z<0)this.nextInner(-Z,-this.dir),Z=this.value.length;return this.nextInner(Z,this.dir)}}class G7{constructor(Z,$,J){this.value="",this.done=!1,this.cursor=new P2(Z,$>J?-1:1),this.pos=$>J?Z.length:0,this.from=Math.min($,J),this.to=Math.max($,J)}nextInner(Z,$){if($<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;Z+=Math.max(0,$<0?this.pos-this.to:this.from-this.pos);let J=$<0?this.pos-this.from:this.to-this.pos;if(Z>J)Z=J;J-=Z;let{value:X}=this.cursor.next(Z);return this.pos+=(X.length+Z)*$,this.value=X.length<=J?X:$<0?X.slice(X.length-J):X.slice(0,J),this.done=!this.value,this}next(Z=0){if(Z<0)Z=Math.max(Z,this.from-this.pos);else if(Z>0)Z=Math.min(Z,this.to-this.pos);return this.nextInner(Z,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class W7{constructor(Z){this.inner=Z,this.afterBreak=!0,this.value="",this.done=!1}next(Z=0){let{done:$,lineBreak:J,value:X}=this.inner.next(Z);if($&&this.afterBreak)this.value="",this.afterBreak=!1;else if($)this.done=!0,this.value="";else if(J)if(this.afterBreak)this.value="";else this.afterBreak=!0,this.next();else this.value=X,this.afterBreak=!1;return this}get lineBreak(){return!1}}if(typeof Symbol<"u")e.prototype[Symbol.iterator]=function(){return this.iter()},P2.prototype[Symbol.iterator]=G7.prototype[Symbol.iterator]=W7.prototype[Symbol.iterator]=function(){return this};class W5{constructor(Z,$,J,X){this.from=Z,this.to=$,this.number=J,this.text=X}get length(){return this.to-this.from}}function T2(Z,$,J){return $=Math.max(0,Math.min(Z.length,$)),[$,Math.max($,Math.min(Z.length,J))]}function N0(Z,$,J=!0,X=!0){return $5(Z,$,J,X)}function wQ(Z){return Z>=56320&&Z<57344}function hQ(Z){return Z>=55296&&Z<56320}function y0(Z,$){let J=Z.charCodeAt($);if(!hQ(J)||$+1==Z.length)return J;let X=Z.charCodeAt($+1);if(!wQ(X))return J;return(J-55296<<10)+(X-56320)+65536}function j3(Z){if(Z<=65535)return String.fromCharCode(Z);return Z-=65536,String.fromCharCode((Z>>10)+55296,(Z&1023)+56320)}function i0(Z){return Z<65536?1:2}var Z7=/\r\n?|\n/,T0=function(Z){return Z[Z.Simple=0]="Simple",Z[Z.TrackDel=1]="TrackDel",Z[Z.TrackBefore=2]="TrackBefore",Z[Z.TrackAfter=3]="TrackAfter",Z}(T0||(T0={}));class V1{constructor(Z){this.sections=Z}get length(){let Z=0;for(let $=0;$<this.sections.length;$+=2)Z+=this.sections[$];return Z}get newLength(){let Z=0;for(let $=0;$<this.sections.length;$+=2){let J=this.sections[$+1];Z+=J<0?this.sections[$]:J}return Z}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(Z){for(let $=0,J=0,X=0;$<this.sections.length;){let Y=this.sections[$++],Q=this.sections[$++];if(Q<0)Z(J,X,Y),X+=Y;else X+=Q;J+=Y}}iterChangedRanges(Z,$=!1){$7(this,Z,$)}get invertedDesc(){let Z=[];for(let $=0;$<this.sections.length;){let J=this.sections[$++],X=this.sections[$++];if(X<0)Z.push(J,X);else Z.push(X,J)}return new V1(Z)}composeDesc(Z){return this.empty?Z:Z.empty?this:j5(this,Z)}mapDesc(Z,$=!1){return Z.empty?this:J7(this,Z,$)}mapPos(Z,$=-1,J=T0.Simple){let X=0,Y=0;for(let Q=0;Q<this.sections.length;){let K=this.sections[Q++],U=this.sections[Q++],q=X+K;if(U<0){if(q>Z)return Y+(Z-X);Y+=K}else{if(J!=T0.Simple&&q>=Z&&(J==T0.TrackDel&&X<Z&&q>Z||J==T0.TrackBefore&&X<Z||J==T0.TrackAfter&&q>Z))return null;if(q>Z||q==Z&&$<0&&!K)return Z==X||$<0?Y:Y+U;Y+=U}X=q}if(Z>X)throw RangeError(`Position ${Z} is out of range for changeset of length ${X}`);return Y}touchesRange(Z,$=Z){for(let J=0,X=0;J<this.sections.length&&X<=$;){let Y=this.sections[J++],Q=this.sections[J++],K=X+Y;if(Q>=0&&X<=$&&K>=Z)return X<Z&&K>$?"cover":!0;X=K}return!1}toString(){let Z="";for(let $=0;$<this.sections.length;){let J=this.sections[$++],X=this.sections[$++];Z+=(Z?" ":"")+J+(X>=0?":"+X:"")}return Z}toJSON(){return this.sections}static fromJSON(Z){if(!Array.isArray(Z)||Z.length%2||Z.some(($)=>typeof $!="number"))throw RangeError("Invalid JSON representation of ChangeDesc");return new V1(Z)}static create(Z){return new V1(Z)}}class D0 extends V1{constructor(Z,$){super(Z);this.inserted=$}apply(Z){if(this.length!=Z.length)throw RangeError("Applying change set to a document with the wrong length");return $7(this,($,J,X,Y,Q)=>Z=Z.replace(X,X+(J-$),Q),!1),Z}mapDesc(Z,$=!1){return J7(this,Z,$,!0)}invert(Z){let $=this.sections.slice(),J=[];for(let X=0,Y=0;X<$.length;X+=2){let Q=$[X],K=$[X+1];if(K>=0){$[X]=K,$[X+1]=Q;let U=X>>1;while(J.length<U)J.push(e.empty);J.push(Q?Z.slice(Y,Y+Q):e.empty)}Y+=Q}return new D0($,J)}compose(Z){return this.empty?Z:Z.empty?this:j5(this,Z,!0)}map(Z,$=!1){return Z.empty?this:J7(this,Z,$,!0)}iterChanges(Z,$=!1){$7(this,Z,$)}get desc(){return V1.create(this.sections)}filter(Z){let $=[],J=[],X=[],Y=new y2(this);Z:for(let Q=0,K=0;;){let U=Q==Z.length?1e9:Z[Q++];while(K<U||K==U&&Y.len==0){if(Y.done)break Z;let G=Math.min(Y.len,U-K);w0(X,G,-1);let W=Y.ins==-1?-1:Y.off==0?Y.ins:0;if(w0($,G,W),W>0)d1(J,$,Y.text);Y.forward(G),K+=G}let q=Z[Q++];while(K<q){if(Y.done)break Z;let G=Math.min(Y.len,q-K);w0($,G,-1),w0(X,G,Y.ins==-1?-1:Y.off==0?Y.ins:0),Y.forward(G),K+=G}}return{changes:new D0($,J),filtered:V1.create(X)}}toJSON(){let Z=[];for(let $=0;$<this.sections.length;$+=2){let J=this.sections[$],X=this.sections[$+1];if(X<0)Z.push(J);else if(X==0)Z.push([J]);else Z.push([J].concat(this.inserted[$>>1].toJSON()))}return Z}static of(Z,$,J){let X=[],Y=[],Q=0,K=null;function U(G=!1){if(!G&&!X.length)return;if(Q<$)w0(X,$-Q,-1);let W=new D0(X,Y);K=K?K.compose(W.map(K)):W,X=[],Y=[],Q=0}function q(G){if(Array.isArray(G))for(let W of G)q(W);else if(G instanceof D0){if(G.length!=$)throw RangeError(`Mismatched change set length (got ${G.length}, expected ${$})`);U(),K=K?K.compose(G.map(K)):G}else{let{from:W,to:j=W,insert:z}=G;if(W>j||W<0||j>$)throw RangeError(`Invalid change range ${W} to ${j} (in doc of length ${$})`);let _=!z?e.empty:typeof z=="string"?e.of(z.split(J||Z7)):z,V=_.length;if(W==j&&V==0)return;if(W<Q)U();if(W>Q)w0(X,W-Q,-1);w0(X,j-W,V),d1(Y,X,_),Q=j}}return q(Z),U(!K),K}static empty(Z){return new D0(Z?[Z,-1]:[],[])}static fromJSON(Z){if(!Array.isArray(Z))throw RangeError("Invalid JSON representation of ChangeSet");let $=[],J=[];for(let X=0;X<Z.length;X++){let Y=Z[X];if(typeof Y=="number")$.push(Y,-1);else if(!Array.isArray(Y)||typeof Y[0]!="number"||Y.some((Q,K)=>K&&typeof Q!="string"))throw RangeError("Invalid JSON representation of ChangeSet");else if(Y.length==1)$.push(Y[0],0);else{while(J.length<X)J.push(e.empty);J[X]=e.of(Y.slice(1)),$.push(Y[0],J[X].length)}}return new D0($,J)}static createSet(Z,$){return new D0(Z,$)}}function w0(Z,$,J,X=!1){if($==0&&J<=0)return;let Y=Z.length-2;if(Y>=0&&J<=0&&J==Z[Y+1])Z[Y]+=$;else if(Y>=0&&$==0&&Z[Y]==0)Z[Y+1]+=J;else if(X)Z[Y]+=$,Z[Y+1]+=J;else Z.push($,J)}function d1(Z,$,J){if(J.length==0)return;let X=$.length-2>>1;if(X<Z.length)Z[Z.length-1]=Z[Z.length-1].append(J);else{while(Z.length<X)Z.push(e.empty);Z.push(J)}}function $7(Z,$,J){let X=Z.inserted;for(let Y=0,Q=0,K=0;K<Z.sections.length;){let U=Z.sections[K++],q=Z.sections[K++];if(q<0)Y+=U,Q+=U;else{let G=Y,W=Q,j=e.empty;for(;;){if(G+=U,W+=q,q&&X)j=j.append(X[K-2>>1]);if(J||K==Z.sections.length||Z.sections[K+1]<0)break;U=Z.sections[K++],q=Z.sections[K++]}$(Y,G,Q,W,j),Y=G,Q=W}}}function J7(Z,$,J,X=!1){let Y=[],Q=X?[]:null,K=new y2(Z),U=new y2($);for(let q=-1;;)if(K.done&&U.len||U.done&&K.len)throw Error("Mismatched change set lengths");else if(K.ins==-1&&U.ins==-1){let G=Math.min(K.len,U.len);w0(Y,G,-1),K.forward(G),U.forward(G)}else if(U.ins>=0&&(K.ins<0||q==K.i||K.off==0&&(U.len<K.len||U.len==K.len&&!J))){let G=U.len;w0(Y,U.ins,-1);while(G){let W=Math.min(K.len,G);if(K.ins>=0&&q<K.i&&K.len<=W){if(w0(Y,0,K.ins),Q)d1(Q,Y,K.text);q=K.i}K.forward(W),G-=W}U.next()}else if(K.ins>=0){let G=0,W=K.len;while(W)if(U.ins==-1){let j=Math.min(W,U.len);G+=j,W-=j,U.forward(j)}else if(U.ins==0&&U.len<W)W-=U.len,U.next();else break;if(w0(Y,G,q<K.i?K.ins:0),Q&&q<K.i)d1(Q,Y,K.text);q=K.i,K.forward(K.len-W)}else if(K.done&&U.done)return Q?D0.createSet(Y,Q):V1.create(Y);else throw Error("Mismatched change set lengths")}function j5(Z,$,J=!1){let X=[],Y=J?[]:null,Q=new y2(Z),K=new y2($);for(let U=!1;;)if(Q.done&&K.done)return Y?D0.createSet(X,Y):V1.create(X);else if(Q.ins==0)w0(X,Q.len,0,U),Q.next();else if(K.len==0&&!K.done){if(w0(X,0,K.ins,U),Y)d1(Y,X,K.text);K.next()}else if(Q.done||K.done)throw Error("Mismatched change set lengths");else{let q=Math.min(Q.len2,K.len),G=X.length;if(Q.ins==-1){let W=K.ins==-1?-1:K.off?0:K.ins;if(w0(X,q,W,U),Y&&W)d1(Y,X,K.text)}else if(K.ins==-1){if(w0(X,Q.off?0:Q.len,q,U),Y)d1(Y,X,Q.textBit(q))}else if(w0(X,Q.off?0:Q.len,K.off?0:K.ins,U),Y&&!K.off)d1(Y,X,K.text);U=(Q.ins>q||K.ins>=0&&K.len>q)&&(U||X.length>G),Q.forward2(q),K.forward(q)}}class y2{constructor(Z){this.set=Z,this.i=0,this.next()}next(){let{sections:Z}=this.set;if(this.i<Z.length)this.len=Z[this.i++],this.ins=Z[this.i++];else this.len=0,this.ins=-2;this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:Z}=this.set,$=this.i-2>>1;return $>=Z.length?e.empty:Z[$]}textBit(Z){let{inserted:$}=this.set,J=this.i-2>>1;return J>=$.length&&!Z?e.empty:$[J].slice(this.off,Z==null?void 0:this.off+Z)}forward(Z){if(Z==this.len)this.next();else this.len-=Z,this.off+=Z}forward2(Z){if(this.ins==-1)this.forward(Z);else if(Z==this.ins)this.next();else this.ins-=Z,this.off+=Z}}class G2{constructor(Z,$,J){this.from=Z,this.to=$,this.flags=J}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let Z=this.flags&7;return Z==7?null:Z}get goalColumn(){let Z=this.flags>>6;return Z==16777215?void 0:Z}map(Z,$=-1){let J,X;if(this.empty)J=X=Z.mapPos(this.from,$);else J=Z.mapPos(this.from,1),X=Z.mapPos(this.to,-1);return J==this.from&&X==this.to?this:new G2(J,X,this.flags)}extend(Z,$=Z){if(Z<=this.anchor&&$>=this.anchor)return M.range(Z,$);let J=Math.abs(Z-this.anchor)>Math.abs($-this.anchor)?Z:$;return M.range(this.anchor,J)}eq(Z,$=!1){return this.anchor==Z.anchor&&this.head==Z.head&&this.goalColumn==Z.goalColumn&&(!$||!this.empty||this.assoc==Z.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(Z){if(!Z||typeof Z.anchor!="number"||typeof Z.head!="number")throw RangeError("Invalid JSON representation for SelectionRange");return M.range(Z.anchor,Z.head)}static create(Z,$,J){return new G2(Z,$,J)}}class M{constructor(Z,$){this.ranges=Z,this.mainIndex=$}map(Z,$=-1){if(Z.empty)return this;return M.create(this.ranges.map((J)=>J.map(Z,$)),this.mainIndex)}eq(Z,$=!1){if(this.ranges.length!=Z.ranges.length||this.mainIndex!=Z.mainIndex)return!1;for(let J=0;J<this.ranges.length;J++)if(!this.ranges[J].eq(Z.ranges[J],$))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new M([this.main],0)}addRange(Z,$=!0){return M.create([Z].concat(this.ranges),$?0:this.mainIndex+1)}replaceRange(Z,$=this.mainIndex){let J=this.ranges.slice();return J[$]=Z,M.create(J,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((Z)=>Z.toJSON()),main:this.mainIndex}}static fromJSON(Z){if(!Z||!Array.isArray(Z.ranges)||typeof Z.main!="number"||Z.main>=Z.ranges.length)throw RangeError("Invalid JSON representation for EditorSelection");return new M(Z.ranges.map(($)=>G2.fromJSON($)),Z.main)}static single(Z,$=Z){return new M([M.range(Z,$)],0)}static create(Z,$=0){if(Z.length==0)throw RangeError("A selection needs at least one range");for(let J=0,X=0;X<Z.length;X++){let Y=Z[X];if(Y.empty?Y.from<=J:Y.from<J)return M.normalized(Z.slice(),$);J=Y.to}return new M(Z,$)}static cursor(Z,$=0,J,X){return G2.create(Z,Z,($==0?0:$<0?8:16)|(J==null?7:Math.min(6,J))|(X!==null&&X!==void 0?X:16777215)<<6)}static range(Z,$,J,X){let Y=(J!==null&&J!==void 0?J:16777215)<<6|(X==null?7:Math.min(6,X));return $<Z?G2.create($,Z,48|Y):G2.create(Z,$,($>Z?8:0)|Y)}static normalized(Z,$=0){let J=Z[$];Z.sort((X,Y)=>X.from-Y.from),$=Z.indexOf(J);for(let X=1;X<Z.length;X++){let Y=Z[X],Q=Z[X-1];if(Y.empty?Y.from<=Q.to:Y.from<Q.to){let K=Q.from,U=Math.max(Y.to,Q.to);if(X<=$)$--;Z.splice(--X,2,Y.anchor>Y.head?M.range(U,K):M.range(K,U))}}return new M(Z,$)}}function z5(Z,$){for(let J of Z.ranges)if(J.to>$)throw RangeError("Selection points outside of document")}var j7=0;class k{constructor(Z,$,J,X,Y){this.combine=Z,this.compareInput=$,this.compare=J,this.isStatic=X,this.id=j7++,this.default=Z([]),this.extensions=typeof Y=="function"?Y(this):Y}get reader(){return this}static define(Z={}){return new k(Z.combine||(($)=>$),Z.compareInput||(($,J)=>$===J),Z.compare||(!Z.combine?z7:($,J)=>$===J),!!Z.static,Z.enables)}of(Z){return new U3([],this,0,Z)}compute(Z,$){if(this.isStatic)throw Error("Can't compute a static facet");return new U3(Z,this,1,$)}computeN(Z,$){if(this.isStatic)throw Error("Can't compute a static facet");return new U3(Z,this,2,$)}from(Z,$){if(!$)$=(J)=>J;return this.compute([Z],(J)=>$(J.field(Z)))}}function z7(Z,$){return Z==$||Z.length==$.length&&Z.every((J,X)=>J===$[X])}class U3{constructor(Z,$,J,X){this.dependencies=Z,this.facet=$,this.type=J,this.value=X,this.id=j7++}dynamicSlot(Z){var $;let J=this.value,X=this.facet.compareInput,Y=this.id,Q=Z[Y]>>1,K=this.type==2,U=!1,q=!1,G=[];for(let W of this.dependencies)if(W=="doc")U=!0;else if(W=="selection")q=!0;else if(((($=Z[W.id])!==null&&$!==void 0?$:1)&1)==0)G.push(Z[W.id]);return{create(W){return W.values[Q]=J(W),1},update(W,j){if(U&&j.docChanged||q&&(j.docChanged||j.selection)||X7(W,G)){let z=J(W);if(K?!K5(z,W.values[Q],X):!X(z,W.values[Q]))return W.values[Q]=z,1}return 0},reconfigure:(W,j)=>{let z,_=j.config.address[Y];if(_!=null){let V=_6(j,_);if(this.dependencies.every((O)=>{return O instanceof k?j.facet(O)===W.facet(O):O instanceof z0?j.field(O,!1)==W.field(O,!1):!0})||(K?K5(z=J(W),V,X):X(z=J(W),V)))return W.values[Q]=V,0}else z=J(W);return W.values[Q]=z,1}}}}function K5(Z,$,J){if(Z.length!=$.length)return!1;for(let X=0;X<Z.length;X++)if(!J(Z[X],$[X]))return!1;return!0}function X7(Z,$){let J=!1;for(let X of $)if(q3(Z,X)&1)J=!0;return J}function vQ(Z,$,J){let X=J.map((q)=>Z[q.id]),Y=J.map((q)=>q.type),Q=X.filter((q)=>!(q&1)),K=Z[$.id]>>1;function U(q){let G=[];for(let W=0;W<X.length;W++){let j=_6(q,X[W]);if(Y[W]==2)for(let z of j)G.push(z);else G.push(j)}return $.combine(G)}return{create(q){for(let G of X)q3(q,G);return q.values[K]=U(q),1},update(q,G){if(!X7(q,Q))return 0;let W=U(q);if($.compare(W,q.values[K]))return 0;return q.values[K]=W,1},reconfigure(q,G){let W=X7(q,X),j=G.config.facets[$.id],z=G.facet($);if(j&&!W&&z7(J,j))return q.values[K]=z,0;let _=U(q);if($.compare(_,z))return q.values[K]=z,0;return q.values[K]=_,1}}}var U6=k.define({static:!0});class z0{constructor(Z,$,J,X,Y){this.id=Z,this.createF=$,this.updateF=J,this.compareF=X,this.spec=Y,this.provides=void 0}static define(Z){let $=new z0(j7++,Z.create,Z.update,Z.compare||((J,X)=>J===X),Z);if(Z.provide)$.provides=Z.provide($);return $}create(Z){let $=Z.facet(U6).find((J)=>J.field==this);return(($===null||$===void 0?void 0:$.create)||this.createF)(Z)}slot(Z){let $=Z[this.id]>>1;return{create:(J)=>{return J.values[$]=this.create(J),1},update:(J,X)=>{let Y=J.values[$],Q=this.updateF(Y,X);if(this.compareF(Y,Q))return 0;return J.values[$]=Q,1},reconfigure:(J,X)=>{let Y=J.facet(U6),Q=X.facet(U6),K;if((K=Y.find((U)=>U.field==this))&&K!=Q.find((U)=>U.field==this))return J.values[$]=K.create(J),1;if(X.config.address[this.id]!=null)return J.values[$]=X.field(this),0;return J.values[$]=this.create(J),1}}}init(Z){return[this,U6.of({field:this,create:Z})]}get extension(){return this}}var q2={lowest:4,low:3,default:2,high:1,highest:0};function K3(Z){return($)=>new _7($,Z)}var N1={highest:K3(q2.highest),high:K3(q2.high),default:K3(q2.default),low:K3(q2.low),lowest:K3(q2.lowest)};class _7{constructor(Z,$){this.inner=Z,this.prec=$}}class b2{of(Z){return new j6(this,Z)}reconfigure(Z){return b2.reconfigure.of({compartment:this,extension:Z})}get(Z){return Z.config.compartments.get(this)}}class j6{constructor(Z,$){this.compartment=Z,this.inner=$}}class z6{constructor(Z,$,J,X,Y,Q){this.base=Z,this.compartments=$,this.dynamicSlots=J,this.address=X,this.staticValues=Y,this.facets=Q,this.statusTemplate=[];while(this.statusTemplate.length<J.length)this.statusTemplate.push(0)}staticFacet(Z){let $=this.address[Z.id];return $==null?Z.default:this.staticValues[$>>1]}static resolve(Z,$,J){let X=[],Y=Object.create(null),Q=new Map;for(let j of uQ(Z,$,Q))if(j instanceof z0)X.push(j);else(Y[j.facet.id]||(Y[j.facet.id]=[])).push(j);let K=Object.create(null),U=[],q=[];for(let j of X)K[j.id]=q.length<<1,q.push((z)=>j.slot(z));let G=J===null||J===void 0?void 0:J.config.facets;for(let j in Y){let z=Y[j],_=z[0].facet,V=G&&G[j]||[];if(z.every((O)=>O.type==0))if(K[_.id]=U.length<<1|1,z7(V,z))U.push(J.facet(_));else{let O=_.combine(z.map((N)=>N.value));U.push(J&&_.compare(O,J.facet(_))?J.facet(_):O)}else{for(let O of z)if(O.type==0)K[O.id]=U.length<<1|1,U.push(O.value);else K[O.id]=q.length<<1,q.push((N)=>O.dynamicSlot(N));K[_.id]=q.length<<1,q.push((O)=>vQ(O,_,z))}}let W=q.map((j)=>j(K));return new z6(Z,Q,W,K,U,Y)}}function uQ(Z,$,J){let X=[[],[],[],[],[]],Y=new Map;function Q(K,U){let q=Y.get(K);if(q!=null){if(q<=U)return;let G=X[q].indexOf(K);if(G>-1)X[q].splice(G,1);if(K instanceof j6)J.delete(K.compartment)}if(Y.set(K,U),Array.isArray(K))for(let G of K)Q(G,U);else if(K instanceof j6){if(J.has(K.compartment))throw RangeError("Duplicate use of compartment in extensions");let G=$.get(K.compartment)||K.inner;J.set(K.compartment,G),Q(G,U)}else if(K instanceof _7)Q(K.inner,K.prec);else if(K instanceof z0){if(X[U].push(K),K.provides)Q(K.provides,U)}else if(K instanceof U3){if(X[U].push(K),K.facet.extensions)Q(K.facet.extensions,q2.default)}else{let G=K.extension;if(!G)throw Error(`Unrecognized extension value in extension set (${K}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);Q(G,U)}}return Q(Z,q2.default),X.reduce((K,U)=>K.concat(U))}function q3(Z,$){if($&1)return 2;let J=$>>1,X=Z.status[J];if(X==4)throw Error("Cyclic dependency between fields and/or facets");if(X&2)return X;Z.status[J]=4;let Y=Z.computeSlot(Z,Z.config.dynamicSlots[J]);return Z.status[J]=2|Y}function _6(Z,$){return $&1?Z.config.staticValues[$>>1]:Z.values[$>>1]}var _5=k.define(),Y7=k.define({combine:(Z)=>Z.some(($)=>$),static:!0}),O5=k.define({combine:(Z)=>Z.length?Z[0]:void 0,static:!0}),V5=k.define(),H5=k.define(),N5=k.define(),R5=k.define({combine:(Z)=>Z.length?Z[0]:!1});class r0{constructor(Z,$){this.type=Z,this.value=$}static define(){return new F5}}class F5{of(Z){return new r0(this,Z)}}class I5{constructor(Z){this.map=Z}of(Z){return new p(this,Z)}}class p{constructor(Z,$){this.type=Z,this.value=$}map(Z){let $=this.type.map(this.value,Z);return $===void 0?void 0:$==this.value?this:new p(this.type,$)}is(Z){return this.type==Z}static define(Z={}){return new I5(Z.map||(($)=>$))}static mapEffects(Z,$){if(!Z.length)return Z;let J=[];for(let X of Z){let Y=X.map($);if(Y)J.push(Y)}return J}}p.reconfigure=p.define();p.appendConfig=p.define();class H0{constructor(Z,$,J,X,Y,Q){if(this.startState=Z,this.changes=$,this.selection=J,this.effects=X,this.annotations=Y,this.scrollIntoView=Q,this._doc=null,this._state=null,J)z5(J,$.newLength);if(!Y.some((K)=>K.type==H0.time))this.annotations=Y.concat(H0.time.of(Date.now()))}static create(Z,$,J,X,Y,Q){return new H0(Z,$,J,X,Y,Q)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){if(!this._state)this.startState.applyTransaction(this);return this._state}annotation(Z){for(let $ of this.annotations)if($.type==Z)return $.value;return}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(Z){let $=this.annotation(H0.userEvent);return!!($&&($==Z||$.length>Z.length&&$.slice(0,Z.length)==Z&&$[Z.length]=="."))}}H0.time=r0.define();H0.userEvent=r0.define();H0.addToHistory=r0.define();H0.remote=r0.define();function mQ(Z,$){let J=[];for(let X=0,Y=0;;){let Q,K;if(X<Z.length&&(Y==$.length||$[Y]>=Z[X]))Q=Z[X++],K=Z[X++];else if(Y<$.length)Q=$[Y++],K=$[Y++];else return J;if(!J.length||J[J.length-1]<Q)J.push(Q,K);else if(J[J.length-1]<K)J[J.length-1]=K}}function D5(Z,$,J){var X;let Y,Q,K;if(J)Y=$.changes,Q=D0.empty($.changes.length),K=Z.changes.compose($.changes);else Y=$.changes.map(Z.changes),Q=Z.changes.mapDesc($.changes,!0),K=Z.changes.compose(Y);return{changes:K,selection:$.selection?$.selection.map(Q):(X=Z.selection)===null||X===void 0?void 0:X.map(Y),effects:p.mapEffects(Z.effects,Y).concat(p.mapEffects($.effects,Q)),annotations:Z.annotations.length?Z.annotations.concat($.annotations):$.annotations,scrollIntoView:Z.scrollIntoView||$.scrollIntoView}}function Q7(Z,$,J){let X=$.selection,Y=C2($.annotations);if($.userEvent)Y=Y.concat(H0.userEvent.of($.userEvent));return{changes:$.changes instanceof D0?$.changes:D0.of($.changes||[],J,Z.facet(O5)),selection:X&&(X instanceof M?X:M.single(X.anchor,X.head)),effects:C2($.effects),annotations:Y,scrollIntoView:!!$.scrollIntoView}}function M5(Z,$,J){let X=Q7(Z,$.length?$[0]:{},Z.doc.length);if($.length&&$[0].filter===!1)J=!1;for(let Q=1;Q<$.length;Q++){if($[Q].filter===!1)J=!1;let K=!!$[Q].sequential;X=D5(X,Q7(Z,$[Q],K?X.changes.newLength:Z.doc.length),K)}let Y=H0.create(Z,X.changes,X.selection,X.effects,X.annotations,X.scrollIntoView);return fQ(J?gQ(Y):Y)}function gQ(Z){let $=Z.startState,J=!0;for(let Y of $.facet(V5)){let Q=Y(Z);if(Q===!1){J=!1;break}if(Array.isArray(Q))J=J===!0?Q:mQ(J,Q)}if(J!==!0){let Y,Q;if(J===!1)Q=Z.changes.invertedDesc,Y=D0.empty($.doc.length);else{let K=Z.changes.filter(J);Y=K.changes,Q=K.filtered.mapDesc(K.changes).invertedDesc}Z=H0.create($,Y,Z.selection&&Z.selection.map(Q),p.mapEffects(Z.effects,Q),Z.annotations,Z.scrollIntoView)}let X=$.facet(H5);for(let Y=X.length-1;Y>=0;Y--){let Q=X[Y](Z);if(Q instanceof H0)Z=Q;else if(Array.isArray(Q)&&Q.length==1&&Q[0]instanceof H0)Z=Q[0];else Z=M5($,C2(Q),!1)}return Z}function fQ(Z){let $=Z.startState,J=$.facet(N5),X=Z;for(let Y=J.length-1;Y>=0;Y--){let Q=J[Y](Z);if(Q&&Object.keys(Q).length)X=D5(X,Q7($,Q,Z.changes.newLength),!0)}return X==Z?Z:H0.create($,Z.changes,Z.selection,X.effects,X.annotations,X.scrollIntoView)}var pQ=[];function C2(Z){return Z==null?pQ:Array.isArray(Z)?Z:[Z]}var Q0=function(Z){return Z[Z.Word=0]="Word",Z[Z.Space=1]="Space",Z[Z.Other=2]="Other",Z}(Q0||(Q0={})),lQ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,K7;try{K7=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(Z){}function dQ(Z){if(K7)return K7.test(Z);for(let $=0;$<Z.length;$++){let J=Z[$];if(/\w/.test(J)||J>"Â€"&&(J.toUpperCase()!=J.toLowerCase()||lQ.test(J)))return!0}return!1}function cQ(Z){return($)=>{if(!/\S/.test($))return Q0.Space;if(dQ($))return Q0.Word;for(let J=0;J<Z.length;J++)if($.indexOf(Z[J])>-1)return Q0.Word;return Q0.Other}}class n{constructor(Z,$,J,X,Y,Q){if(this.config=Z,this.doc=$,this.selection=J,this.values=X,this.status=Z.statusTemplate.slice(),this.computeSlot=Y,Q)Q._state=this;for(let K=0;K<this.config.dynamicSlots.length;K++)q3(this,K<<1);this.computeSlot=null}field(Z,$=!0){let J=this.config.address[Z.id];if(J==null){if($)throw RangeError("Field is not present in this state");return}return q3(this,J),_6(this,J)}update(...Z){return M5(this,Z,!0)}applyTransaction(Z){let $=this.config,{base:J,compartments:X}=$;for(let K of Z.effects)if(K.is(b2.reconfigure)){if($)X=new Map,$.compartments.forEach((U,q)=>X.set(q,U)),$=null;X.set(K.value.compartment,K.value.extension)}else if(K.is(p.reconfigure))$=null,J=K.value;else if(K.is(p.appendConfig))$=null,J=C2(J).concat(K.value);let Y;if(!$)$=z6.resolve(J,X,this),Y=new n($,this.doc,this.selection,$.dynamicSlots.map(()=>null),(U,q)=>q.reconfigure(U,this),null).values;else Y=Z.startState.values.slice();let Q=Z.startState.facet(Y7)?Z.newSelection:Z.newSelection.asSingle();new n($,Z.newDoc,Q,Y,(K,U)=>U.update(K,Z),Z)}replaceSelection(Z){if(typeof Z=="string")Z=this.toText(Z);return this.changeByRange(($)=>({changes:{from:$.from,to:$.to,insert:Z},range:M.cursor($.from+Z.length)}))}changeByRange(Z){let $=this.selection,J=Z($.ranges[0]),X=this.changes(J.changes),Y=[J.range],Q=C2(J.effects);for(let K=1;K<$.ranges.length;K++){let U=Z($.ranges[K]),q=this.changes(U.changes),G=q.map(X);for(let j=0;j<K;j++)Y[j]=Y[j].map(G);let W=X.mapDesc(q,!0);Y.push(U.range.map(W)),X=X.compose(G),Q=p.mapEffects(Q,G).concat(p.mapEffects(C2(U.effects),W))}return{changes:X,selection:M.create(Y,$.mainIndex),effects:Q}}changes(Z=[]){if(Z instanceof D0)return Z;return D0.of(Z,this.doc.length,this.facet(n.lineSeparator))}toText(Z){return e.of(Z.split(this.facet(n.lineSeparator)||Z7))}sliceDoc(Z=0,$=this.doc.length){return this.doc.sliceString(Z,$,this.lineBreak)}facet(Z){let $=this.config.address[Z.id];if($==null)return Z.default;return q3(this,$),_6(this,$)}toJSON(Z){let $={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(Z)for(let J in Z){let X=Z[J];if(X instanceof z0&&this.config.address[X.id]!=null)$[J]=X.spec.toJSON(this.field(Z[J]),this)}return $}static fromJSON(Z,$={},J){if(!Z||typeof Z.doc!="string")throw RangeError("Invalid JSON representation for EditorState");let X=[];if(J){for(let Y in J)if(Object.prototype.hasOwnProperty.call(Z,Y)){let Q=J[Y],K=Z[Y];X.push(Q.init((U)=>Q.spec.fromJSON(K,U)))}}return n.create({doc:Z.doc,selection:M.fromJSON(Z.selection),extensions:$.extensions?X.concat([$.extensions]):X})}static create(Z={}){let $=z6.resolve(Z.extensions||[],new Map),J=Z.doc instanceof e?Z.doc:e.of((Z.doc||"").split($.staticFacet(n.lineSeparator)||Z7)),X=!Z.selection?M.single(0):Z.selection instanceof M?Z.selection:M.single(Z.selection.anchor,Z.selection.head);if(z5(X,J.length),!$.staticFacet(Y7))X=X.asSingle();return new n($,J,X,$.dynamicSlots.map(()=>null),(Y,Q)=>Q.create(Y),null)}get tabSize(){return this.facet(n.tabSize)}get lineBreak(){return this.facet(n.lineSeparator)||`
`}get readOnly(){return this.facet(R5)}phrase(Z,...$){for(let J of this.facet(n.phrases))if(Object.prototype.hasOwnProperty.call(J,Z)){Z=J[Z];break}if($.length)Z=Z.replace(/\$(\$|\d*)/g,(J,X)=>{if(X=="$")return"$";let Y=+(X||1);return!Y||Y>$.length?J:$[Y-1]});return Z}languageDataAt(Z,$,J=-1){let X=[];for(let Y of this.facet(_5))for(let Q of Y(this,$,J))if(Object.prototype.hasOwnProperty.call(Q,Z))X.push(Q[Z]);return X}charCategorizer(Z){let $=this.languageDataAt("wordChars",Z);return cQ($.length?$[0]:"")}wordAt(Z){let{text:$,from:J,length:X}=this.doc.lineAt(Z),Y=this.charCategorizer(Z),Q=Z-J,K=Z-J;while(Q>0){let U=N0($,Q,!1);if(Y($.slice(U,Q))!=Q0.Word)break;Q=U}while(K<X){let U=N0($,K);if(Y($.slice(K,U))!=Q0.Word)break;K=U}return Q==K?null:M.range(Q+J,K+J)}}n.allowMultipleSelections=Y7;n.tabSize=k.define({combine:(Z)=>Z.length?Z[0]:4});n.lineSeparator=O5;n.readOnly=R5;n.phrases=k.define({compare(Z,$){let J=Object.keys(Z),X=Object.keys($);return J.length==X.length&&J.every((Y)=>Z[Y]==$[Y])}});n.languageData=_5;n.changeFilter=V5;n.transactionFilter=H5;n.transactionExtender=N5;b2.reconfigure=p.define();function h0(Z,$,J={}){let X={};for(let Y of Z)for(let Q of Object.keys(Y)){let K=Y[Q],U=X[Q];if(U===void 0)X[Q]=K;else if(U===K||K===void 0);else if(Object.hasOwnProperty.call(J,Q))X[Q]=J[Q](U,K);else throw Error("Config merge conflict for field "+Q)}for(let Y in $)if(X[Y]===void 0)X[Y]=$[Y];return X}class H1{eq(Z){return this==Z}range(Z,$=Z){return G3.create(Z,$,this)}}H1.prototype.startSide=H1.prototype.endSide=0;H1.prototype.point=!1;H1.prototype.mapMode=T0.TrackDel;function O7(Z,$){return Z==$||Z.constructor==$.constructor&&Z.eq($)}class G3{constructor(Z,$,J){this.from=Z,this.to=$,this.value=J}static create(Z,$,J){return new G3(Z,$,J)}}function U7(Z,$){return Z.from-$.from||Z.value.startSide-$.value.startSide}class V7{constructor(Z,$,J,X){this.from=Z,this.to=$,this.value=J,this.maxPoint=X}get length(){return this.to[this.to.length-1]}findIndex(Z,$,J,X=0){let Y=J?this.to:this.from;for(let Q=X,K=Y.length;;){if(Q==K)return Q;let U=Q+K>>1,q=Y[U]-Z||(J?this.value[U].endSide:this.value[U].startSide)-$;if(U==Q)return q>=0?Q:K;if(q>=0)K=U;else Q=U+1}}between(Z,$,J,X){for(let Y=this.findIndex($,-1e9,!0),Q=this.findIndex(J,1e9,!1,Y);Y<Q;Y++)if(X(this.from[Y]+Z,this.to[Y]+Z,this.value[Y])===!1)return!1}map(Z,$){let J=[],X=[],Y=[],Q=-1,K=-1;for(let U=0;U<this.value.length;U++){let q=this.value[U],G=this.from[U]+Z,W=this.to[U]+Z,j,z;if(G==W){let _=$.mapPos(G,q.startSide,q.mapMode);if(_==null)continue;if(j=z=_,q.startSide!=q.endSide){if(z=$.mapPos(G,q.endSide),z<j)continue}}else if(j=$.mapPos(G,q.startSide),z=$.mapPos(W,q.endSide),j>z||j==z&&q.startSide>0&&q.endSide<=0)continue;if((z-j||q.endSide-q.startSide)<0)continue;if(Q<0)Q=j;if(q.point)K=Math.max(K,z-j);J.push(q),X.push(j-Q),Y.push(z-Q)}return{mapped:J.length?new V7(X,Y,J,K):null,pos:Q}}}class i{constructor(Z,$,J,X){this.chunkPos=Z,this.chunk=$,this.nextLayer=J,this.maxPoint=X}static create(Z,$,J,X){return new i(Z,$,J,X)}get length(){let Z=this.chunk.length-1;return Z<0?0:Math.max(this.chunkEnd(Z),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let Z=this.nextLayer.size;for(let $ of this.chunk)Z+=$.value.length;return Z}chunkEnd(Z){return this.chunkPos[Z]+this.chunk[Z].length}update(Z){let{add:$=[],sort:J=!1,filterFrom:X=0,filterTo:Y=this.length}=Z,Q=Z.filter;if($.length==0&&!Q)return this;if(J)$=$.slice().sort(U7);if(this.isEmpty)return $.length?i.of($):this;let K=new H7(this,null,-1).goto(0),U=0,q=[],G=new n0;while(K.value||U<$.length)if(U<$.length&&(K.from-$[U].from||K.startSide-$[U].value.startSide)>=0){let W=$[U++];if(!G.addInner(W.from,W.to,W.value))q.push(W)}else if(K.rangeIndex==1&&K.chunkIndex<this.chunk.length&&(U==$.length||this.chunkEnd(K.chunkIndex)<$[U].from)&&(!Q||X>this.chunkEnd(K.chunkIndex)||Y<this.chunkPos[K.chunkIndex])&&G.addChunk(this.chunkPos[K.chunkIndex],this.chunk[K.chunkIndex]))K.nextChunk();else{if(!Q||X>K.to||Y<K.from||Q(K.from,K.to,K.value)){if(!G.addInner(K.from,K.to,K.value))q.push(G3.create(K.from,K.to,K.value))}K.next()}return G.finishInner(this.nextLayer.isEmpty&&!q.length?i.empty:this.nextLayer.update({add:q,filter:Q,filterFrom:X,filterTo:Y}))}map(Z){if(Z.empty||this.isEmpty)return this;let $=[],J=[],X=-1;for(let Q=0;Q<this.chunk.length;Q++){let K=this.chunkPos[Q],U=this.chunk[Q],q=Z.touchesRange(K,K+U.length);if(q===!1)X=Math.max(X,U.maxPoint),$.push(U),J.push(Z.mapPos(K));else if(q===!0){let{mapped:G,pos:W}=U.map(K,Z);if(G)X=Math.max(X,G.maxPoint),$.push(G),J.push(W)}}let Y=this.nextLayer.map(Z);return $.length==0?Y:new i(J,$,Y||i.empty,X)}between(Z,$,J){if(this.isEmpty)return;for(let X=0;X<this.chunk.length;X++){let Y=this.chunkPos[X],Q=this.chunk[X];if($>=Y&&Z<=Y+Q.length&&Q.between(Y,Z-Y,$-Y,J)===!1)return}this.nextLayer.between(Z,$,J)}iter(Z=0){return W3.from([this]).goto(Z)}get isEmpty(){return this.nextLayer==this}static iter(Z,$=0){return W3.from(Z).goto($)}static compare(Z,$,J,X,Y=-1){let Q=Z.filter((W)=>W.maxPoint>0||!W.isEmpty&&W.maxPoint>=Y),K=$.filter((W)=>W.maxPoint>0||!W.isEmpty&&W.maxPoint>=Y),U=U5(Q,K,J),q=new E2(Q,U,Y),G=new E2(K,U,Y);if(J.iterGaps((W,j,z)=>q5(q,W,G,j,z,X)),J.empty&&J.length==0)q5(q,0,G,0,0,X)}static eq(Z,$,J=0,X){if(X==null)X=999999999;let Y=Z.filter((G)=>!G.isEmpty&&$.indexOf(G)<0),Q=$.filter((G)=>!G.isEmpty&&Z.indexOf(G)<0);if(Y.length!=Q.length)return!1;if(!Y.length)return!0;let K=U5(Y,Q),U=new E2(Y,K,0).goto(J),q=new E2(Q,K,0).goto(J);for(;;){if(U.to!=q.to||!q7(U.active,q.active)||U.point&&(!q.point||!O7(U.point,q.point)))return!1;if(U.to>X)return!0;U.next(),q.next()}}static spans(Z,$,J,X,Y=-1){let Q=new E2(Z,null,Y).goto($),K=$,U=Q.openStart;for(;;){let q=Math.min(Q.to,J);if(Q.point){let G=Q.activeForPoint(Q.to),W=Q.pointFrom<$?G.length+1:Q.point.startSide<0?G.length:Math.min(G.length,U);X.point(K,q,Q.point,G,W,Q.pointRank),U=Math.min(Q.openEnd(q),G.length)}else if(q>K)X.span(K,q,Q.active,U),U=Q.openEnd(q);if(Q.to>J)return U+(Q.point&&Q.to>J?1:0);K=Q.to,Q.next()}}static of(Z,$=!1){let J=new n0;for(let X of Z instanceof G3?[Z]:$?sQ(Z):Z)J.add(X.from,X.to,X.value);return J.finish()}static join(Z){if(!Z.length)return i.empty;let $=Z[Z.length-1];for(let J=Z.length-2;J>=0;J--)for(let X=Z[J];X!=i.empty;X=X.nextLayer)$=new i(X.chunkPos,X.chunk,$,Math.max(X.maxPoint,$.maxPoint));return $}}i.empty=new i([],[],null,-1);function sQ(Z){if(Z.length>1)for(let $=Z[0],J=1;J<Z.length;J++){let X=Z[J];if(U7($,X)>0)return Z.slice().sort(U7);$=X}return Z}i.empty.nextLayer=i.empty;class n0{finishChunk(Z){if(this.chunks.push(new V7(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,Z)this.from=[],this.to=[],this.value=[]}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(Z,$,J){if(!this.addInner(Z,$,J))(this.nextLayer||(this.nextLayer=new n0)).add(Z,$,J)}addInner(Z,$,J){let X=Z-this.lastTo||J.startSide-this.last.endSide;if(X<=0&&(Z-this.lastFrom||J.startSide-this.last.startSide)<0)throw Error("Ranges must be added sorted by `from` position and `startSide`");if(X<0)return!1;if(this.from.length==250)this.finishChunk(!0);if(this.chunkStart<0)this.chunkStart=Z;if(this.from.push(Z-this.chunkStart),this.to.push($-this.chunkStart),this.last=J,this.lastFrom=Z,this.lastTo=$,this.value.push(J),J.point)this.maxPoint=Math.max(this.maxPoint,$-Z);return!0}addChunk(Z,$){if((Z-this.lastTo||$.value[0].startSide-this.last.endSide)<0)return!1;if(this.from.length)this.finishChunk(!0);this.setMaxPoint=Math.max(this.setMaxPoint,$.maxPoint),this.chunks.push($),this.chunkPos.push(Z);let J=$.value.length-1;return this.last=$.value[J],this.lastFrom=$.from[J]+Z,this.lastTo=$.to[J]+Z,!0}finish(){return this.finishInner(i.empty)}finishInner(Z){if(this.from.length)this.finishChunk(!1);if(this.chunks.length==0)return Z;let $=i.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(Z):Z,this.setMaxPoint);return this.from=null,$}}function U5(Z,$,J){let X=new Map;for(let Q of Z)for(let K=0;K<Q.chunk.length;K++)if(Q.chunk[K].maxPoint<=0)X.set(Q.chunk[K],Q.chunkPos[K]);let Y=new Set;for(let Q of $)for(let K=0;K<Q.chunk.length;K++){let U=X.get(Q.chunk[K]);if(U!=null&&(J?J.mapPos(U):U)==Q.chunkPos[K]&&!(J===null||J===void 0?void 0:J.touchesRange(U,U+Q.chunk[K].length)))Y.add(Q.chunk[K])}return Y}class H7{constructor(Z,$,J,X=0){this.layer=Z,this.skip=$,this.minPoint=J,this.rank=X}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(Z,$=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(Z,$,!1),this}gotoInner(Z,$,J){while(this.chunkIndex<this.layer.chunk.length){let X=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(X)||this.layer.chunkEnd(this.chunkIndex)<Z||X.maxPoint<this.minPoint))break;this.chunkIndex++,J=!1}if(this.chunkIndex<this.layer.chunk.length){let X=this.layer.chunk[this.chunkIndex].findIndex(Z-this.layer.chunkPos[this.chunkIndex],$,!0);if(!J||this.rangeIndex<X)this.setRangeIndex(X)}this.next()}forward(Z,$){if((this.to-Z||this.endSide-$)<0)this.gotoInner(Z,$,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let Z=this.layer.chunkPos[this.chunkIndex],$=this.layer.chunk[this.chunkIndex],J=Z+$.from[this.rangeIndex];if(this.from=J,this.to=Z+$.to[this.rangeIndex],this.value=$.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(Z){if(Z==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)while(this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]))this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=Z}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(Z){return this.from-Z.from||this.startSide-Z.startSide||this.rank-Z.rank||this.to-Z.to||this.endSide-Z.endSide}}class W3{constructor(Z){this.heap=Z}static from(Z,$=null,J=-1){let X=[];for(let Y=0;Y<Z.length;Y++)for(let Q=Z[Y];!Q.isEmpty;Q=Q.nextLayer)if(Q.maxPoint>=J)X.push(new H7(Q,$,J,Y));return X.length==1?X[0]:new W3(X)}get startSide(){return this.value?this.value.startSide:0}goto(Z,$=-1e9){for(let J of this.heap)J.goto(Z,$);for(let J=this.heap.length>>1;J>=0;J--)e9(this.heap,J);return this.next(),this}forward(Z,$){for(let J of this.heap)J.forward(Z,$);for(let J=this.heap.length>>1;J>=0;J--)e9(this.heap,J);if((this.to-Z||this.value.endSide-$)<0)this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let Z=this.heap[0];if(this.from=Z.from,this.to=Z.to,this.value=Z.value,this.rank=Z.rank,Z.value)Z.next();e9(this.heap,0)}}}function e9(Z,$){for(let J=Z[$];;){let X=($<<1)+1;if(X>=Z.length)break;let Y=Z[X];if(X+1<Z.length&&Y.compare(Z[X+1])>=0)Y=Z[X+1],X++;if(J.compare(Y)<0)break;Z[X]=J,Z[$]=Y,$=X}}class E2{constructor(Z,$,J){this.minPoint=J,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=W3.from(Z,$,J)}goto(Z,$=-1e9){return this.cursor.goto(Z,$),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=Z,this.endSide=$,this.openStart=-1,this.next(),this}forward(Z,$){while(this.minActive>-1&&(this.activeTo[this.minActive]-Z||this.active[this.minActive].endSide-$)<0)this.removeActive(this.minActive);this.cursor.forward(Z,$)}removeActive(Z){q6(this.active,Z),q6(this.activeTo,Z),q6(this.activeRank,Z),this.minActive=G5(this.active,this.activeTo)}addActive(Z){let $=0,{value:J,to:X,rank:Y}=this.cursor;while($<this.activeRank.length&&(Y-this.activeRank[$]||X-this.activeTo[$])>0)$++;if(G6(this.active,$,J),G6(this.activeTo,$,X),G6(this.activeRank,$,Y),Z)G6(Z,$,this.cursor.from);this.minActive=G5(this.active,this.activeTo)}next(){let Z=this.to,$=this.point;this.point=null;let J=this.openStart<0?[]:null;for(;;){let X=this.minActive;if(X>-1&&(this.activeTo[X]-this.cursor.from||this.active[X].endSide-this.cursor.startSide)<0){if(this.activeTo[X]>Z){this.to=this.activeTo[X],this.endSide=this.active[X].endSide;break}if(this.removeActive(X),J)q6(J,X)}else if(!this.cursor.value){this.to=this.endSide=1e9;break}else if(this.cursor.from>Z){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let Y=this.cursor.value;if(!Y.point)this.addActive(J),this.cursor.next();else if($&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=Y,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=Y.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}}if(J){this.openStart=0;for(let X=J.length-1;X>=0&&J[X]<Z;X--)this.openStart++}}activeForPoint(Z){if(!this.active.length)return this.active;let $=[];for(let J=this.active.length-1;J>=0;J--){if(this.activeRank[J]<this.pointRank)break;if(this.activeTo[J]>Z||this.activeTo[J]==Z&&this.active[J].endSide>=this.point.endSide)$.push(this.active[J])}return $.reverse()}openEnd(Z){let $=0;for(let J=this.activeTo.length-1;J>=0&&this.activeTo[J]>Z;J--)$++;return $}}function q5(Z,$,J,X,Y,Q){Z.goto($),J.goto(X);let K=X+Y,U=X,q=X-$,G=!!Q.boundChange;for(let W=!1;;){let j=Z.to+q-J.to,z=j||Z.endSide-J.endSide,_=z<0?Z.to+q:J.to,V=Math.min(_,K);if(Z.point||J.point){if(!(Z.point&&J.point&&O7(Z.point,J.point)&&q7(Z.activeForPoint(Z.to),J.activeForPoint(J.to))))Q.comparePoint(U,V,Z.point,J.point);W=!1}else{if(W)Q.boundChange(U);if(V>U&&!q7(Z.active,J.active))Q.compareRange(U,V,Z.active,J.active);if(G&&V<K&&(j||Z.openEnd(_)!=J.openEnd(_)))W=!0}if(_>K)break;if(U=_,z<=0)Z.next();if(z>=0)J.next()}}function q7(Z,$){if(Z.length!=$.length)return!1;for(let J=0;J<Z.length;J++)if(Z[J]!=$[J]&&!O7(Z[J],$[J]))return!1;return!0}function q6(Z,$){for(let J=$,X=Z.length-1;J<X;J++)Z[J]=Z[J+1];Z.pop()}function G6(Z,$,J){for(let X=Z.length-1;X>=$;X--)Z[X+1]=Z[X];Z[$]=J}function G5(Z,$){let J=-1,X=1e9;for(let Y=0;Y<$.length;Y++)if(($[Y]-X||Z[Y].endSide-Z[J].endSide)<0)J=Y,X=$[Y];return J}function v1(Z,$,J=Z.length){let X=0;for(let Y=0;Y<J&&Y<Z.length;)if(Z.charCodeAt(Y)==9)X+=$-X%$,Y++;else X++,Y=N0(Z,Y);return X}function O6(Z,$,J,X){for(let Y=0,Q=0;;){if(Q>=$)return Y;if(Y==Z.length)break;Q+=Z.charCodeAt(Y)==9?J-Q%J:1,Y=N0(Z,Y)}return X===!0?-1:Z.length}var A5=typeof Symbol>"u"?"__"+"Í¼":Symbol.for("Í¼"),N7=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),L5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class R1{constructor(Z,$){this.rules=[];let{finish:J}=$||{};function X(Q){return/^@/.test(Q)?[Q]:Q.split(/,\s*/)}function Y(Q,K,U,q){let G=[],W=/^@(\w+)\b/.exec(Q[0]),j=W&&W[1]=="keyframes";if(W&&K==null)return U.push(Q[0]+";");for(let z in K){let _=K[z];if(/&/.test(z))Y(z.split(/,\s*/).map((V)=>Q.map((O)=>V.replace(/&/,O))).reduce((V,O)=>V.concat(O)),_,U);else if(_&&typeof _=="object"){if(!W)throw RangeError("The value of a property ("+z+") should be a primitive value.");Y(X(z),_,G,j)}else if(_!=null)G.push(z.replace(/_.*/,"").replace(/[A-Z]/g,(V)=>"-"+V.toLowerCase())+": "+_+";")}if(G.length||j)U.push((J&&!W&&!q?Q.map(J):Q).join(", ")+" {"+G.join(" ")+"}")}for(let Q in Z)Y(X(Q),Z[Q],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let Z=L5[A5]||1;return L5[A5]=Z+1,"Í¼"+Z.toString(36)}static mount(Z,$,J){let X=Z[N7],Y=J&&J.nonce;if(!X)X=new E5(Z,Y);else if(Y)X.setNonce(Y);X.mount(Array.isArray($)?$:[$],Z)}}var B5=new Map;class E5{constructor(Z,$){let J=Z.ownerDocument||Z,X=J.defaultView;if(!Z.head&&Z.adoptedStyleSheets&&X.CSSStyleSheet){let Y=B5.get(J);if(Y)return Z[N7]=Y;this.sheet=new X.CSSStyleSheet,B5.set(J,this)}else if(this.styleTag=J.createElement("style"),$)this.styleTag.setAttribute("nonce",$);this.modules=[],Z[N7]=this}mount(Z,$){let J=this.sheet,X=0,Y=0;for(let Q=0;Q<Z.length;Q++){let K=Z[Q],U=this.modules.indexOf(K);if(U<Y&&U>-1)this.modules.splice(U,1),Y--,U=-1;if(U==-1){if(this.modules.splice(Y++,0,K),J)for(let q=0;q<K.rules.length;q++)J.insertRule(K.rules[q],X++)}else{while(Y<U)X+=this.modules[Y++].rules.length;X+=K.rules.length,Y++}}if(J){if($.adoptedStyleSheets.indexOf(this.sheet)<0)$.adoptedStyleSheets=[this.sheet,...$.adoptedStyleSheets]}else{let Q="";for(let U=0;U<this.modules.length;U++)Q+=this.modules[U].getRules()+`
`;this.styleTag.textContent=Q;let K=$.head||$;if(this.styleTag.parentNode!=K)K.insertBefore(this.styleTag,K.firstChild)}}setNonce(Z){if(this.styleTag&&this.styleTag.getAttribute("nonce")!=Z)this.styleTag.setAttribute("nonce",Z)}}var u1={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},k2={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),iQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(_0=0;_0<10;_0++)u1[48+_0]=u1[96+_0]=String(_0);var _0;for(_0=1;_0<=24;_0++)u1[_0+111]="F"+_0;var _0;for(_0=65;_0<=90;_0++)u1[_0]=String.fromCharCode(_0+32),k2[_0]=String.fromCharCode(_0);var _0;for(z3 in u1)if(!k2.hasOwnProperty(z3))k2[z3]=u1[z3];var z3;function P5(Z){var $=nQ&&Z.metaKey&&Z.shiftKey&&!Z.ctrlKey&&!Z.altKey||iQ&&Z.shiftKey&&Z.key&&Z.key.length==1||Z.key=="Unidentified",J=!$&&Z.key||(Z.shiftKey?k2:u1)[Z.keyCode]||Z.key||"Unidentified";if(J=="Esc")J="Escape";if(J=="Del")J="Delete";if(J=="Left")J="ArrowLeft";if(J=="Up")J="ArrowUp";if(J=="Right")J="ArrowRight";if(J=="Down")J="ArrowDown";return J}function $0(){var Z=arguments[0];if(typeof Z=="string")Z=document.createElement(Z);var $=1,J=arguments[1];if(J&&typeof J=="object"&&J.nodeType==null&&!Array.isArray(J)){for(var X in J)if(Object.prototype.hasOwnProperty.call(J,X)){var Y=J[X];if(typeof Y=="string")Z.setAttribute(X,Y);else if(Y!=null)Z[X]=Y}$++}for(;$<arguments.length;$++)C5(Z,arguments[$]);return Z}function C5(Z,$){if(typeof $=="string")Z.appendChild(document.createTextNode($));else if($==null);else if($.nodeType!=null)Z.appendChild($);else if(Array.isArray($))for(var J=0;J<$.length;J++)C5(Z,$[J]);else throw RangeError("Unsupported child node: "+$)}var u0=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},P7=typeof document<"u"?document:{documentElement:{style:{}}},C7=/Edge\/(\d+)/.exec(u0.userAgent),OZ=/MSIE \d/.test(u0.userAgent),T7=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(u0.userAgent),p6=!!(OZ||T7||C7),T5=!p6&&/gecko\/(\d+)/i.test(u0.userAgent),R7=!p6&&/Chrome\/(\d+)/.exec(u0.userAgent),y5="webkitFontSmoothing"in P7.documentElement.style,y7=!p6&&/Apple Computer/.test(u0.vendor),b5=y7&&(/Mobile\/\w+/.test(u0.userAgent)||u0.maxTouchPoints>2),x={mac:b5||/Mac/.test(u0.platform),windows:/Win/.test(u0.platform),linux:/Linux|X11/.test(u0.platform),ie:p6,ie_version:OZ?P7.documentMode||6:T7?+T7[1]:C7?+C7[1]:0,gecko:T5,gecko_version:T5?+(/Firefox\/(\d+)/.exec(u0.userAgent)||[0,0])[1]:0,chrome:!!R7,chrome_version:R7?+R7[1]:0,ios:b5,android:/Android\b/.test(u0.userAgent),webkit:y5,webkit_version:y5?+(/\bAppleWebKit\/(\d+)/.exec(u0.userAgent)||[0,0])[1]:0,safari:y7,safari_version:y7?+(/\bVersion\/(\d+(\.\d+)?)/.exec(u0.userAgent)||[0,0])[1]:0,tabSize:P7.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function t7(Z,$){for(let J in Z)if(J=="class"&&$.class)$.class+=" "+Z.class;else if(J=="style"&&$.style)$.style+=";"+Z.style;else $[J]=Z[J];return $}var S6=Object.create(null);function e7(Z,$,J){if(Z==$)return!0;if(!Z)Z=S6;if(!$)$=S6;let X=Object.keys(Z),Y=Object.keys($);if(X.length-(J&&X.indexOf(J)>-1?1:0)!=Y.length-(J&&Y.indexOf(J)>-1?1:0))return!1;for(let Q of X)if(Q!=J&&(Y.indexOf(Q)==-1||Z[Q]!==$[Q]))return!1;return!0}function rQ(Z,$){for(let J=Z.attributes.length-1;J>=0;J--){let X=Z.attributes[J].name;if($[X]==null)Z.removeAttribute(X)}for(let J in $){let X=$[J];if(J=="style")Z.style.cssText=X;else if(Z.getAttribute(J)!=X)Z.setAttribute(J,X)}}function k5(Z,$,J){let X=!1;if($){for(let Y in $)if(!(J&&(Y in J)))if(X=!0,Y=="style")Z.style.cssText="";else Z.removeAttribute(Y)}if(J){for(let Y in J)if(!($&&$[Y]==J[Y]))if(X=!0,Y=="style")Z.style.cssText=J[Y];else Z.setAttribute(Y,J[Y])}return X}function aQ(Z){let $=Object.create(null);for(let J=0;J<Z.attributes.length;J++){let X=Z.attributes[J];$[X.name]=X.value}return $}class o0{eq(Z){return!1}updateDOM(Z,$){return!1}compare(Z){return this==Z||this.constructor==Z.constructor&&this.eq(Z)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(Z){return!0}coordsAt(Z,$,J){return null}get isHidden(){return!1}get editable(){return!1}destroy(Z){}}var S0=function(Z){return Z[Z.Text=0]="Text",Z[Z.WidgetBefore=1]="WidgetBefore",Z[Z.WidgetAfter=2]="WidgetAfter",Z[Z.WidgetRange=3]="WidgetRange",Z}(S0||(S0={}));class m extends H1{constructor(Z,$,J,X){super();this.startSide=Z,this.endSide=$,this.widget=J,this.spec=X}get heightRelevant(){return!1}static mark(Z){return new P3(Z)}static widget(Z){let $=Math.max(-1e4,Math.min(1e4,Z.side||0)),J=!!Z.block;return $+=J&&!Z.inlineOrder?$>0?300000000:-400000000:$>0?1e8:-1e8,new z2(Z,$,$,J,Z.widget||null,!1)}static replace(Z){let $=!!Z.block,J,X;if(Z.isBlockGap)J=-500000000,X=400000000;else{let{start:Y,end:Q}=VZ(Z,$);J=(Y?$?-300000000:-1:500000000)-1,X=(Q?$?200000000:1:-600000000)+1}return new z2(Z,J,X,$,Z.widget||null,!0)}static line(Z){return new C3(Z)}static set(Z,$=!1){return i.of(Z,$)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}m.none=i.empty;class P3 extends m{constructor(Z){let{start:$,end:J}=VZ(Z);super($?-1:500000000,J?1:-600000000,null,Z);this.tagName=Z.tagName||"span",this.attrs=Z.class&&Z.attributes?t7(Z.attributes,{class:Z.class}):Z.class?{class:Z.class}:Z.attributes||S6}eq(Z){return this==Z||Z instanceof P3&&this.tagName==Z.tagName&&e7(this.attrs,Z.attrs)}range(Z,$=Z){if(Z>=$)throw RangeError("Mark decorations may not be empty");return super.range(Z,$)}}P3.prototype.point=!1;class C3 extends m{constructor(Z){super(-200000000,-200000000,null,Z)}eq(Z){return Z instanceof C3&&this.spec.class==Z.spec.class&&e7(this.spec.attributes,Z.spec.attributes)}range(Z,$=Z){if($!=Z)throw RangeError("Line decoration ranges must be zero-length");return super.range(Z,$)}}C3.prototype.mapMode=T0.TrackBefore;C3.prototype.point=!0;class z2 extends m{constructor(Z,$,J,X,Y,Q){super($,J,Y,Z);this.block=X,this.isReplace=Q,this.mapMode=!X?T0.TrackDel:$<=0?T0.TrackBefore:T0.TrackAfter}get type(){return this.startSide!=this.endSide?S0.WidgetRange:this.startSide<=0?S0.WidgetBefore:S0.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(Z){return Z instanceof z2&&oQ(this.widget,Z.widget)&&this.block==Z.block&&this.startSide==Z.startSide&&this.endSide==Z.endSide}range(Z,$=Z){if(this.isReplace&&(Z>$||Z==$&&this.startSide>0&&this.endSide<=0))throw RangeError("Invalid range for replacement decoration");if(!this.isReplace&&$!=Z)throw RangeError("Widget decorations can only have zero-length ranges");return super.range(Z,$)}}z2.prototype.point=!0;function VZ(Z,$=!1){let{inclusiveStart:J,inclusiveEnd:X}=Z;if(J==null)J=Z.inclusive;if(X==null)X=Z.inclusive;return{start:J!==null&&J!==void 0?J:$,end:X!==null&&X!==void 0?X:$}}function oQ(Z,$){return Z==$||!!(Z&&$&&Z.compare($))}function w2(Z,$,J,X=0){let Y=J.length-1;if(Y>=0&&J[Y]+X>=Z)J[Y]=Math.max(J[Y],$);else J.push(Z,$)}class A3 extends H1{constructor(Z,$){super();this.tagName=Z,this.attributes=$}eq(Z){return Z==this||Z instanceof A3&&this.tagName==Z.tagName&&e7(this.attributes,Z.attributes)}static create(Z){return new A3(Z.tagName,Z.attributes||S6)}static set(Z,$=!1){return i.of(Z,$)}}A3.prototype.startSide=A3.prototype.endSide=-1;function u2(Z){let $;if(Z.nodeType==11)$=Z.getSelection?Z:Z.ownerDocument;else $=Z;return $.getSelection()}function b7(Z,$){return $?Z==$||Z.contains($.nodeType!=1?$.parentNode:$):!1}function F3(Z,$){if(!$.anchorNode)return!1;try{return b7(Z,$.anchorNode)}catch(J){return!1}}function L6(Z){if(Z.nodeType==3)return L3(Z,0,Z.nodeValue.length).getClientRects();else if(Z.nodeType==1)return Z.getClientRects();else return[]}function I3(Z,$,J,X){return J?S5(Z,$,J,X,-1)||S5(Z,$,J,X,1):!1}function n1(Z){for(var $=0;;$++)if(Z=Z.previousSibling,!Z)return $}function x6(Z){return Z.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(Z.nodeName)}function S5(Z,$,J,X,Y){for(;;){if(Z==J&&$==X)return!0;if($==(Y<0?0:g1(Z))){if(Z.nodeName=="DIV")return!1;let Q=Z.parentNode;if(!Q||Q.nodeType!=1)return!1;$=n1(Z)+(Y<0?0:1),Z=Q}else if(Z.nodeType==1){if(Z=Z.childNodes[$+(Y<0?-1:0)],Z.nodeType==1&&Z.contentEditable=="false")return!1;$=Y<0?g1(Z):0}else return!1}}function g1(Z){return Z.nodeType==3?Z.nodeValue.length:Z.childNodes.length}function w6(Z,$){let J=$?Z.left:Z.right;return{left:J,right:J,top:Z.top,bottom:Z.bottom}}function tQ(Z){let $=Z.visualViewport;if($)return{left:0,right:$.width,top:0,bottom:$.height};return{left:0,right:Z.innerWidth,top:0,bottom:Z.innerHeight}}function HZ(Z,$){let J=$.width/Z.offsetWidth,X=$.height/Z.offsetHeight;if(J>0.995&&J<1.005||!isFinite(J)||Math.abs($.width-Z.offsetWidth)<1)J=1;if(X>0.995&&X<1.005||!isFinite(X)||Math.abs($.height-Z.offsetHeight)<1)X=1;return{scaleX:J,scaleY:X}}function eQ(Z,$,J,X,Y,Q,K,U){let q=Z.ownerDocument,G=q.defaultView||window;for(let W=Z,j=!1;W&&!j;)if(W.nodeType==1){let z,_=W==q.body,V=1,O=1;if(_)z=tQ(G);else{if(/^(fixed|sticky)$/.test(getComputedStyle(W).position))j=!0;if(W.scrollHeight<=W.clientHeight&&W.scrollWidth<=W.clientWidth){W=W.assignedSlot||W.parentNode;continue}let D=W.getBoundingClientRect();({scaleX:V,scaleY:O}=HZ(W,D)),z={left:D.left,right:D.left+W.clientWidth*V,top:D.top,bottom:D.top+W.clientHeight*O}}let N=0,F=0;if(Y=="nearest"){if($.top<z.top){if(F=$.top-(z.top+K),J>0&&$.bottom>z.bottom+F)F=$.bottom-z.bottom+K}else if($.bottom>z.bottom){if(F=$.bottom-z.bottom+K,J<0&&$.top-F<z.top)F=$.top-(z.top+K)}}else{let D=$.bottom-$.top,A=z.bottom-z.top;F=(Y=="center"&&D<=A?$.top+D/2-A/2:Y=="start"||Y=="center"&&J<0?$.top-K:$.bottom-A+K)-z.top}if(X=="nearest"){if($.left<z.left){if(N=$.left-(z.left+Q),J>0&&$.right>z.right+N)N=$.right-z.right+Q}else if($.right>z.right){if(N=$.right-z.right+Q,J<0&&$.left<z.left+N)N=$.left-(z.left+Q)}}else N=(X=="center"?$.left+($.right-$.left)/2-(z.right-z.left)/2:X=="start"==U?$.left-Q:$.right-(z.right-z.left)+Q)-z.left;if(N||F)if(_)G.scrollBy(N,F);else{let D=0,A=0;if(F){let L=W.scrollTop;W.scrollTop+=F/O,A=(W.scrollTop-L)*O}if(N){let L=W.scrollLeft;W.scrollLeft+=N/V,D=(W.scrollLeft-L)*V}if($={left:$.left-D,top:$.top-A,right:$.right-D,bottom:$.bottom-A},D&&Math.abs(D-N)<1)X="nearest";if(A&&Math.abs(A-F)<1)Y="nearest"}if(_)break;if($.top<z.top||$.bottom>z.bottom||$.left<z.left||$.right>z.right)$={left:Math.max($.left,z.left),right:Math.min($.right,z.right),top:Math.max($.top,z.top),bottom:Math.min($.bottom,z.bottom)};W=W.assignedSlot||W.parentNode}else if(W.nodeType==11)W=W.host;else break}function ZK(Z){let $=Z.ownerDocument,J,X;for(let Y=Z.parentNode;Y;)if(Y==$.body||J&&X)break;else if(Y.nodeType==1){if(!X&&Y.scrollHeight>Y.clientHeight)X=Y;if(!J&&Y.scrollWidth>Y.clientWidth)J=Y;Y=Y.assignedSlot||Y.parentNode}else if(Y.nodeType==11)Y=Y.host;else break;return{x:J,y:X}}class NZ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(Z){return this.anchorNode==Z.anchorNode&&this.anchorOffset==Z.anchorOffset&&this.focusNode==Z.focusNode&&this.focusOffset==Z.focusOffset}setRange(Z){let{anchorNode:$,focusNode:J}=Z;this.set($,Math.min(Z.anchorOffset,$?g1($):0),J,Math.min(Z.focusOffset,J?g1(J):0))}set(Z,$,J,X){this.anchorNode=Z,this.anchorOffset=$,this.focusNode=J,this.focusOffset=X}}var W2=null;if(x.safari&&x.safari_version>=26)W2=!1;function RZ(Z){if(Z.setActive)return Z.setActive();if(W2)return Z.focus(W2);let $=[];for(let J=Z;J;J=J.parentNode)if($.push(J,J.scrollTop,J.scrollLeft),J==J.ownerDocument)break;if(Z.focus(W2==null?{get preventScroll(){return W2={preventScroll:!0},!0}}:void 0),!W2){W2=!1;for(let J=0;J<$.length;){let X=$[J++],Y=$[J++],Q=$[J++];if(X.scrollTop!=Y)X.scrollTop=Y;if(X.scrollLeft!=Q)X.scrollLeft=Q}}}var x5;function L3(Z,$,J=$){let X=x5||(x5=document.createRange());return X.setEnd(Z,J),X.setStart(Z,$),X}function h2(Z,$,J,X){let Y={key:$,code:$,keyCode:J,which:J,cancelable:!0};if(X)({altKey:Y.altKey,ctrlKey:Y.ctrlKey,shiftKey:Y.shiftKey,metaKey:Y.metaKey}=X);let Q=new KeyboardEvent("keydown",Y);Q.synthetic=!0,Z.dispatchEvent(Q);let K=new KeyboardEvent("keyup",Y);return K.synthetic=!0,Z.dispatchEvent(K),Q.defaultPrevented||K.defaultPrevented}function $K(Z){while(Z){if(Z&&(Z.nodeType==9||Z.nodeType==11&&Z.host))return Z;Z=Z.assignedSlot||Z.parentNode}return null}function JK(Z,$){let{focusNode:J,focusOffset:X}=$;if(!J||$.anchorNode!=J||$.anchorOffset!=X)return!1;X=Math.min(X,g1(J));for(;;)if(X){if(J.nodeType!=1)return!1;let Y=J.childNodes[X-1];if(Y.contentEditable=="false")X--;else J=Y,X=g1(J)}else if(J==Z)return!0;else X=n1(J),J=J.parentNode}function FZ(Z){return Z.scrollTop>Math.max(1,Z.scrollHeight-Z.clientHeight-4)}function IZ(Z,$){for(let J=Z,X=$;;)if(J.nodeType==3&&X>0)return{node:J,offset:X};else if(J.nodeType==1&&X>0){if(J.contentEditable=="false")return null;J=J.childNodes[X-1],X=g1(J)}else if(J.parentNode&&!x6(J))X=n1(J),J=J.parentNode;else return null}function DZ(Z,$){for(let J=Z,X=$;;)if(J.nodeType==3&&X<J.nodeValue.length)return{node:J,offset:X};else if(J.nodeType==1&&X<J.childNodes.length){if(J.contentEditable=="false")return null;J=J.childNodes[X],X=0}else if(J.parentNode&&!x6(J))X=n1(J)+1,J=J.parentNode;else return null}class D1{constructor(Z,$,J=!0){this.node=Z,this.offset=$,this.precise=J}static before(Z,$){return new D1(Z.parentNode,n1(Z),$)}static after(Z,$){return new D1(Z.parentNode,n1(Z)+1,$)}}var Y0=function(Z){return Z[Z.LTR=0]="LTR",Z[Z.RTL=1]="RTL",Z}(Y0||(Y0={})),_2=Y0.LTR,Z8=Y0.RTL;function MZ(Z){let $=[];for(let J=0;J<Z.length;J++)$.push(1<<+Z[J]);return $}var XK=MZ("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),YK=MZ("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),k7=Object.create(null),y1=[];for(let Z of["()","[]","{}"]){let $=Z.charCodeAt(0),J=Z.charCodeAt(1);k7[$]=J,k7[J]=-$}function AZ(Z){return Z<=247?XK[Z]:1424<=Z&&Z<=1524?2:1536<=Z&&Z<=1785?YK[Z-1536]:1774<=Z&&Z<=2220?4:8192<=Z&&Z<=8204?256:64336<=Z&&Z<=65023?4:1}var QK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class b1{get dir(){return this.level%2?Z8:_2}constructor(Z,$,J){this.from=Z,this.to=$,this.level=J}side(Z,$){return this.dir==$==Z?this.to:this.from}forward(Z,$){return Z==(this.dir==$)}static find(Z,$,J,X){let Y=-1;for(let Q=0;Q<Z.length;Q++){let K=Z[Q];if(K.from<=$&&K.to>=$){if(K.level==J)return Q;if(Y<0||(X!=0?X<0?K.from<$:K.to>$:Z[Y].level>K.level))Y=Q}}if(Y<0)throw RangeError("Index out of range");return Y}}function LZ(Z,$){if(Z.length!=$.length)return!1;for(let J=0;J<Z.length;J++){let X=Z[J],Y=$[J];if(X.from!=Y.from||X.to!=Y.to||X.direction!=Y.direction||!LZ(X.inner,Y.inner))return!1}return!0}var K0=[];function KK(Z,$,J,X,Y){for(let Q=0;Q<=X.length;Q++){let K=Q?X[Q-1].to:$,U=Q<X.length?X[Q].from:J,q=Q?256:Y;for(let G=K,W=q,j=q;G<U;G++){let z=AZ(Z.charCodeAt(G));if(z==512)z=W;else if(z==8&&j==4)z=16;if(K0[G]=z==4?2:z,z&7)j=z;W=z}for(let G=K,W=q,j=q;G<U;G++){let z=K0[G];if(z==128)if(G<U-1&&W==K0[G+1]&&W&24)z=K0[G]=W;else K0[G]=256;else if(z==64){let _=G+1;while(_<U&&K0[_]==64)_++;let V=G&&W==8||_<J&&K0[_]==8?j==1?1:8:256;for(let O=G;O<_;O++)K0[O]=V;G=_-1}else if(z==8&&j==1)K0[G]=1;if(W=z,z&7)j=z}}}function UK(Z,$,J,X,Y){let Q=Y==1?2:1;for(let K=0,U=0,q=0;K<=X.length;K++){let G=K?X[K-1].to:$,W=K<X.length?X[K].from:J;for(let j=G,z,_,V;j<W;j++)if(_=k7[z=Z.charCodeAt(j)])if(_<0){for(let O=U-3;O>=0;O-=3)if(y1[O+1]==-_){let N=y1[O+2],F=N&2?Y:!(N&4)?0:N&1?Q:Y;if(F)K0[j]=K0[y1[O]]=F;U=O;break}}else if(y1.length==189)break;else y1[U++]=j,y1[U++]=z,y1[U++]=q;else if((V=K0[j])==2||V==1){let O=V==Y;q=O?0:1;for(let N=U-3;N>=0;N-=3){let F=y1[N+2];if(F&2)break;if(O)y1[N+2]|=2;else{if(F&4)break;y1[N+2]|=4}}}}}function qK(Z,$,J,X){for(let Y=0,Q=X;Y<=J.length;Y++){let K=Y?J[Y-1].to:Z,U=Y<J.length?J[Y].from:$;for(let q=K;q<U;){let G=K0[q];if(G==256){let W=q+1;for(;;)if(W==U){if(Y==J.length)break;W=J[Y++].to,U=Y<J.length?J[Y].from:$}else if(K0[W]==256)W++;else break;let j=Q==1,z=(W<$?K0[W]:X)==1,_=j==z?j?1:2:X;for(let V=W,O=Y,N=O?J[O-1].to:Z;V>q;){if(V==N)V=J[--O].from,N=O?J[O-1].to:Z;K0[--V]=_}q=W}else Q=G,q++}}}function S7(Z,$,J,X,Y,Q,K){let U=X%2?2:1;if(X%2==Y%2)for(let q=$,G=0;q<J;){let W=!0,j=!1;if(G==Q.length||q<Q[G].from){let O=K0[q];if(O!=U)W=!1,j=O==16}let z=!W&&U==1?[]:null,_=W?X:X+1,V=q;Z:for(;;)if(G<Q.length&&V==Q[G].from){if(j)break Z;let O=Q[G];if(!W)for(let N=O.to,F=G+1;;){if(N==J)break Z;if(F<Q.length&&Q[F].from==N)N=Q[F++].to;else if(K0[N]==U)break Z;else break}if(G++,z)z.push(O);else{if(O.from>q)K.push(new b1(q,O.from,_));let N=O.direction==_2!=!(_%2);x7(Z,N?X+1:X,Y,O.inner,O.from,O.to,K),q=O.to}V=O.to}else if(V==J||(W?K0[V]!=U:K0[V]==U))break;else V++;if(z)S7(Z,q,V,X+1,Y,z,K);else if(q<V)K.push(new b1(q,V,_));q=V}else for(let q=J,G=Q.length;q>$;){let W=!0,j=!1;if(!G||q>Q[G-1].to){let O=K0[q-1];if(O!=U)W=!1,j=O==16}let z=!W&&U==1?[]:null,_=W?X:X+1,V=q;Z:for(;;)if(G&&V==Q[G-1].to){if(j)break Z;let O=Q[--G];if(!W)for(let N=O.from,F=G;;){if(N==$)break Z;if(F&&Q[F-1].to==N)N=Q[--F].from;else if(K0[N-1]==U)break Z;else break}if(z)z.push(O);else{if(O.to<q)K.push(new b1(O.to,q,_));let N=O.direction==_2!=!(_%2);x7(Z,N?X+1:X,Y,O.inner,O.from,O.to,K),q=O.from}V=O.from}else if(V==$||(W?K0[V-1]!=U:K0[V-1]==U))break;else V--;if(z)S7(Z,V,q,X+1,Y,z,K);else if(V<q)K.push(new b1(V,q,_));q=V}}function x7(Z,$,J,X,Y,Q,K){let U=$%2?2:1;KK(Z,Y,Q,X,U),UK(Z,Y,Q,X,U),qK(Y,Q,X,U),S7(Z,Y,Q,$,J,X,K)}function GK(Z,$,J){if(!Z)return[new b1(0,0,$==Z8?1:0)];if($==_2&&!J.length&&!QK.test(Z))return BZ(Z.length);if(J.length)while(Z.length>K0.length)K0[K0.length]=256;let X=[],Y=$==_2?0:1;return x7(Z,Y,Y,J,0,Z.length,X),X}function BZ(Z){return[new b1(0,Z,0)]}var EZ="";function WK(Z,$,J,X,Y){var Q;let K=X.head-Z.from,U=b1.find($,K,(Q=X.bidiLevel)!==null&&Q!==void 0?Q:-1,X.assoc),q=$[U],G=q.side(Y,J);if(K==G){let z=U+=Y?1:-1;if(z<0||z>=$.length)return null;q=$[U=z],K=q.side(!Y,J),G=q.side(Y,J)}let W=N0(Z.text,K,q.forward(Y,J));if(W<q.from||W>q.to)W=G;EZ=Z.text.slice(Math.min(K,W),Math.max(K,W));let j=U==(Y?$.length-1:0)?null:$[U+(Y?1:-1)];if(j&&W==G&&j.level+(Y?0:1)<q.level)return M.cursor(j.side(!Y,J)+Z.from,j.forward(Y,J)?1:-1,j.level);return M.cursor(W+Z.from,q.forward(Y,J)?-1:1,q.level)}function jK(Z,$,J){for(let X=$;X<J;X++){let Y=AZ(Z.charCodeAt(X));if(Y==1)return _2;if(Y==2||Y==4)return Z8}return _2}var PZ=k.define(),CZ=k.define(),TZ=k.define(),yZ=k.define(),w7=k.define(),bZ=k.define(),kZ=k.define(),$8=k.define(),J8=k.define(),SZ=k.define({combine:(Z)=>Z.some(($)=>$)}),xZ=k.define({combine:(Z)=>Z.some(($)=>$)}),wZ=k.define();class v2{constructor(Z,$="nearest",J="nearest",X=5,Y=5,Q=!1){this.range=Z,this.y=$,this.x=J,this.yMargin=X,this.xMargin=Y,this.isSnapshot=Q}map(Z){return Z.empty?this:new v2(this.range.map(Z),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(Z){return this.range.to<=Z.doc.length?this:new v2(M.cursor(Z.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}var V6=p.define({map:(Z,$)=>Z.map($)}),hZ=p.define();function k0(Z,$,J){let X=Z.facet(yZ);if(X.length)X[0]($);else if(window.onerror&&window.onerror(String($),J,void 0,void 0,$));else if(J)console.error(J+":",$);else console.error($)}var m1=k.define({combine:(Z)=>Z.length?Z[0]:!0}),zK=0,S2=k.define({combine(Z){return Z.filter(($,J)=>{for(let X=0;X<J;X++)if(Z[X].plugin==$.plugin)return!1;return!0})}});class j0{constructor(Z,$,J,X,Y){this.id=Z,this.create=$,this.domEventHandlers=J,this.domEventObservers=X,this.baseExtensions=Y(this),this.extension=this.baseExtensions.concat(S2.of({plugin:this,arg:void 0}))}of(Z){return this.baseExtensions.concat(S2.of({plugin:this,arg:Z}))}static define(Z,$){let{eventHandlers:J,eventObservers:X,provide:Y,decorations:Q}=$||{};return new j0(zK++,Z,J,X,(K)=>{let U=[];if(Q)U.push(l6.of((q)=>{let G=q.plugin(K);return G?Q(G):m.none}));if(Y)U.push(Y(K));return U})}static fromClass(Z,$){return j0.define((J,X)=>new Z(J,X),$)}}class B6{constructor(Z){this.spec=Z,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(Z){if(!this.value){if(this.spec)try{this.value=this.spec.plugin.create(Z,this.spec.arg)}catch($){k0(Z.state,$,"CodeMirror plugin crashed"),this.deactivate()}}else if(this.mustUpdate){let $=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update($)}catch(J){if(k0($.state,J,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(X){}this.deactivate()}}return this}destroy(Z){var $;if(($=this.value)===null||$===void 0?void 0:$.destroy)try{this.value.destroy()}catch(J){k0(Z.state,J,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}var vZ=k.define(),X8=k.define(),l6=k.define(),uZ=k.define(),Y8=k.define(),T3=k.define(),mZ=k.define();function w5(Z,$){let J=Z.state.facet(mZ);if(!J.length)return J;let X=J.map((Q)=>Q instanceof Function?Q(Z):Q),Y=[];return i.spans(X,$.from,$.to,{point(){},span(Q,K,U,q){let G=Q-$.from,W=K-$.from,j=Y;for(let z=U.length-1;z>=0;z--,q--){let _=U[z].spec.bidiIsolate,V;if(_==null)_=jK($.text,G,W);if(q>0&&j.length&&(V=j[j.length-1]).to==G&&V.direction==_)V.to=W,j=V.inner;else{let O={from:G,to:W,direction:_,inner:[]};j.push(O),j=O.inner}}}}),Y}var gZ=k.define();function Q8(Z){let $=0,J=0,X=0,Y=0;for(let Q of Z.state.facet(gZ)){let K=Q(Z);if(K){if(K.left!=null)$=Math.max($,K.left);if(K.right!=null)J=Math.max(J,K.right);if(K.top!=null)X=Math.max(X,K.top);if(K.bottom!=null)Y=Math.max(Y,K.bottom)}}return{left:$,right:J,top:X,bottom:Y}}var _3=k.define();class X1{constructor(Z,$,J,X){this.fromA=Z,this.toA=$,this.fromB=J,this.toB=X}join(Z){return new X1(Math.min(this.fromA,Z.fromA),Math.max(this.toA,Z.toA),Math.min(this.fromB,Z.fromB),Math.max(this.toB,Z.toB))}addToSet(Z){let $=Z.length,J=this;for(;$>0;$--){let X=Z[$-1];if(X.fromA>J.toA)continue;if(X.toA<J.fromA)break;J=J.join(X),Z.splice($-1,1)}return Z.splice($,0,J),Z}static extendWithRanges(Z,$){if($.length==0)return Z;let J=[];for(let X=0,Y=0,Q=0;;){let K=X<Z.length?Z[X].fromB:1e9,U=Y<$.length?$[Y]:1e9,q=Math.min(K,U);if(q==1e9)break;let G=q+Q,W=q,j=G;for(;;)if(Y<$.length&&$[Y]<=W){let z=$[Y+1];Y+=2,W=Math.max(W,z);for(let _=X;_<Z.length&&Z[_].fromB<=W;_++)Q=Z[_].toA-Z[_].toB;j=Math.max(j,z+Q)}else if(X<Z.length&&Z[X].fromB<=W){let z=Z[X++];W=Math.max(W,z.toB),j=Math.max(j,z.toA),Q=z.toA-z.toB}else break;J.push(new X1(G,j,q,W))}return J}}class h6{constructor(Z,$,J){this.view=Z,this.state=$,this.transactions=J,this.flags=0,this.startState=Z.state,this.changes=D0.empty(this.startState.doc.length);for(let Y of J)this.changes=this.changes.compose(Y.changes);let X=[];this.changes.iterChangedRanges((Y,Q,K,U)=>X.push(new X1(Y,Q,K,U))),this.changedRanges=X}static create(Z,$,J){return new h6(Z,$,J)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((Z)=>Z.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var _K=[];class M0{constructor(Z,$,J=0){this.dom=Z,this.length=$,this.flags=J,this.parent=null,Z.cmTile=this}get breakAfter(){return this.flags&1}get children(){return _K}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(Z){if(this.flags|=2,this.flags&4){this.flags&=-5;let $=this.domAttrs;if($)rQ(this.dom,$)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(Z){this.dom=Z,Z.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(Z,$=this.posAtStart){let J=$;for(let X of this.children){if(X==Z)return J;J+=X.length+X.breakAfter}throw RangeError("Invalid child in posBefore")}posAfter(Z){return this.posBefore(Z)+Z.length}covers(Z){return!0}coordsIn(Z,$){return null}domPosFor(Z,$){let J=n1(this.dom),X=this.length?Z>0:$>0;return new D1(this.parent.dom,J+(X?1:0),Z==0||Z==this.length)}markDirty(Z){if(this.flags&=-3,Z)this.flags|=4;if(this.parent&&this.parent.flags&2)this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let Z=this;Z;Z=Z.parent)if(Z instanceof b3)return Z;return null}static get(Z){return Z.cmTile}}class y3 extends M0{constructor(Z){super(Z,0);this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(Z){this.children.push(Z),Z.parent=this}sync(Z){if(this.flags&2)return;super.sync(Z);let $=this.dom,J=null,X,Y=(Z===null||Z===void 0?void 0:Z.node)==$?Z:null,Q=0;for(let K of this.children){if(K.sync(Z),Q+=K.length+K.breakAfter,X=J?J.nextSibling:$.firstChild,Y&&X!=K.dom)Y.written=!0;if(K.dom.parentNode==$)while(X&&X!=K.dom)X=h5(X);else $.insertBefore(K.dom,X);J=K.dom}if(X=J?J.nextSibling:$.firstChild,Y&&X)Y.written=!0;while(X)X=h5(X);this.length=Q}}function h5(Z){let $=Z.nextSibling;return Z.parentNode.removeChild(Z),$}class b3 extends y3{constructor(Z,$){super($);this.view=Z}owns(Z){for(;Z;Z=Z.parent)if(Z==this)return!0;return!1}isBlock(){return!0}nearest(Z){for(;;){if(!Z)return null;let $=M0.get(Z);if($&&this.owns($))return $;Z=Z.parentNode}}blockTiles(Z){for(let $=[],J=this,X=0,Y=0;;)if(X==J.children.length){if(!$.length)return;if(J=J.parent,J.breakAfter)Y++;X=$.pop()}else{let Q=J.children[X++];if(Q instanceof s1)$.push(X),J=Q,X=0;else{let K=Y+Q.length,U=Z(Q,Y);if(U!==void 0)return U;Y=K+Q.breakAfter}}}resolveBlock(Z,$){let J,X=-1,Y,Q=-1;if(this.blockTiles((K,U)=>{let q=U+K.length;if(Z>=U&&Z<=q){if(K.isWidget()&&$>=-1&&$<=1){if(K.flags&32)return!0;if(K.flags&16)J=void 0}if((U<Z||Z==q&&($<-1?K.length:K.covers(1)))&&(!J||!K.isWidget()&&J.isWidget()))J=K,X=Z-U;if((q>Z||Z==U&&($>1?K.length:K.covers(-1)))&&(!Y||!K.isWidget()&&Y.isWidget()))Y=K,Q=Z-U}}),!J&&!Y)throw Error("No tile at position "+Z);return J&&$<0||!Y?{tile:J,offset:X}:{tile:Y,offset:Q}}}class s1 extends y3{constructor(Z,$){super(Z);this.wrapper=$}isBlock(){return!0}covers(Z){if(!this.children.length)return!1;return Z<0?this.children[0].covers(-1):this.lastChild.covers(1)}get domAttrs(){return this.wrapper.attributes}static of(Z,$){let J=new s1($||document.createElement(Z.tagName),Z);if(!$)J.flags|=4;return J}}class m2 extends y3{constructor(Z,$){super(Z);this.attrs=$}isLine(){return!0}static start(Z,$,J){let X=new m2($||document.createElement("div"),Z);if(!$||!J)X.flags|=4;return X}get domAttrs(){return this.attrs}resolveInline(Z,$,J){let X=null,Y=-1,Q=null,K=-1;function U(G,W){for(let j=0,z=0;j<G.children.length&&z<=W;j++){let _=G.children[j],V=z+_.length;if(V>=W){if(_.isComposite())U(_,W-z);else if((!Q||Q.isHidden&&($>0||J&&VK(Q,_)))&&(V>W||_.flags&32))Q=_,K=W-z;else if(z<W||_.flags&16&&!_.isHidden)X=_,Y=W-z}z=V}}U(this,Z);let q=($<0?X:Q)||X||Q;return q?{tile:q,offset:q==X?Y:K}:null}coordsIn(Z,$){let J=this.resolveInline(Z,$,!0);if(!J)return OK(this);return J.tile.coordsIn(Math.max(0,J.offset),$)}domIn(Z,$){let J=this.resolveInline(Z,$);if(J){let{tile:X,offset:Y}=J;if(this.dom.contains(X.dom)){if(X.isText())return new D1(X.dom,Math.min(X.dom.nodeValue.length,Y));return X.domPosFor(Y,X.flags&16?1:X.flags&32?-1:$)}let Q=J.tile.parent,K=!1;for(let U of Q.children){if(K)return new D1(U.dom,0);if(U==J.tile)K=!0}}return new D1(this.dom,0)}}function OK(Z){let $=Z.dom.lastChild;if(!$)return Z.dom.getBoundingClientRect();let J=L6($);return J[J.length-1]||null}function VK(Z,$){let J=Z.coordsIn(0,1),X=$.coordsIn(0,1);return J&&X&&X.top<J.bottom}class l0 extends y3{constructor(Z,$){super(Z);this.mark=$}get domAttrs(){return this.mark.attrs}static of(Z,$){let J=new l0($||document.createElement(Z.tagName),Z);if(!$)J.flags|=4;return J}}class j2 extends M0{constructor(Z,$){super(Z,$.length);this.text=$}sync(Z){if(this.flags&2)return;if(super.sync(Z),this.dom.nodeValue!=this.text){if(Z&&Z.node==this.dom)Z.written=!0;this.dom.nodeValue=this.text}}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(Z,$){let J=this.dom.nodeValue.length;if(Z>J)Z=J;let X=Z,Y=Z,Q=0;if(Z==0&&$<0||Z==J&&$>=0){if(!(x.chrome||x.gecko)){if(Z)X--,Q=1;else if(Y<J)Y++,Q=-1}}else if($<0)X--;else if(Y<J)Y++;let K=L3(this.dom,X,Y).getClientRects();if(!K.length)return null;let U=K[(Q?Q<0:$>=0)?0:K.length-1];if(x.safari&&!Q&&U.width==0)U=Array.prototype.find.call(K,(q)=>q.width)||U;return Q?w6(U,Q<0):U||null}static of(Z,$){let J=new j2($||document.createTextNode(Z),Z);if(!$)J.flags|=2;return J}}class O2 extends M0{constructor(Z,$,J,X){super(Z,$,X);this.widget=J}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(Z){if(this.flags&48)return!1;return(this.flags&(Z<0?64:128))>0}coordsIn(Z,$){return this.coordsInWidget(Z,$,!1)}coordsInWidget(Z,$,J){let X=this.widget.coordsAt(this.dom,Z,$);if(X)return X;if(J)return w6(this.dom.getBoundingClientRect(),this.length?Z==0:$<=0);else{let Y=this.dom.getClientRects(),Q=null;if(!Y.length)return null;let K=this.flags&16?!0:this.flags&32?!1:Z>0;for(let U=K?Y.length-1:0;;U+=K?-1:1)if(Q=Y[U],Z>0?U==0:U==Y.length-1||Q.top<Q.bottom)break;return w6(Q,!K)}}get overrideDOMText(){if(!this.length)return e.empty;let{root:Z}=this;if(!Z)return e.empty;let $=this.posAtStart;return Z.view.state.doc.slice($,$+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(Z,$,J,X,Y){if(!Y){if(Y=Z.toDOM($),!Z.editable)Y.contentEditable="false"}return new O2(Y,J,Z,X)}}class B3 extends M0{constructor(Z){let $=document.createElement("img");$.className="cm-widgetBuffer",$.setAttribute("aria-hidden","true");super($,0,Z)}get isHidden(){return!0}get overrideDOMText(){return e.empty}coordsIn(Z){return this.dom.getBoundingClientRect()}}class fZ{constructor(Z){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=Z}advance(Z,$,J){let{tile:X,index:Y,beforeBreak:Q,parents:K}=this;while(Z||$>0)if(!X.isComposite())if(Y==X.length)Q=!!X.breakAfter,{tile:X,index:Y}=K.pop(),Y++;else if(!Z)break;else{let U=Math.min(Z,X.length-Y);if(J)J.skip(X,Y,Y+U);Z-=U,Y+=U}else if(Q){if(!Z)break;if(J)J.break();Z--,Q=!1}else if(Y==X.children.length){if(!Z&&!K.length)break;if(J)J.leave(X);Q=!!X.breakAfter,{tile:X,index:Y}=K.pop(),Y++}else{let U=X.children[Y],q=U.breakAfter;if(($>0?U.length<=Z:U.length<Z)&&(!J||J.skip(U,0,U.length)!==!1||!U.isComposite))Q=!!q,Y++,Z-=U.length;else if(K.push({tile:X,index:Y}),X=U,Y=0,J&&U.isComposite())J.enter(U)}return this.tile=X,this.index=Y,this.beforeBreak=Q,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class pZ{constructor(Z,$,J,X){this.from=Z,this.to=$,this.wrapper=J,this.rank=X}}class lZ{constructor(Z,$,J){this.cache=Z,this.root=$,this.blockWrappers=J,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(Z,$,J,X){var Y;this.flushBuffer();let Q=this.ensureMarks($,J),K=Q.lastChild;if(K&&K.isText()&&!(K.flags&8)){this.cache.reused.set(K,2);let U=Q.children[Q.children.length-1]=new j2(K.dom,K.text+Z);U.parent=Q}else Q.append(X||j2.of(Z,(Y=this.cache.find(j2))===null||Y===void 0?void 0:Y.dom));this.pos+=Z.length,this.afterWidget=null}addComposition(Z,$){let J=this.curLine;if(J.dom!=$.line.dom)J.setDOM(this.cache.reused.has($.line)?F7($.line.dom):$.line.dom),this.cache.reused.set($.line,2);let X=J;for(let K=$.marks.length-1;K>=0;K--){let U=$.marks[K],q=X.lastChild;if(q instanceof l0&&q.mark.eq(U.mark)){if(q.dom!=U.dom)q.setDOM(F7(U.dom));X=q}else{if(this.cache.reused.get(U)){let W=M0.get(U.dom);if(W)W.setDOM(F7(U.dom))}let G=l0.of(U.mark,U.dom);X.append(G),X=G}this.cache.reused.set(U,2)}let Y=M0.get(Z.text);if(Y)this.cache.reused.set(Y,2);let Q=new j2(Z.text,Z.text.nodeValue);Q.flags|=8,X.append(Q)}addInlineWidget(Z,$,J){let X=this.afterWidget&&Z.flags&48&&(this.afterWidget.flags&48)==(Z.flags&48);if(!X)this.flushBuffer();let Y=this.ensureMarks($,J);if(!X&&!(Z.flags&16))Y.append(this.getBuffer(1));Y.append(Z),this.pos+=Z.length,this.afterWidget=Z}addMark(Z,$,J){this.flushBuffer(),this.ensureMarks($,J).append(Z),this.pos+=Z.length,this.afterWidget=null}addBlockWidget(Z){this.getBlockPos().append(Z),this.pos+=Z.length,this.lastBlock=Z,this.endLine()}continueWidget(Z){let $=this.afterWidget||this.lastBlock;$.length+=Z,this.pos+=Z}addLineStart(Z,$){var J;if(!Z)Z=nZ;let X=m2.start(Z,$||((J=this.cache.find(m2))===null||J===void 0?void 0:J.dom),!!$);this.getBlockPos().append(this.lastBlock=this.curLine=X)}addLine(Z){this.getBlockPos().append(Z),this.pos+=Z.length,this.lastBlock=Z,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(Z){if(!this.blockPosCovered())this.addLineStart(Z)}ensureLine(Z){if(!this.curLine)this.addLineStart(Z)}ensureMarks(Z,$){var J;let X=this.curLine;for(let Y=Z.length-1;Y>=0;Y--){let Q=Z[Y],K;if($>0&&(K=X.lastChild)&&K instanceof l0&&K.mark.eq(Q))X=K,$--;else{let U=l0.of(Q,(J=this.cache.find(l0,(q)=>q.mark.eq(Q)))===null||J===void 0?void 0:J.dom);X.append(U),X=U,$=0}}return X}endLine(){if(this.curLine){this.flushBuffer();let Z=this.curLine.lastChild;if(!Z||!v5(this.curLine,!1)||Z.dom.nodeName!="BR"&&Z.isWidget()&&!(x.ios&&v5(this.curLine,!0)))this.curLine.append(this.cache.findWidget(I7,0,32)||new O2(I7.toDOM(),0,I7,32));this.curLine=this.afterWidget=null}}updateBlockWrappers(){if(this.wrapperPos>this.pos+1e4)this.blockWrappers.goto(this.pos),this.wrappers.length=0;for(let Z=this.wrappers.length-1;Z>=0;Z--)if(this.wrappers[Z].to<this.pos)this.wrappers.splice(Z,1);for(let Z=this.blockWrappers;Z.value&&Z.from<=this.pos;Z.next())if(Z.to>=this.pos){let $=new pZ(Z.from,Z.to,Z.value,Z.rank),J=this.wrappers.length;while(J>0&&(this.wrappers[J-1].rank-$.rank||this.wrappers[J-1].to-$.to)<0)J--;this.wrappers.splice(J,0,$)}this.wrapperPos=this.pos}getBlockPos(){var Z;this.updateBlockWrappers();let $=this.root;for(let J of this.wrappers){let X=$.lastChild;if(J.from<this.pos&&X instanceof s1&&X.wrapper.eq(J.wrapper))$=X;else{let Y=s1.of(J.wrapper,(Z=this.cache.find(s1,(Q)=>Q.wrapper.eq(J.wrapper)))===null||Z===void 0?void 0:Z.dom);$.append(Y),$=Y}}return $}blockPosCovered(){let Z=this.lastBlock;return Z!=null&&!Z.breakAfter&&(!Z.isWidget()||(Z.flags&160)>0)}getBuffer(Z){let $=2|(Z<0?16:32),J=this.cache.find(B3,void 0,1);if(J)J.flags=$;return J||new B3($)}flushBuffer(){if(this.afterWidget&&!(this.afterWidget.flags&32))this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null}}class dZ{constructor(Z){this.skipCount=0,this.text="",this.textOff=0,this.cursor=Z.iter()}skip(Z){if(this.textOff+Z<=this.text.length)this.textOff+=Z;else this.skipCount+=Z-(this.text.length-this.textOff),this.text="",this.textOff=0}next(Z){if(this.textOff==this.text.length){let{value:X,lineBreak:Y,done:Q}=this.cursor.next(this.skipCount);if(this.skipCount=0,Q)throw Error("Ran out of text content when drawing inline views");this.text=X;let K=this.textOff=Math.min(Z,X.length);return Y?null:X.slice(0,K)}let $=Math.min(this.text.length,this.textOff+Z),J=this.text.slice(this.textOff,$);return this.textOff=$,J}}var v6=[O2,m2,j2,l0,B3,s1,b3];for(let Z=0;Z<v6.length;Z++)v6[Z].bucket=Z;class cZ{constructor(Z){this.view=Z,this.buckets=v6.map(()=>[]),this.index=v6.map(()=>0),this.reused=new Map}add(Z){let $=Z.constructor.bucket,J=this.buckets[$];if(J.length<6)J.push(Z);else J[this.index[$]=(this.index[$]+1)%6]=Z}find(Z,$,J=2){let X=Z.bucket,Y=this.buckets[X],Q=this.index[X];for(let K=Y.length-1;K>=0;K--){let U=(K+Q)%Y.length,q=Y[U];if((!$||$(q))&&!this.reused.has(q)){if(Y.splice(U,1),U<Q)this.index[X]--;return this.reused.set(q,J),q}}return null}findWidget(Z,$,J){let X=this.buckets[0];if(X.length)for(let Y=0,Q=0;;Y++){if(Y==X.length){if(Q)return null;Q=1,Y=0}let K=X[Y];if(!this.reused.has(K)&&(Q==0?K.widget.compare(Z):K.widget.constructor==Z.constructor&&Z.updateDOM(K.dom,this.view))){if(X.splice(Y,1),Y<this.index[0])this.index[0]--;if(K.widget==Z&&K.length==$&&(K.flags&497)==J)return this.reused.set(K,1),K;else return this.reused.set(K,2),new O2(K.dom,$,Z,K.flags&-498|J)}}}reuse(Z){return this.reused.set(Z,1),Z}maybeReuse(Z,$=2){if(this.reused.has(Z))return;return this.reused.set(Z,$),Z.dom}clear(){for(let Z=0;Z<this.buckets.length;Z++)this.buckets[Z].length=this.index[Z]=0}}class sZ{constructor(Z,$,J,X,Y){this.view=Z,this.decorations=X,this.disallowBlockEffectsFor=Y,this.openWidget=!1,this.openMarks=0,this.cache=new cZ(Z),this.text=new dZ(Z.state.doc),this.builder=new lZ(this.cache,new b3(Z,Z.contentDOM),i.iter(J)),this.cache.reused.set($,2),this.old=new fZ($),this.reuseWalker={skip:(Q,K,U)=>{if(this.cache.add(Q),Q.isComposite())return!1},enter:(Q)=>this.cache.add(Q),leave:()=>{},break:()=>{}}}run(Z,$){let J=$&&this.getCompositionContext($.text);for(let X=0,Y=0,Q=0;;){let K=Q<Z.length?Z[Q++]:null,U=K?K.fromA:this.old.root.length;if(U>X){let q=U-X;this.preserve(q,!Q,!K),X=U,Y+=q}if(!K)break;if($&&K.fromA<=$.range.fromA&&K.toA>=$.range.toA)this.forward(K.fromA,$.range.fromA,$.range.fromA<$.range.toA?1:-1),this.emit(Y,$.range.fromB),this.cache.clear(),this.builder.addComposition($,J),this.text.skip($.range.toB-$.range.fromB),this.forward($.range.fromA,K.toA),this.emit($.range.toB,K.toB);else this.forward(K.fromA,K.toA),this.emit(Y,K.toB);Y=K.toB,X=K.toA}if(this.builder.curLine)this.builder.endLine();return this.builder.root}preserve(Z,$,J){let X=RK(this.old),Y=this.openMarks;this.old.advance(Z,J?1:-1,{skip:(Q,K,U)=>{if(Q.isWidget())if(this.openWidget)this.builder.continueWidget(U-K);else{let q=U>0||K<Q.length?O2.of(Q.widget,this.view,U-K,Q.flags&496,this.cache.maybeReuse(Q)):this.cache.reuse(Q);if(q.flags&256)q.flags&=-2,this.builder.addBlockWidget(q);else this.builder.ensureLine(null),this.builder.addInlineWidget(q,X,Y),Y=X.length}else if(Q.isText()){if(this.builder.ensureLine(null),!K&&U==Q.length)this.builder.addText(Q.text,X,Y,this.cache.reuse(Q));else this.cache.add(Q),this.builder.addText(Q.text.slice(K,U),X,Y);Y=X.length}else if(Q.isLine())Q.flags&=-2,this.cache.reused.set(Q,1),this.builder.addLine(Q);else if(Q instanceof B3)this.cache.add(Q);else if(Q instanceof l0)this.builder.ensureLine(null),this.builder.addMark(Q,X,Y),this.cache.reused.set(Q,1),Y=X.length;else return!1;this.openWidget=!1},enter:(Q)=>{if(Q.isLine())this.builder.addLineStart(Q.attrs,this.cache.maybeReuse(Q));else if(this.cache.add(Q),Q instanceof l0)X.unshift(Q.mark);this.openWidget=!1},leave:(Q)=>{if(Q.isLine()){if(X.length)X.length=Y=0}else if(Q instanceof l0)X.shift(),Y=Math.min(Y,X.length)},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(Z)}emit(Z,$){let J=null,X=this.builder,Y=0,Q=i.spans(this.decorations,Z,$,{point:(K,U,q,G,W,j)=>{if(q instanceof z2){if(this.disallowBlockEffectsFor[j]){if(q.block)throw RangeError("Block decorations may not be specified via plugins");if(U>this.view.state.doc.lineAt(K).to)throw RangeError("Decorations that replace line breaks may not be specified via plugins")}if(Y=G.length,W>G.length)X.continueWidget(U-K);else{let z=q.widget||(q.block?V2.block:V2.inline),_=HK(q),V=this.cache.findWidget(z,U-K,_)||O2.of(z,this.view,U-K,_);if(q.block){if(q.startSide>0)X.addLineStartIfNotCovered(J);X.addBlockWidget(V)}else X.ensureLine(J),X.addInlineWidget(V,G,W)}J=null}else J=NK(J,q);if(U>K)this.text.skip(U-K)},span:(K,U,q,G)=>{for(let W=K;W<U;){let j=this.text.next(Math.min(512,U-W));if(j==null)X.addLineStartIfNotCovered(J),X.addBreak(),W++;else X.ensureLine(J),X.addText(j,q,G),W+=j.length;J=null}}});X.addLineStartIfNotCovered(J),this.openWidget=Q>Y,this.openMarks=Q}forward(Z,$,J=1){if($-Z<=10)this.old.advance($-Z,J,this.reuseWalker);else this.old.advance(5,-1,this.reuseWalker),this.old.advance($-Z-10,-1),this.old.advance(5,J,this.reuseWalker)}getCompositionContext(Z){let $=[],J=null;for(let X=Z.parentNode;;X=X.parentNode){let Y=M0.get(X);if(X==this.view.contentDOM)break;if(Y instanceof l0)$.push(Y);else if(Y===null||Y===void 0?void 0:Y.isLine())J=Y;else if(X.nodeName=="DIV"&&!J&&X!=this.view.contentDOM)J=new m2(X,nZ);else $.push(l0.of(new P3({tagName:X.nodeName.toLowerCase(),attributes:aQ(X)}),X))}return{line:J,marks:$}}}function v5(Z,$){let J=(X)=>{for(let Y of X.children)if(($?Y.isText():Y.length)||J(Y))return!0;return!1};return J(Z)}function HK(Z){let $=Z.isReplace?(Z.startSide<0?64:0)|(Z.endSide>0?128:0):Z.startSide>0?32:16;if(Z.block)$|=256;return $}var nZ={class:"cm-line"};function NK(Z,$){let J=$.spec.attributes,X=$.spec.class;if(!J&&!X)return Z;if(!Z)Z={class:"cm-line"};if(J)t7(J,Z);if(X)Z.class+=" "+X;return Z}function RK(Z){let $=[];for(let J=Z.parents.length;J>1;J--){let X=J==Z.parents.length?Z.tile:Z.parents[J].tile;if(X instanceof l0)$.push(X.mark)}return $}function F7(Z){let $=M0.get(Z);if($)$.setDOM(Z.cloneNode());return Z}class V2 extends o0{constructor(Z){super();this.tag=Z}eq(Z){return Z.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(Z){return Z.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}V2.inline=new V2("span");V2.block=new V2("div");var I7=new class extends o0{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class h7{constructor(Z){this.view=Z,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=m.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new b3(Z,Z.contentDOM),this.updateInner([new X1(0,0,0,Z.state.doc.length)],null)}update(Z){var $;let J=Z.changedRanges;if(this.minWidth>0&&J.length)if(!J.every(({fromA:G,toA:W})=>W<this.minWidthFrom||G>this.minWidthTo))this.minWidth=this.minWidthFrom=this.minWidthTo=0;else this.minWidthFrom=Z.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=Z.changes.mapPos(this.minWidthTo,1);this.updateEditContextFormatting(Z);let X=-1;if(this.view.inputState.composing>=0&&!this.view.observer.editContext){if(($=this.domChanged)===null||$===void 0?void 0:$.newSel)X=this.domChanged.newSel.head;else if(!EK(Z.changes,this.hasComposition)&&!Z.selectionSet)X=Z.state.selection.main.head}let Y=X>-1?IK(this.view,Z.changes,X):null;if(this.domChanged=null,this.hasComposition){let{from:G,to:W}=this.hasComposition;J=new X1(G,W,Z.changes.mapPos(G,-1),Z.changes.mapPos(W,1)).addToSet(J.slice())}if(this.hasComposition=Y?{from:Y.range.fromB,to:Y.range.toB}:null,(x.ie||x.chrome)&&!Y&&Z&&Z.state.doc.lines!=Z.startState.doc.lines)this.forceSelection=!0;let Q=this.decorations,K=this.blockWrappers;this.updateDeco();let U=AK(Q,this.decorations,Z.changes);if(U.length)J=X1.extendWithRanges(J,U);let q=LK(K,this.blockWrappers,Z.changes);if(q.length)J=X1.extendWithRanges(J,q);if(Y&&!J.some((G)=>G.fromA<=Y.range.fromA&&G.toA>=Y.range.toA))J=Y.range.addToSet(J.slice());if(this.tile.flags&2&&J.length==0)return!1;else{if(this.updateInner(J,Y),Z.transactions.length)this.lastUpdate=Date.now();return!0}}updateInner(Z,$){this.view.viewState.mustMeasureContent=!0;let{observer:J}=this.view;J.ignore(()=>{if($||Z.length){let Q=this.tile,K=new sZ(this.view,Q,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=K.run(Z,$),v7(Q,K.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let Y=x.chrome||x.ios?{node:J.selectionRange.focusNode,written:!1}:void 0;if(this.tile.sync(Y),Y&&(Y.written||J.selectionRange.focusNode!=Y.node||!this.tile.dom.contains(Y.node)))this.forceSelection=!0;this.tile.dom.style.height=""});let X=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length){for(let Y of this.tile.children)if(Y.isWidget()&&Y.widget instanceof E6)X.push(Y.dom)}J.updateGaps(X)}updateEditContextFormatting(Z){this.editContextFormatting=this.editContextFormatting.map(Z.changes);for(let $ of Z.transactions)for(let J of $.effects)if(J.is(hZ))this.editContextFormatting=J.value}updateSelection(Z=!1,$=!1){if(Z||!this.view.observer.selectionRange.focusNode)this.view.observer.readSelectionRange();let{dom:J}=this.tile,X=this.view.root.activeElement,Y=X==J,Q=!Y&&!(this.view.state.facet(m1)||J.tabIndex>-1)&&F3(J,this.view.observer.selectionRange)&&!(X&&J.contains(X));if(!(Y||$||Q))return;let K=this.forceSelection;this.forceSelection=!1;let U=this.view.state.selection.main,q,G;if(U.empty)G=q=this.inlineDOMNearPos(U.anchor,U.assoc||1);else G=this.inlineDOMNearPos(U.head,U.head==U.from?1:-1),q=this.inlineDOMNearPos(U.anchor,U.anchor==U.from?1:-1);if(x.gecko&&U.empty&&!this.hasComposition&&FK(q)){let j=document.createTextNode("");this.view.observer.ignore(()=>q.node.insertBefore(j,q.node.childNodes[q.offset]||null)),q=G=new D1(j,0),K=!0}let W=this.view.observer.selectionRange;if(K||!W.focusNode||(!I3(q.node,q.offset,W.anchorNode,W.anchorOffset)||!I3(G.node,G.offset,W.focusNode,W.focusOffset))&&!this.suppressWidgetCursorChange(W,U))this.view.observer.ignore(()=>{if(x.android&&x.chrome&&J.contains(W.focusNode)&&BK(W.focusNode,J))J.blur(),J.focus({preventScroll:!0});let j=u2(this.view.root);if(!j);else if(U.empty){if(x.gecko){let z=DK(q.node,q.offset);if(z&&z!=3){let _=(z==1?IZ:DZ)(q.node,q.offset);if(_)q=new D1(_.node,_.offset)}}if(j.collapse(q.node,q.offset),U.bidiLevel!=null&&j.caretBidiLevel!==void 0)j.caretBidiLevel=U.bidiLevel}else if(j.extend){j.collapse(q.node,q.offset);try{j.extend(G.node,G.offset)}catch(z){}}else{let z=document.createRange();if(U.anchor>U.head)[q,G]=[G,q];z.setEnd(G.node,G.offset),z.setStart(q.node,q.offset),j.removeAllRanges(),j.addRange(z)}if(Q&&this.view.root.activeElement==J){if(J.blur(),X)X.focus()}}),this.view.observer.setSelectionRange(q,G);this.impreciseAnchor=q.precise?null:new D1(W.anchorNode,W.anchorOffset),this.impreciseHead=G.precise?null:new D1(W.focusNode,W.focusOffset)}suppressWidgetCursorChange(Z,$){return this.hasComposition&&$.empty&&I3(Z.focusNode,Z.focusOffset,Z.anchorNode,Z.anchorOffset)&&this.posFromDOM(Z.focusNode,Z.focusOffset)==$.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:Z}=this,$=Z.state.selection.main,J=u2(Z.root),{anchorNode:X,anchorOffset:Y}=Z.observer.selectionRange;if(!J||!$.empty||!$.assoc||!J.modify)return;let Q=this.lineAt($.head,$.assoc);if(!Q)return;let K=Q.posAtStart;if($.head==K||$.head==K+Q.length)return;let U=this.coordsAt($.head,-1),q=this.coordsAt($.head,1);if(!U||!q||U.bottom>q.top)return;let G=this.domAtPos($.head+$.assoc,$.assoc);J.collapse(G.node,G.offset),J.modify("move",$.assoc<0?"forward":"backward","lineboundary"),Z.observer.readSelectionRange();let W=Z.observer.selectionRange;if(Z.docView.posFromDOM(W.anchorNode,W.anchorOffset)!=$.from)J.collapse(X,Y)}posFromDOM(Z,$){let J=this.tile.nearest(Z);if(!J)return this.tile.dom.compareDocumentPosition(Z)&2?0:this.view.state.doc.length;let X=J.posAtStart;if(J.isComposite()){let Y;if(Z==J.dom)Y=J.dom.childNodes[$];else{let Q=g1(Z)==0?0:$==0?-1:1;for(;;){let K=Z.parentNode;if(K==J.dom)break;if(Q==0&&K.firstChild!=K.lastChild)if(Z==K.firstChild)Q=-1;else Q=1;Z=K}if(Q<0)Y=Z;else Y=Z.nextSibling}if(Y==J.dom.firstChild)return X;while(Y&&!M0.get(Y))Y=Y.nextSibling;if(!Y)return X+J.length;for(let Q=0,K=X;;Q++){let U=J.children[Q];if(U.dom==Y)return K;K+=U.length+U.breakAfter}}else if(J.isText())return Z==J.dom?X+$:X+($?J.length:0);else return X}domAtPos(Z,$){let{tile:J,offset:X}=this.tile.resolveBlock(Z,$);if(J.isWidget())return J.domPosFor(Z,$);return J.domIn(X,$)}inlineDOMNearPos(Z,$){let J,X=-1,Y=!1,Q,K=-1,U=!1;if(this.tile.blockTiles((q,G)=>{if(q.isWidget()){if(q.flags&32&&G>=Z)return!0;if(q.flags&16)Y=!0}else{let W=G+q.length;if(G<=Z)J=q,X=Z-G,Y=W<Z;if(W>=Z&&!Q)Q=q,K=Z-G,U=G>Z;if(G>Z&&Q)return!0}}),!J&&!Q)return this.domAtPos(Z,$);if(Y&&Q)J=null;else if(U&&J)Q=null;return J&&$<0||!Q?J.domIn(X,$):Q.domIn(K,$)}coordsAt(Z,$){let{tile:J,offset:X}=this.tile.resolveBlock(Z,$);if(J.isWidget()){if(J.widget instanceof E6)return null;return J.coordsInWidget(X,$,!0)}return J.coordsIn(X,$)}lineAt(Z,$){let{tile:J}=this.tile.resolveBlock(Z,$);return J.isLine()?J:null}coordsForChar(Z){let{tile:$,offset:J}=this.tile.resolveBlock(Z,1);if(!$.isLine())return null;function X(Y,Q){if(Y.isComposite())for(let K of Y.children){if(K.length>=Q){let U=X(K,Q);if(U)return U}if(Q-=K.length,Q<0)break}else if(Y.isText()&&Q<Y.length){let K=N0(Y.text,Q);if(K==Q)return null;let U=L3(Y.dom,Q,K).getClientRects();for(let q=0;q<U.length;q++){let G=U[q];if(q==U.length-1||G.top<G.bottom&&G.left<G.right)return G}}return null}return X($,J)}measureVisibleLineHeights(Z){let $=[],{from:J,to:X}=Z,Y=this.view.contentDOM.clientWidth,Q=Y>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,K=-1,U=this.view.textDirection==Y0.LTR,q=0,G=(W,j,z)=>{for(let _=0;_<W.children.length;_++){if(j>X)break;let V=W.children[_],O=j+V.length,N=V.dom.getBoundingClientRect(),{height:F}=N;if(z&&!_)q+=N.top-z.top;if(V instanceof s1){if(O>J)G(V,j,N)}else if(j>=J){if(q>0)$.push(-q);if($.push(F+q),q=0,Q){let D=V.dom.lastChild,A=D?L6(D):[];if(A.length){let L=A[A.length-1],B=U?L.right-N.left:N.right-L.left;if(B>K)K=B,this.minWidth=Y,this.minWidthFrom=j,this.minWidthTo=O}}}if(z&&_==W.children.length-1)q+=z.bottom-N.bottom;j=O+V.breakAfter}};return G(this.tile,0,null),$}textDirectionAt(Z){let{tile:$}=this.tile.resolveBlock(Z,1);return getComputedStyle($.dom).direction=="rtl"?Y0.RTL:Y0.LTR}measureTextSize(){let Z=this.tile.blockTiles((Q)=>{if(Q.isLine()&&Q.children.length&&Q.length<=20){let K=0,U;for(let q of Q.children){if(!q.isText()||/[^ -~]/.test(q.text))return;let G=L6(q.dom);if(G.length!=1)return;K+=G[0].width,U=G[0].height}if(K)return{lineHeight:Q.dom.getBoundingClientRect().height,charWidth:K/Q.length,textHeight:U}}});if(Z)return Z;let $=document.createElement("div"),J,X,Y;return $.className="cm-line",$.style.width="99999px",$.style.position="absolute",$.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild($);let Q=L6($.firstChild)[0];J=$.getBoundingClientRect().height,X=Q&&Q.width?Q.width/27:7,Y=Q&&Q.height?Q.height:J,$.remove()}),{lineHeight:J,charWidth:X,textHeight:Y}}computeBlockGapDeco(){let Z=[],$=this.view.viewState;for(let J=0,X=0;;X++){let Y=X==$.viewports.length?null:$.viewports[X],Q=Y?Y.from-1:this.view.state.doc.length;if(Q>J){let K=($.lineBlockAt(Q).bottom-$.lineBlockAt(J).top)/this.view.scaleY;Z.push(m.replace({widget:new E6(K),block:!0,inclusive:!0,isBlockGap:!0}).range(J,Q))}if(!Y)break;J=Y.to+1}return m.set(Z)}updateDeco(){let Z=1,$=this.view.state.facet(l6).map((Y)=>{return(this.dynamicDecorationMap[Z++]=typeof Y=="function")?Y(this.view):Y}),J=!1,X=this.view.state.facet(Y8).map((Y,Q)=>{let K=typeof Y=="function";if(K)J=!0;return K?Y(this.view):Y});if(X.length)this.dynamicDecorationMap[Z++]=J,$.push(i.join(X));this.decorations=[this.editContextFormatting,...$,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];while(Z<this.decorations.length)this.dynamicDecorationMap[Z++]=!1;this.blockWrappers=this.view.state.facet(uZ).map((Y)=>typeof Y=="function"?Y(this.view):Y)}scrollIntoView(Z){if(Z.isSnapshot){let q=this.view.viewState.lineBlockAt(Z.range.head);this.view.scrollDOM.scrollTop=q.top-Z.yMargin,this.view.scrollDOM.scrollLeft=Z.xMargin;return}for(let q of this.view.state.facet(wZ))try{if(q(this.view,Z.range,Z))return!0}catch(G){k0(this.view.state,G,"scroll handler")}let{range:$}=Z,J=this.coordsAt($.head,$.empty?$.assoc:$.head>$.anchor?-1:1),X;if(!J)return;if(!$.empty&&(X=this.coordsAt($.anchor,$.anchor>$.head?-1:1)))J={left:Math.min(J.left,X.left),top:Math.min(J.top,X.top),right:Math.max(J.right,X.right),bottom:Math.max(J.bottom,X.bottom)};let Y=Q8(this.view),Q={left:J.left-Y.left,top:J.top-Y.top,right:J.right+Y.right,bottom:J.bottom+Y.bottom},{offsetWidth:K,offsetHeight:U}=this.view.scrollDOM;eQ(this.view.scrollDOM,Q,$.head<$.anchor?-1:1,Z.x,Z.y,Math.max(Math.min(Z.xMargin,K),-K),Math.max(Math.min(Z.yMargin,U),-U),this.view.textDirection==Y0.LTR)}lineHasWidget(Z){let $=(J)=>J.isWidget()||J.children.some($);return $(this.tile.resolveBlock(Z,1).tile)}destroy(){v7(this.tile)}}function v7(Z,$){let J=$===null||$===void 0?void 0:$.get(Z);if(J!=1){if(J==null)Z.destroy();for(let X of Z.children)v7(X,$)}}function FK(Z){return Z.node.nodeType==1&&Z.node.firstChild&&(Z.offset==0||Z.node.childNodes[Z.offset-1].contentEditable=="false")&&(Z.offset==Z.node.childNodes.length||Z.node.childNodes[Z.offset].contentEditable=="false")}function iZ(Z,$){let J=Z.observer.selectionRange;if(!J.focusNode)return null;let X=IZ(J.focusNode,J.focusOffset),Y=DZ(J.focusNode,J.focusOffset),Q=X||Y;if(Y&&X&&Y.node!=X.node){let U=M0.get(Y.node);if(!U||U.isText()&&U.text!=Y.node.nodeValue)Q=Y;else if(Z.docView.lastCompositionAfterCursor){let q=M0.get(X.node);if(!(!q||q.isText()&&q.text!=X.node.nodeValue))Q=Y}}if(Z.docView.lastCompositionAfterCursor=Q!=X,!Q)return null;let K=$-Q.offset;return{from:K,to:K+Q.node.nodeValue.length,node:Q.node}}function IK(Z,$,J){let X=iZ(Z,J);if(!X)return null;let{node:Y,from:Q,to:K}=X,U=Y.nodeValue;if(/[\n\r]/.test(U))return null;if(Z.state.doc.sliceString(X.from,X.to)!=U)return null;let q=$.invertedDesc;return{range:new X1(q.mapPos(Q),q.mapPos(K),Q,K),text:Y}}function DK(Z,$){if(Z.nodeType!=1)return 0;return($&&Z.childNodes[$-1].contentEditable=="false"?1:0)|($<Z.childNodes.length&&Z.childNodes[$].contentEditable=="false"?2:0)}var MK=class{constructor(){this.changes=[]}compareRange($,J){w2($,J,this.changes)}comparePoint($,J){w2($,J,this.changes)}boundChange($){w2($,$,this.changes)}};function AK(Z,$,J){let X=new MK;return i.compare(Z,$,J,X),X.changes}class rZ{constructor(){this.changes=[]}compareRange(Z,$){w2(Z,$,this.changes)}comparePoint(){}boundChange(Z){w2(Z,Z,this.changes)}}function LK(Z,$,J){let X=new rZ;return i.compare(Z,$,J,X),X.changes}function BK(Z,$){for(let J=Z;J&&J!=$;J=J.assignedSlot||J.parentNode)if(J.nodeType==1&&J.contentEditable=="false")return!0;return!1}function EK(Z,$){let J=!1;if($)Z.iterChangedRanges((X,Y)=>{if(X<$.to&&Y>$.from)J=!0});return J}class E6 extends o0{constructor(Z){super();this.height=Z}toDOM(){let Z=document.createElement("div");return Z.className="cm-gap",this.updateDOM(Z),Z}eq(Z){return Z.height==this.height}updateDOM(Z){return Z.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function PK(Z,$,J=1){let X=Z.charCategorizer($),Y=Z.doc.lineAt($),Q=$-Y.from;if(Y.length==0)return M.cursor($);if(Q==0)J=1;else if(Q==Y.length)J=-1;let K=Q,U=Q;if(J<0)K=N0(Y.text,Q,!1);else U=N0(Y.text,Q);let q=X(Y.text.slice(K,U));while(K>0){let G=N0(Y.text,K,!1);if(X(Y.text.slice(G,K))!=q)break;K=G}while(U<Y.length){let G=N0(Y.text,U);if(X(Y.text.slice(U,G))!=q)break;U=G}return M.range(K+Y.from,U+Y.from)}function CK(Z,$,J,X,Y){let Q=Math.round((X-$.left)*Z.defaultCharacterWidth);if(Z.lineWrapping&&J.height>Z.defaultLineHeight*1.5){let U=Z.viewState.heightOracle.textHeight,q=Math.floor((Y-J.top-(Z.defaultLineHeight-U)*0.5)/U);Q+=q*Z.viewState.heightOracle.lineLength}let K=Z.state.sliceDoc(J.from,J.to);return J.from+O6(K,Q,Z.state.tabSize)}function u7(Z,$,J){let X=Z.lineBlockAt($);if(Array.isArray(X.type)){let Y;for(let Q of X.type){if(Q.from>$)break;if(Q.to<$)continue;if(Q.from<$&&Q.to>$)return Q;if(!Y||Q.type==S0.Text&&(Y.type!=Q.type||(J<0?Q.from<$:Q.to>$)))Y=Q}return Y||X}return X}function TK(Z,$,J,X){let Y=u7(Z,$.head,$.assoc||-1),Q=!X||Y.type!=S0.Text||!(Z.lineWrapping||Y.widgetLineBreaks)?null:Z.coordsAtPos($.assoc<0&&$.head>Y.from?$.head-1:$.head);if(Q){let K=Z.dom.getBoundingClientRect(),U=Z.textDirectionAt(Y.from),q=Z.posAtCoords({x:J==(U==Y0.LTR)?K.right-1:K.left+1,y:(Q.top+Q.bottom)/2});if(q!=null)return M.cursor(q,J?-1:1)}return M.cursor(J?Y.to:Y.from,J?-1:1)}function u5(Z,$,J,X){let Y=Z.state.doc.lineAt($.head),Q=Z.bidiSpans(Y),K=Z.textDirectionAt(Y.from);for(let U=$,q=null;;){let G=WK(Y,Q,K,U,J),W=EZ;if(!G){if(Y.number==(J?Z.state.doc.lines:1))return U;W=`
`,Y=Z.state.doc.line(Y.number+(J?1:-1)),Q=Z.bidiSpans(Y),G=Z.visualLineSide(Y,!J)}if(!q){if(!X)return G;q=X(W)}else if(!q(W))return U;U=G}}function yK(Z,$,J){let X=Z.state.charCategorizer($),Y=X(J);return(Q)=>{let K=X(Q);if(Y==Q0.Space)Y=K;return Y==K}}function bK(Z,$,J,X){let Y=$.head,Q=J?1:-1;if(Y==(J?Z.state.doc.length:0))return M.cursor(Y,$.assoc);let K=$.goalColumn,U,q=Z.contentDOM.getBoundingClientRect(),G=Z.coordsAtPos(Y,$.assoc||-1),W=Z.documentTop;if(G){if(K==null)K=G.left-q.left;U=Q<0?G.top:G.bottom}else{let V=Z.viewState.lineBlockAt(Y);if(K==null)K=Math.min(q.right-q.left,Z.defaultCharacterWidth*(Y-V.from));U=(Q<0?V.top:V.bottom)+W}let j=q.left+K,z=X!==null&&X!==void 0?X:Z.viewState.heightOracle.textHeight>>1,_=m7(Z,{x:j,y:U+z*Q},!1,Q);return M.cursor(_.pos,_.assoc,void 0,K)}function D3(Z,$,J){for(;;){let X=0;for(let Y of Z)Y.between($-1,$+1,(Q,K,U)=>{if($>Q&&$<K){let q=X||J||($-Q<K-$?-1:1);$=q<0?Q:K,X=q}});if(!X)return $}}function aZ(Z,$){let J=null;for(let X=0;X<$.ranges.length;X++){let Y=$.ranges[X],Q=null;if(Y.empty){let K=D3(Z,Y.from,0);if(K!=Y.from)Q=M.cursor(K,-1)}else{let K=D3(Z,Y.from,-1),U=D3(Z,Y.to,1);if(K!=Y.from||U!=Y.to)Q=M.range(Y.from==Y.anchor?K:U,Y.from==Y.head?K:U)}if(Q){if(!J)J=$.ranges.slice();J[X]=Q}}return J?M.create(J,$.mainIndex):$}function D7(Z,$,J){let X=D3(Z.state.facet(T3).map((Y)=>Y(Z)),J.from,$.head>J.from?-1:1);return X==J.from?J:M.cursor(X,X<J.from?1:-1)}class F1{constructor(Z,$){this.pos=Z,this.assoc=$}}function m7(Z,$,J,X){let Y=Z.contentDOM.getBoundingClientRect(),Q=Y.top+Z.viewState.paddingTop,{x:K,y:U}=$,q=U-Q,G;for(;;){if(q<0)return new F1(0,1);if(q>Z.viewState.docHeight)return new F1(Z.state.doc.length,-1);if(G=Z.elementAtHeight(q),X==null)break;if(G.type==S0.Text){let z=Z.docView.coordsAt(X<0?G.from:G.to,X);if(z&&(X<0?z.top<=q+Q:z.bottom>=q+Q))break}let j=Z.viewState.heightOracle.textHeight/2;q=X>0?G.bottom+j:G.top-j}if(Z.viewport.from>=G.to||Z.viewport.to<=G.from){if(J)return null;if(G.type==S0.Text){let j=CK(Z,Y,G,K,U);return new F1(j,j==G.from?1:-1)}}if(G.type!=S0.Text)return q<(G.top+G.bottom)/2?new F1(G.from,1):new F1(G.to,-1);let W=Z.docView.lineAt(G.from,2);if(!W||W.length!=G.length)W=Z.docView.lineAt(G.from,-2);return oZ(Z,W,G.from,K,U)}function oZ(Z,$,J,X,Y){let Q=-1,K=null,U=1e9,q=1e9,G=Y,W=Y,j=(z,_)=>{for(let V=0;V<z.length;V++){let O=z[V];if(O.top==O.bottom)continue;let N=O.left>X?O.left-X:O.right<X?X-O.right:0,F=O.top>Y?O.top-Y:O.bottom<Y?Y-O.bottom:0;if(O.top<=W&&O.bottom>=G)G=Math.min(O.top,G),W=Math.max(O.bottom,W),F=0;if(Q<0||(F-q||N-U)<0)if(Q>=0&&q&&U<N&&K.top<=W-2&&K.bottom>=G+2)q=0;else Q=_,U=N,q=F,K=O}};if($.isText()){for(let _=0;_<$.length;){let V=N0($.text,_);if(j(L3($.dom,_,V).getClientRects(),_),!U&&!q)break;_=V}return X>(K.left+K.right)/2==(m5(Z,Q+J)==Y0.LTR)?new F1(J+N0($.text,Q),-1):new F1(J+Q,1)}else{if(!$.length)return new F1(J,1);for(let O=0;O<$.children.length;O++){let N=$.children[O];if(N.flags&48)continue;let F=(N.dom.nodeType==1?N.dom:L3(N.dom,0,N.length)).getClientRects();if(j(F,O),!U&&!q)break}let z=$.children[Q],_=$.posBefore(z,J);if(z.isComposite()||z.isText())return oZ(Z,z,_,Math.max(K.left,Math.min(K.right,X)),Y);return X>(K.left+K.right)/2==(m5(Z,Q+J)==Y0.LTR)?new F1(_+z.length,-1):new F1(_,1)}}function m5(Z,$){let J=Z.state.doc.lineAt($);return Z.bidiSpans(J)[b1.find(Z.bidiSpans(J),$-J.from,-1,1)].dir}var O3="ï¿¿";class tZ{constructor(Z,$){this.points=Z,this.view=$,this.text="",this.lineSeparator=$.state.facet(n.lineSeparator)}append(Z){this.text+=Z}lineBreak(){this.text+=O3}readRange(Z,$){if(!Z)return this;let J=Z.parentNode;for(let X=Z;;){this.findPointBefore(J,X);let Y=this.text.length;this.readNode(X);let Q=M0.get(X),K=X.nextSibling;if(K==$){if((Q===null||Q===void 0?void 0:Q.breakAfter)&&!K&&J!=this.view.contentDOM)this.lineBreak();break}let U=M0.get(K);if((Q&&U?Q.breakAfter:(Q?Q.breakAfter:x6(X))||x6(K)&&(X.nodeName!="BR"||(Q===null||Q===void 0?void 0:Q.isWidget()))&&this.text.length>Y)&&!SK(K,$))this.lineBreak();X=K}return this.findPointBefore(J,$),this}readTextNode(Z){let $=Z.nodeValue;for(let J of this.points)if(J.node==Z)J.pos=this.text.length+Math.min(J.offset,$.length);for(let J=0,X=this.lineSeparator?null:/\r\n?|\n/g;;){let Y=-1,Q=1,K;if(this.lineSeparator)Y=$.indexOf(this.lineSeparator,J),Q=this.lineSeparator.length;else if(K=X.exec($))Y=K.index,Q=K[0].length;if(this.append($.slice(J,Y<0?$.length:Y)),Y<0)break;if(this.lineBreak(),Q>1){for(let U of this.points)if(U.node==Z&&U.pos>this.text.length)U.pos-=Q-1}J=Y+Q}}readNode(Z){let $=M0.get(Z),J=$&&$.overrideDOMText;if(J!=null){this.findPointInside(Z,J.length);for(let X=J.iter();!X.next().done;)if(X.lineBreak)this.lineBreak();else this.append(X.value)}else if(Z.nodeType==3)this.readTextNode(Z);else if(Z.nodeName=="BR"){if(Z.nextSibling)this.lineBreak()}else if(Z.nodeType==1)this.readRange(Z.firstChild,null)}findPointBefore(Z,$){for(let J of this.points)if(J.node==Z&&Z.childNodes[J.offset]==$)J.pos=this.text.length}findPointInside(Z,$){for(let J of this.points)if(Z.nodeType==3?J.node==Z:Z.contains(J.node))J.pos=this.text.length+(kK(Z,J.node,J.offset)?$:0)}}function kK(Z,$,J){for(;;){if(!$||J<g1($))return!1;if($==Z)return!0;J=n1($)+1,$=$.parentNode}}function SK(Z,$){let J;for(;;Z=Z.nextSibling){if(Z==$||!Z)break;let X=M0.get(Z);if(!(X===null||X===void 0?void 0:X.isWidget()))return!1;if(X)(J||(J=[])).push(X)}if(J)for(let X of J){let Y=X.overrideDOMText;if(Y===null||Y===void 0?void 0:Y.length)return!1}return!0}class g7{constructor(Z,$){this.node=Z,this.offset=$,this.pos=-1}}class eZ{constructor(Z,$,J,X){this.typeOver=X,this.bounds=null,this.text="",this.domChanged=$>-1;let{impreciseHead:Y,impreciseAnchor:Q}=Z.docView;if(Z.state.readOnly&&$>-1)this.newSel=null;else if($>-1&&(this.bounds=Z$(Z.docView.tile,$,J,0))){let K=Y||Q?[]:wK(Z),U=new tZ(K,Z);U.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=U.text,this.newSel=hK(K,this.bounds.from)}else{let K=Z.observer.selectionRange,U=Y&&Y.node==K.focusNode&&Y.offset==K.focusOffset||!b7(Z.contentDOM,K.focusNode)?Z.state.selection.main.head:Z.docView.posFromDOM(K.focusNode,K.focusOffset),q=Q&&Q.node==K.anchorNode&&Q.offset==K.anchorOffset||!b7(Z.contentDOM,K.anchorNode)?Z.state.selection.main.anchor:Z.docView.posFromDOM(K.anchorNode,K.anchorOffset),G=Z.viewport;if((x.ios||x.chrome)&&Z.state.selection.main.empty&&U!=q&&(G.from>0||G.to<Z.state.doc.length)){let W=Math.min(U,q),j=Math.max(U,q),z=G.from-W,_=G.to-j;if((z==0||z==1||W==0)&&(_==0||_==-1||j==Z.state.doc.length))U=0,q=Z.state.doc.length}if(Z.inputState.composing>-1&&Z.state.selection.ranges.length>1)this.newSel=Z.state.selection.replaceRange(M.range(q,U));else this.newSel=M.single(q,U)}}}function Z$(Z,$,J,X){if(Z.isComposite()){let Y=-1,Q=-1,K=-1,U=-1;for(let q=0,G=X,W=X;q<Z.children.length;q++){let j=Z.children[q],z=G+j.length;if(G<$&&z>J)return Z$(j,$,J,G);if(z>=$&&Y==-1)Y=q,Q=G;if(G>J&&j.dom.parentNode==Z.dom){K=q,U=W;break}W=z,G=z+j.breakAfter}return{from:Q,to:U<0?X+Z.length:U,startDOM:(Y?Z.children[Y-1].dom.nextSibling:null)||Z.dom.firstChild,endDOM:K<Z.children.length&&K>=0?Z.children[K].dom:null}}else if(Z.isText())return{from:X,to:X+Z.length,startDOM:Z.dom,endDOM:Z.dom.nextSibling};else return null}function $$(Z,$){let J,{newSel:X}=$,Y=Z.state.selection.main,Q=Z.inputState.lastKeyTime>Date.now()-100?Z.inputState.lastKeyCode:-1;if($.bounds){let{from:K,to:U}=$.bounds,q=Y.from,G=null;if(Q===8||x.android&&$.text.length<U-K)q=Y.to,G="end";let W=J$(Z.state.doc.sliceString(K,U,O3),$.text,q-K,G);if(W){if(x.chrome&&Q==13&&W.toB==W.from+2&&$.text.slice(W.from,W.toB)==O3+O3)W.toB--;J={from:K+W.from,to:K+W.toA,insert:e.of($.text.slice(W.from,W.toB).split(O3))}}}else if(X&&(!Z.hasFocus&&Z.state.facet(m1)||u6(X,Y)))X=null;if(!J&&!X)return!1;if(!J&&$.typeOver&&!Y.empty&&X&&X.main.empty)J={from:Y.from,to:Y.to,insert:Z.state.doc.slice(Y.from,Y.to)};else if((x.mac||x.android)&&J&&J.from==J.to&&J.from==Y.head-1&&/^\. ?$/.test(J.insert.toString())&&Z.contentDOM.getAttribute("autocorrect")=="off"){if(X&&J.insert.length==2)X=M.single(X.main.anchor-1,X.main.head-1);J={from:J.from,to:J.to,insert:e.of([J.insert.toString().replace("."," ")])}}else if(J&&J.from>=Y.from&&J.to<=Y.to&&(J.from!=Y.from||J.to!=Y.to)&&Y.to-Y.from-(J.to-J.from)<=4)J={from:Y.from,to:Y.to,insert:Z.state.doc.slice(Y.from,J.from).append(J.insert).append(Z.state.doc.slice(J.to,Y.to))};else if(Z.state.doc.lineAt(Y.from).to<Y.to&&Z.docView.lineHasWidget(Y.to)&&Z.inputState.insertingTextAt>Date.now()-50)J={from:Y.from,to:Y.to,insert:Z.state.toText(Z.inputState.insertingText)};else if(x.chrome&&J&&J.from==J.to&&J.from==Y.head&&J.insert.toString()==`
 `&&Z.lineWrapping){if(X)X=M.single(X.main.anchor-1,X.main.head-1);J={from:Y.from,to:Y.to,insert:e.of([" "])}}if(J)return K8(Z,J,X,Q);else if(X&&!u6(X,Y)){let K=!1,U="select";if(Z.inputState.lastSelectionTime>Date.now()-50){if(Z.inputState.lastSelectionOrigin=="select")K=!0;if(U=Z.inputState.lastSelectionOrigin,U=="select.pointer")X=aZ(Z.state.facet(T3).map((q)=>q(Z)),X)}return Z.dispatch({selection:X,scrollIntoView:K,userEvent:U}),!0}else return!1}function K8(Z,$,J,X=-1){if(x.ios&&Z.inputState.flushIOSKey($))return!0;let Y=Z.state.selection.main;if(x.android&&($.to==Y.to&&($.from==Y.from||$.from==Y.from-1&&Z.state.sliceDoc($.from,Y.from)==" ")&&$.insert.length==1&&$.insert.lines==2&&h2(Z.contentDOM,"Enter",13)||($.from==Y.from-1&&$.to==Y.to&&$.insert.length==0||X==8&&$.insert.length<$.to-$.from&&$.to>Y.head)&&h2(Z.contentDOM,"Backspace",8)||$.from==Y.from&&$.to==Y.to+1&&$.insert.length==0&&h2(Z.contentDOM,"Delete",46)))return!0;let Q=$.insert.toString();if(Z.inputState.composing>=0)Z.inputState.composing++;let K,U=()=>K||(K=xK(Z,$,J));if(!Z.state.facet(bZ).some((q)=>q(Z,$.from,$.to,Q,U)))Z.dispatch(U());return!0}function xK(Z,$,J){let X,Y=Z.state,Q=Y.selection.main,K=-1;if($.from==$.to&&$.from<Q.from||$.from>Q.to){let q=$.from<Q.from?-1:1,G=q<0?Q.from:Q.to,W=D3(Y.facet(T3).map((j)=>j(Z)),G,q);if($.from==W)K=W}if(K>-1)X={changes:$,selection:M.cursor($.from+$.insert.length,-1)};else if($.from>=Q.from&&$.to<=Q.to&&$.to-$.from>=(Q.to-Q.from)/3&&(!J||J.main.empty&&J.main.from==$.from+$.insert.length)&&Z.inputState.composing<0){let q=Q.from<$.from?Y.sliceDoc(Q.from,$.from):"",G=Q.to>$.to?Y.sliceDoc($.to,Q.to):"";X=Y.replaceSelection(Z.state.toText(q+$.insert.sliceString(0,void 0,Z.state.lineBreak)+G))}else{let q=Y.changes($),G=J&&J.main.to<=q.newLength?J.main:void 0;if(Y.selection.ranges.length>1&&(Z.inputState.composing>=0||Z.inputState.compositionPendingChange)&&$.to<=Q.to+10&&$.to>=Q.to-10){let W=Z.state.sliceDoc($.from,$.to),j,z=J&&iZ(Z,J.main.head);if(z){let V=$.insert.length-($.to-$.from);j={from:z.from,to:z.to-V}}else j=Z.state.doc.lineAt(Q.head);let _=Q.to-$.to;X=Y.changeByRange((V)=>{if(V.from==Q.from&&V.to==Q.to)return{changes:q,range:G||V.map(q)};let O=V.to-_,N=O-W.length;if(Z.state.sliceDoc(N,O)!=W||O>=j.from&&N<=j.to)return{range:V};let F=Y.changes({from:N,to:O,insert:$.insert}),D=V.to-Q.to;return{changes:F,range:!G?V.map(F):M.range(Math.max(0,G.anchor+D),Math.max(0,G.head+D))}})}else X={changes:q,selection:G&&Y.selection.replaceRange(G)}}let U="input.type";if(Z.composing||Z.inputState.compositionPendingChange&&Z.inputState.compositionEndedAt>Date.now()-50){if(Z.inputState.compositionPendingChange=!1,U+=".compose",Z.inputState.compositionFirstChange)U+=".start",Z.inputState.compositionFirstChange=!1}return Y.update(X,{userEvent:U,scrollIntoView:!0})}function J$(Z,$,J,X){let Y=Math.min(Z.length,$.length),Q=0;while(Q<Y&&Z.charCodeAt(Q)==$.charCodeAt(Q))Q++;if(Q==Y&&Z.length==$.length)return null;let K=Z.length,U=$.length;while(K>0&&U>0&&Z.charCodeAt(K-1)==$.charCodeAt(U-1))K--,U--;if(X=="end"){let q=Math.max(0,Q-Math.min(K,U));J-=K+q-Q}if(K<Q&&Z.length<$.length){let q=J<=Q&&J>=K?Q-J:0;Q-=q,U=Q+(U-K),K=Q}else if(U<Q){let q=J<=Q&&J>=U?Q-J:0;Q-=q,K=Q+(K-U),U=Q}return{from:Q,toA:K,toB:U}}function wK(Z){let $=[];if(Z.root.activeElement!=Z.contentDOM)return $;let{anchorNode:J,anchorOffset:X,focusNode:Y,focusOffset:Q}=Z.observer.selectionRange;if(J){if($.push(new g7(J,X)),Y!=J||Q!=X)$.push(new g7(Y,Q))}return $}function hK(Z,$){if(Z.length==0)return null;let J=Z[0].pos,X=Z.length==2?Z[1].pos:J;return J>-1&&X>-1?M.single(J+$,X+$):null}function u6(Z,$){return $.head==Z.main.head&&$.anchor==Z.main.anchor}class X${setSelectionOrigin(Z){this.lastSelectionOrigin=Z,this.lastSelectionTime=Date.now()}constructor(Z){if(this.view=Z,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=Z.hasFocus,x.safari)Z.contentDOM.addEventListener("input",()=>null);if(x.gecko)aK(Z.contentDOM.ownerDocument)}handleEvent(Z){if(!lK(this.view,Z)||this.ignoreDuringComposition(Z))return;if(Z.type=="keydown"&&this.keydown(Z))return;if(this.view.updateState!=0)Promise.resolve().then(()=>this.runHandlers(Z.type,Z));else this.runHandlers(Z.type,Z)}runHandlers(Z,$){let J=this.handlers[Z];if(J){for(let X of J.observers)X(this.view,$);for(let X of J.handlers){if($.defaultPrevented)break;if(X(this.view,$)){$.preventDefault();break}}}}ensureHandlers(Z){let $=vK(Z),J=this.handlers,X=this.view.contentDOM;for(let Y in $)if(Y!="scroll"){let Q=!$[Y].handlers.length,K=J[Y];if(K&&Q!=!K.handlers.length)X.removeEventListener(Y,this.handleEvent),K=null;if(!K)X.addEventListener(Y,this.handleEvent,{passive:Q})}for(let Y in J)if(Y!="scroll"&&!$[Y])X.removeEventListener(Y,this.handleEvent);this.handlers=$}keydown(Z){if(this.lastKeyCode=Z.keyCode,this.lastKeyTime=Date.now(),Z.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&Z.keyCode!=27&&Q$.indexOf(Z.keyCode)<0)this.tabFocusMode=-1;if(x.android&&x.chrome&&!Z.synthetic&&(Z.keyCode==13||Z.keyCode==8))return this.view.observer.delayAndroidKey(Z.key,Z.keyCode),!0;let $;if(x.ios&&!Z.synthetic&&!Z.altKey&&!Z.metaKey&&(($=Y$.find((J)=>J.keyCode==Z.keyCode))&&!Z.ctrlKey||uK.indexOf(Z.key)>-1&&Z.ctrlKey&&!Z.shiftKey))return this.pendingIOSKey=$||Z,setTimeout(()=>this.flushIOSKey(),250),!0;if(Z.keyCode!=229)this.view.observer.forceFlush();return!1}flushIOSKey(Z){let $=this.pendingIOSKey;if(!$)return!1;if($.key=="Enter"&&Z&&Z.from<Z.to&&/^\S+$/.test(Z.insert.toString()))return!1;return this.pendingIOSKey=void 0,h2(this.view.contentDOM,$.key,$.keyCode,$ instanceof KeyboardEvent?$:void 0)}ignoreDuringComposition(Z){if(!/^key/.test(Z.type)||Z.synthetic)return!1;if(this.composing>0)return!0;if(x.safari&&!x.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)return this.compositionPendingKey=!1,!0;return!1}startMouseSelection(Z){if(this.mouseSelection)this.mouseSelection.destroy();this.mouseSelection=Z}update(Z){if(this.view.observer.update(Z),this.mouseSelection)this.mouseSelection.update(Z);if(this.draggedContent&&Z.docChanged)this.draggedContent=this.draggedContent.map(Z.changes);if(Z.transactions.length)this.lastKeyCode=this.lastSelectionTime=0}destroy(){if(this.mouseSelection)this.mouseSelection.destroy()}}function g5(Z,$){return(J,X)=>{try{return $.call(Z,X,J)}catch(Y){k0(J.state,Y)}}}function vK(Z){let $=Object.create(null);function J(X){return $[X]||($[X]={observers:[],handlers:[]})}for(let X of Z){let Y=X.spec,Q=Y&&Y.plugin.domEventHandlers,K=Y&&Y.plugin.domEventObservers;if(Q)for(let U in Q){let q=Q[U];if(q)J(U).handlers.push(g5(X.value,q))}if(K)for(let U in K){let q=K[U];if(q)J(U).observers.push(g5(X.value,q))}}for(let X in M1)J(X).handlers.push(M1[X]);for(let X in Y1)J(X).observers.push(Y1[X]);return $}var Y$=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],uK="dthko",Q$=[16,17,18,20,91,92,224,225],H6=6;function N6(Z){return Math.max(0,Z)*0.7+8}function mK(Z,$){return Math.max(Math.abs(Z.clientX-$.clientX),Math.abs(Z.clientY-$.clientY))}class K${constructor(Z,$,J,X){this.view=Z,this.startEvent=$,this.style=J,this.mustSelect=X,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=$,this.scrollParents=ZK(Z.contentDOM),this.atoms=Z.state.facet(T3).map((Q)=>Q(Z));let Y=Z.contentDOM.ownerDocument;Y.addEventListener("mousemove",this.move=this.move.bind(this)),Y.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=$.shiftKey,this.multiple=Z.state.facet(n.allowMultipleSelections)&&gK(Z,$),this.dragging=pK(Z,$)&&G$($)==1?null:!1}start(Z){if(this.dragging===!1)this.select(Z)}move(Z){if(Z.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&mK(this.startEvent,Z)<10)return;this.select(this.lastEvent=Z);let $=0,J=0,X=0,Y=0,Q=this.view.win.innerWidth,K=this.view.win.innerHeight;if(this.scrollParents.x)({left:X,right:Q}=this.scrollParents.x.getBoundingClientRect());if(this.scrollParents.y)({top:Y,bottom:K}=this.scrollParents.y.getBoundingClientRect());let U=Q8(this.view);if(Z.clientX-U.left<=X+H6)$=-N6(X-Z.clientX);else if(Z.clientX+U.right>=Q-H6)$=N6(Z.clientX-Q);if(Z.clientY-U.top<=Y+H6)J=-N6(Y-Z.clientY);else if(Z.clientY+U.bottom>=K-H6)J=N6(Z.clientY-K);this.setScrollSpeed($,J)}up(Z){if(this.dragging==null)this.select(this.lastEvent);if(!this.dragging)Z.preventDefault();this.destroy()}destroy(){this.setScrollSpeed(0,0);let Z=this.view.contentDOM.ownerDocument;Z.removeEventListener("mousemove",this.move),Z.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(Z,$){if(this.scrollSpeed={x:Z,y:$},Z||$){if(this.scrolling<0)this.scrolling=setInterval(()=>this.scroll(),50)}else if(this.scrolling>-1)clearInterval(this.scrolling),this.scrolling=-1}scroll(){let{x:Z,y:$}=this.scrollSpeed;if(Z&&this.scrollParents.x)this.scrollParents.x.scrollLeft+=Z,Z=0;if($&&this.scrollParents.y)this.scrollParents.y.scrollTop+=$,$=0;if(Z||$)this.view.win.scrollBy(Z,$);if(this.dragging===!1)this.select(this.lastEvent)}select(Z){let{view:$}=this,J=aZ(this.atoms,this.style.get(Z,this.extend,this.multiple));if(this.mustSelect||!J.eq($.state.selection,this.dragging===!1))this.view.dispatch({selection:J,userEvent:"select.pointer"});this.mustSelect=!1}update(Z){if(Z.transactions.some(($)=>$.isUserEvent("input.type")))this.destroy();else if(this.style.update(Z))setTimeout(()=>this.select(this.lastEvent),20)}}function gK(Z,$){let J=Z.state.facet(PZ);return J.length?J[0]($):x.mac?$.metaKey:$.ctrlKey}function fK(Z,$){let J=Z.state.facet(CZ);return J.length?J[0]($):x.mac?!$.altKey:!$.ctrlKey}function pK(Z,$){let{main:J}=Z.state.selection;if(J.empty)return!1;let X=u2(Z.root);if(!X||X.rangeCount==0)return!0;let Y=X.getRangeAt(0).getClientRects();for(let Q=0;Q<Y.length;Q++){let K=Y[Q];if(K.left<=$.clientX&&K.right>=$.clientX&&K.top<=$.clientY&&K.bottom>=$.clientY)return!0}return!1}function lK(Z,$){if(!$.bubbles)return!0;if($.defaultPrevented)return!1;for(let J=$.target,X;J!=Z.contentDOM;J=J.parentNode)if(!J||J.nodeType==11||(X=M0.get(J))&&X.isWidget()&&!X.isHidden&&X.widget.ignoreEvent($))return!1;return!0}var M1=Object.create(null),Y1=Object.create(null),U$=x.ie&&x.ie_version<15||x.ios&&x.webkit_version<604;function dK(Z){let $=Z.dom.parentNode;if(!$)return;let J=$.appendChild(document.createElement("textarea"));J.style.cssText="position: fixed; left: -10000px; top: 10px",J.focus(),setTimeout(()=>{Z.focus(),J.remove(),q$(Z,J.value)},50)}function d6(Z,$,J){for(let X of Z.facet($))J=X(J,Z);return J}function q$(Z,$){$=d6(Z.state,$8,$);let{state:J}=Z,X,Y=1,Q=J.toText($),K=Q.lines==J.selection.ranges.length;if(f7!=null&&J.selection.ranges.every((q)=>q.empty)&&f7==Q.toString()){let q=-1;X=J.changeByRange((G)=>{let W=J.doc.lineAt(G.from);if(W.from==q)return{range:G};q=W.from;let j=J.toText((K?Q.line(Y++).text:$)+J.lineBreak);return{changes:{from:W.from,insert:j},range:M.cursor(G.from+j.length)}})}else if(K)X=J.changeByRange((q)=>{let G=Q.line(Y++);return{changes:{from:q.from,to:q.to,insert:G.text},range:M.cursor(q.from+G.length)}});else X=J.replaceSelection(Q);Z.dispatch(X,{userEvent:"input.paste",scrollIntoView:!0})}Y1.scroll=(Z)=>{Z.inputState.lastScrollTop=Z.scrollDOM.scrollTop,Z.inputState.lastScrollLeft=Z.scrollDOM.scrollLeft};M1.keydown=(Z,$)=>{if(Z.inputState.setSelectionOrigin("select"),$.keyCode==27&&Z.inputState.tabFocusMode!=0)Z.inputState.tabFocusMode=Date.now()+2000;return!1};Y1.touchstart=(Z,$)=>{Z.inputState.lastTouchTime=Date.now(),Z.inputState.setSelectionOrigin("select.pointer")};Y1.touchmove=(Z)=>{Z.inputState.setSelectionOrigin("select.pointer")};M1.mousedown=(Z,$)=>{if(Z.observer.flush(),Z.inputState.lastTouchTime>Date.now()-2000)return!1;let J=null;for(let X of Z.state.facet(TZ))if(J=X(Z,$),J)break;if(!J&&$.button==0)J=sK(Z,$);if(J){let X=!Z.hasFocus;if(Z.inputState.startMouseSelection(new K$(Z,$,J,X)),X)Z.observer.ignore(()=>{RZ(Z.contentDOM);let Q=Z.root.activeElement;if(Q&&!Q.contains(Z.contentDOM))Q.blur()});let Y=Z.inputState.mouseSelection;if(Y)return Y.start($),Y.dragging===!1}else Z.inputState.setSelectionOrigin("select.pointer");return!1};function f5(Z,$,J,X){if(X==1)return M.cursor($,J);else if(X==2)return PK(Z.state,$,J);else{let Y=Z.docView.lineAt($,J),Q=Z.state.doc.lineAt(Y?Y.posAtEnd:$),K=Y?Y.posAtStart:Q.from,U=Y?Y.posAtEnd:Q.to;if(U<Z.state.doc.length&&U==Q.to)U++;return M.range(K,U)}}var cK=x.ie&&x.ie_version<=11,p5=null,l5=0,d5=0;function G$(Z){if(!cK)return Z.detail;let $=p5,J=d5;return p5=Z,d5=Date.now(),l5=!$||J>Date.now()-400&&Math.abs($.clientX-Z.clientX)<2&&Math.abs($.clientY-Z.clientY)<2?(l5+1)%3:1}function sK(Z,$){let J=Z.posAndSideAtCoords({x:$.clientX,y:$.clientY},!1),X=G$($),Y=Z.state.selection;return{update(Q){if(Q.docChanged)J.pos=Q.changes.mapPos(J.pos),Y=Y.map(Q.changes)},get(Q,K,U){let q=Z.posAndSideAtCoords({x:Q.clientX,y:Q.clientY},!1),G,W=f5(Z,q.pos,q.assoc,X);if(J.pos!=q.pos&&!K){let j=f5(Z,J.pos,J.assoc,X),z=Math.min(j.from,W.from),_=Math.max(j.to,W.to);W=z<W.from?M.range(z,_):M.range(_,z)}if(K)return Y.replaceRange(Y.main.extend(W.from,W.to));else if(U&&X==1&&Y.ranges.length>1&&(G=nK(Y,q.pos)))return G;else if(U)return Y.addRange(W);else return M.create([W])}}}function nK(Z,$){for(let J=0;J<Z.ranges.length;J++){let{from:X,to:Y}=Z.ranges[J];if(X<=$&&Y>=$)return M.create(Z.ranges.slice(0,J).concat(Z.ranges.slice(J+1)),Z.mainIndex==J?0:Z.mainIndex-(Z.mainIndex>J?1:0))}return null}M1.dragstart=(Z,$)=>{let{selection:{main:J}}=Z.state;if($.target.draggable){let Y=Z.docView.tile.nearest($.target);if(Y&&Y.isWidget()){let Q=Y.posAtStart,K=Q+Y.length;if(Q>=J.to||K<=J.from)J=M.range(Q,K)}}let{inputState:X}=Z;if(X.mouseSelection)X.mouseSelection.dragging=!0;if(X.draggedContent=J,$.dataTransfer)$.dataTransfer.setData("Text",d6(Z.state,J8,Z.state.sliceDoc(J.from,J.to))),$.dataTransfer.effectAllowed="copyMove";return!1};M1.dragend=(Z)=>{return Z.inputState.draggedContent=null,!1};function c5(Z,$,J,X){if(J=d6(Z.state,$8,J),!J)return;let Y=Z.posAtCoords({x:$.clientX,y:$.clientY},!1),{draggedContent:Q}=Z.inputState,K=X&&Q&&fK(Z,$)?{from:Q.from,to:Q.to}:null,U={from:Y,insert:J},q=Z.state.changes(K?[K,U]:U);Z.focus(),Z.dispatch({changes:q,selection:{anchor:q.mapPos(Y,-1),head:q.mapPos(Y,1)},userEvent:K?"move.drop":"input.drop"}),Z.inputState.draggedContent=null}M1.drop=(Z,$)=>{if(!$.dataTransfer)return!1;if(Z.state.readOnly)return!0;let J=$.dataTransfer.files;if(J&&J.length){let X=Array(J.length),Y=0,Q=()=>{if(++Y==J.length)c5(Z,$,X.filter((K)=>K!=null).join(Z.state.lineBreak),!1)};for(let K=0;K<J.length;K++){let U=new FileReader;U.onerror=Q,U.onload=()=>{if(!/[\x00-\x08\x0e-\x1f]{2}/.test(U.result))X[K]=U.result;Q()},U.readAsText(J[K])}return!0}else{let X=$.dataTransfer.getData("Text");if(X)return c5(Z,$,X,!0),!0}return!1};M1.paste=(Z,$)=>{if(Z.state.readOnly)return!0;Z.observer.flush();let J=U$?null:$.clipboardData;if(J)return q$(Z,J.getData("text/plain")||J.getData("text/uri-list")),!0;else return dK(Z),!1};function iK(Z,$){let J=Z.dom.parentNode;if(!J)return;let X=J.appendChild(document.createElement("textarea"));X.style.cssText="position: fixed; left: -10000px; top: 10px",X.value=$,X.focus(),X.selectionEnd=$.length,X.selectionStart=0,setTimeout(()=>{X.remove(),Z.focus()},50)}function rK(Z){let $=[],J=[],X=!1;for(let Y of Z.selection.ranges)if(!Y.empty)$.push(Z.sliceDoc(Y.from,Y.to)),J.push(Y);if(!$.length){let Y=-1;for(let{from:Q}of Z.selection.ranges){let K=Z.doc.lineAt(Q);if(K.number>Y)$.push(K.text),J.push({from:K.from,to:Math.min(Z.doc.length,K.to+1)});Y=K.number}X=!0}return{text:d6(Z,J8,$.join(Z.lineBreak)),ranges:J,linewise:X}}var f7=null;M1.copy=M1.cut=(Z,$)=>{let J=u2(Z.root);if(J&&!F3(Z.contentDOM,J))return!1;let{text:X,ranges:Y,linewise:Q}=rK(Z.state);if(!X&&!Q)return!1;if(f7=Q?X:null,$.type=="cut"&&!Z.state.readOnly)Z.dispatch({changes:Y,scrollIntoView:!0,userEvent:"delete.cut"});let K=U$?null:$.clipboardData;if(K)return K.clearData(),K.setData("text/plain",X),!0;else return iK(Z,X),!1};var W$=r0.define();function j$(Z,$){let J=[];for(let X of Z.facet(kZ)){let Y=X(Z,$);if(Y)J.push(Y)}return J.length?Z.update({effects:J,annotations:W$.of(!0)}):null}function z$(Z){setTimeout(()=>{let $=Z.hasFocus;if($!=Z.inputState.notifiedFocused){let J=j$(Z.state,$);if(J)Z.dispatch(J);else Z.update([])}},10)}Y1.focus=(Z)=>{if(Z.inputState.lastFocusTime=Date.now(),!Z.scrollDOM.scrollTop&&(Z.inputState.lastScrollTop||Z.inputState.lastScrollLeft))Z.scrollDOM.scrollTop=Z.inputState.lastScrollTop,Z.scrollDOM.scrollLeft=Z.inputState.lastScrollLeft;z$(Z)};Y1.blur=(Z)=>{Z.observer.clearSelectionRange(),z$(Z)};Y1.compositionstart=Y1.compositionupdate=(Z)=>{if(Z.observer.editContext)return;if(Z.inputState.compositionFirstChange==null)Z.inputState.compositionFirstChange=!0;if(Z.inputState.composing<0)Z.inputState.composing=0};Y1.compositionend=(Z)=>{if(Z.observer.editContext)return;if(Z.inputState.composing=-1,Z.inputState.compositionEndedAt=Date.now(),Z.inputState.compositionPendingKey=!0,Z.inputState.compositionPendingChange=Z.observer.pendingRecords().length>0,Z.inputState.compositionFirstChange=null,x.chrome&&x.android)Z.observer.flushSoon();else if(Z.inputState.compositionPendingChange)Promise.resolve().then(()=>Z.observer.flush());else setTimeout(()=>{if(Z.inputState.composing<0&&Z.docView.hasComposition)Z.update([])},50)};Y1.contextmenu=(Z)=>{Z.inputState.lastContextMenu=Date.now()};M1.beforeinput=(Z,$)=>{var J,X;if($.inputType=="insertText"||$.inputType=="insertCompositionText")Z.inputState.insertingText=$.data,Z.inputState.insertingTextAt=Date.now();if($.inputType=="insertReplacementText"&&Z.observer.editContext){let Q=(J=$.dataTransfer)===null||J===void 0?void 0:J.getData("text/plain"),K=$.getTargetRanges();if(Q&&K.length){let U=K[0],q=Z.posAtDOM(U.startContainer,U.startOffset),G=Z.posAtDOM(U.endContainer,U.endOffset);return K8(Z,{from:q,to:G,insert:Z.state.toText(Q)},null),!0}}let Y;if(x.chrome&&x.android&&(Y=Y$.find((Q)=>Q.inputType==$.inputType))){if(Z.observer.delayAndroidKey(Y.key,Y.keyCode),Y.key=="Backspace"||Y.key=="Delete"){let Q=((X=window.visualViewport)===null||X===void 0?void 0:X.height)||0;setTimeout(()=>{var K;if((((K=window.visualViewport)===null||K===void 0?void 0:K.height)||0)>Q+10&&Z.hasFocus)Z.contentDOM.blur(),Z.focus()},100)}}if(x.ios&&$.inputType=="deleteContentForward")Z.observer.flushSoon();if(x.safari&&$.inputType=="insertText"&&Z.inputState.composing>=0)setTimeout(()=>Y1.compositionend(Z,$),20);return!1};var s5=new Set;function aK(Z){if(!s5.has(Z))s5.add(Z),Z.addEventListener("copy",()=>{}),Z.addEventListener("cut",()=>{})}var n5=["pre-wrap","normal","pre-line","break-spaces"],g2=!1;function i5(){g2=!1}class _${constructor(Z){this.lineWrapping=Z,this.doc=e.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(Z,$){let J=this.doc.lineAt($).number-this.doc.lineAt(Z).number+1;if(this.lineWrapping)J+=Math.max(0,Math.ceil(($-Z-J*this.lineLength*0.5)/this.lineLength));return this.lineHeight*J}heightForLine(Z){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((Z-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight}setDoc(Z){return this.doc=Z,this}mustRefreshForWrapping(Z){return n5.indexOf(Z)>-1!=this.lineWrapping}mustRefreshForHeights(Z){let $=!1;for(let J=0;J<Z.length;J++){let X=Z[J];if(X<0)J++;else if(!this.heightSamples[Math.floor(X*10)])$=!0,this.heightSamples[Math.floor(X*10)]=!0}return $}refresh(Z,$,J,X,Y,Q){let K=n5.indexOf(Z)>-1,U=Math.abs($-this.lineHeight)>0.3||this.lineWrapping!=K||Math.abs(J-this.charWidth)>0.1;if(this.lineWrapping=K,this.lineHeight=$,this.charWidth=J,this.textHeight=X,this.lineLength=Y,U){this.heightSamples={};for(let q=0;q<Q.length;q++){let G=Q[q];if(G<0)q++;else this.heightSamples[Math.floor(G*10)]=!0}}return U}}class O${constructor(Z,$){this.from=Z,this.heights=$,this.index=0}get more(){return this.index<this.heights.length}}class I1{constructor(Z,$,J,X,Y){this.from=Z,this.length=$,this.top=J,this.height=X,this._content=Y}get type(){return typeof this._content=="number"?S0.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof z2?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(Z){let $=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(Z._content)?Z._content:[Z]);return new I1(this.from,this.length+Z.length,this.top,this.height+Z.height,$)}}var q0=function(Z){return Z[Z.ByPos=0]="ByPos",Z[Z.ByHeight=1]="ByHeight",Z[Z.ByPosNoHeight=2]="ByPosNoHeight",Z}(q0||(q0={})),P6=0.001;class m0{constructor(Z,$,J=2){this.length=Z,this.height=$,this.flags=J}get outdated(){return(this.flags&2)>0}set outdated(Z){this.flags=(Z?2:0)|this.flags&-3}setHeight(Z){if(this.height!=Z){if(Math.abs(this.height-Z)>P6)g2=!0;this.height=Z}}replace(Z,$,J){return m0.of(J)}decomposeLeft(Z,$){$.push(this)}decomposeRight(Z,$){$.push(this)}applyChanges(Z,$,J,X){let Y=this,Q=J.doc;for(let K=X.length-1;K>=0;K--){let{fromA:U,toA:q,fromB:G,toB:W}=X[K],j=Y.lineAt(U,q0.ByPosNoHeight,J.setDoc($),0,0),z=j.to>=q?j:Y.lineAt(q,q0.ByPosNoHeight,J,0,0);W+=z.to-q,q=z.to;while(K>0&&j.from<=X[K-1].toA)if(U=X[K-1].fromA,G=X[K-1].fromB,K--,U<j.from)j=Y.lineAt(U,q0.ByPosNoHeight,J,0,0);G+=j.from-U,U=j.from;let _=q8.build(J.setDoc(Q),Z,G,W);Y=m6(Y,Y.replace(U,q,_))}return Y.updateHeight(J,0)}static empty(){return new a0(0,0,0)}static of(Z){if(Z.length==1)return Z[0];let $=0,J=Z.length,X=0,Y=0;for(;;)if($==J)if(X>Y*2){let K=Z[$-1];if(K.break)Z.splice(--$,1,K.left,null,K.right);else Z.splice(--$,1,K.left,K.right);J+=1+K.break,X-=K.size}else if(Y>X*2){let K=Z[J];if(K.break)Z.splice(J,1,K.left,null,K.right);else Z.splice(J,1,K.left,K.right);J+=2+K.break,Y-=K.size}else break;else if(X<Y){let K=Z[$++];if(K)X+=K.size}else{let K=Z[--J];if(K)Y+=K.size}let Q=0;if(Z[$-1]==null)Q=1,$--;else if(Z[$]==null)Q=1,J++;return new V$(m0.of(Z.slice(0,$)),Q,m0.of(Z.slice(J)))}}function m6(Z,$){if(Z==$)return Z;if(Z.constructor!=$.constructor)g2=!0;return $}m0.prototype.size=1;var oK=m.replace({});class U8 extends m0{constructor(Z,$,J){super(Z,$);this.deco=J,this.spaceAbove=0}mainBlock(Z,$){return new I1($,this.length,Z+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(Z,$,J,X){return this.spaceAbove&&Z<J+this.spaceAbove?new I1(X,0,J,this.spaceAbove,oK):this.mainBlock(J,X)}lineAt(Z,$,J,X,Y){let Q=this.mainBlock(X,Y);return this.spaceAbove?this.blockAt(0,J,X,Y).join(Q):Q}forEachLine(Z,$,J,X,Y,Q){if(Z<=Y+this.length&&$>=Y)Q(this.lineAt(0,q0.ByPos,J,X,Y))}setMeasuredHeight(Z){let $=Z.heights[Z.index++];if($<0)this.spaceAbove=-$,$=Z.heights[Z.index++];else this.spaceAbove=0;this.setHeight($)}updateHeight(Z,$=0,J=!1,X){if(X&&X.from<=$&&X.more)this.setMeasuredHeight(X);return this.outdated=!1,this}toString(){return`block(${this.length})`}}class a0 extends U8{constructor(Z,$,J){super(Z,$,null);this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=J}mainBlock(Z,$){return new I1($,this.length,Z+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(Z,$,J){let X=J[0];if(J.length==1&&(X instanceof a0||X instanceof b0&&X.flags&4)&&Math.abs(this.length-X.length)<10){if(X instanceof b0)X=new a0(X.length,this.height,this.spaceAbove);else X.height=this.height;if(!this.outdated)X.outdated=!1;return X}else return m0.of(J)}updateHeight(Z,$=0,J=!1,X){if(X&&X.from<=$&&X.more)this.setMeasuredHeight(X);else if(J||this.outdated)this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,Z.heightForLine(this.length-this.collapsed))+this.breaks*Z.lineHeight);return this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class b0 extends m0{constructor(Z){super(Z,0)}heightMetrics(Z,$){let J=Z.doc.lineAt($).number,X=Z.doc.lineAt($+this.length).number,Y=X-J+1,Q,K=0;if(Z.lineWrapping){let U=Math.min(this.height,Z.lineHeight*Y);if(Q=U/Y,this.length>Y+1)K=(this.height-U)/(this.length-Y-1)}else Q=this.height/Y;return{firstLine:J,lastLine:X,perLine:Q,perChar:K}}blockAt(Z,$,J,X){let{firstLine:Y,lastLine:Q,perLine:K,perChar:U}=this.heightMetrics($,X);if($.lineWrapping){let q=X+(Z<$.lineHeight?0:Math.round(Math.max(0,Math.min(1,(Z-J)/this.height))*this.length)),G=$.doc.lineAt(q),W=K+G.length*U,j=Math.max(J,Z-W/2);return new I1(G.from,G.length,j,W,0)}else{let q=Math.max(0,Math.min(Q-Y,Math.floor((Z-J)/K))),{from:G,length:W}=$.doc.line(Y+q);return new I1(G,W,J+K*q,K,0)}}lineAt(Z,$,J,X,Y){if($==q0.ByHeight)return this.blockAt(Z,J,X,Y);if($==q0.ByPosNoHeight){let{from:z,to:_}=J.doc.lineAt(Z);return new I1(z,_-z,0,0,0)}let{firstLine:Q,perLine:K,perChar:U}=this.heightMetrics(J,Y),q=J.doc.lineAt(Z),G=K+q.length*U,W=q.number-Q,j=X+K*W+U*(q.from-Y-W);return new I1(q.from,q.length,Math.max(X,Math.min(j,X+this.height-G)),G,0)}forEachLine(Z,$,J,X,Y,Q){Z=Math.max(Z,Y),$=Math.min($,Y+this.length);let{firstLine:K,perLine:U,perChar:q}=this.heightMetrics(J,Y);for(let G=Z,W=X;G<=$;){let j=J.doc.lineAt(G);if(G==Z){let _=j.number-K;W+=U*_+q*(Z-Y-_)}let z=U+q*j.length;Q(new I1(j.from,j.length,W,z,0)),W+=z,G=j.to+1}}replace(Z,$,J){let X=this.length-$;if(X>0){let Y=J[J.length-1];if(Y instanceof b0)J[J.length-1]=new b0(Y.length+X);else J.push(null,new b0(X-1))}if(Z>0){let Y=J[0];if(Y instanceof b0)J[0]=new b0(Z+Y.length);else J.unshift(new b0(Z-1),null)}return m0.of(J)}decomposeLeft(Z,$){$.push(new b0(Z-1),null)}decomposeRight(Z,$){$.push(null,new b0(this.length-Z-1))}updateHeight(Z,$=0,J=!1,X){let Y=$+this.length;if(X&&X.from<=$+this.length&&X.more){let Q=[],K=Math.max($,X.from),U=-1;if(X.from>$)Q.push(new b0(X.from-$-1).updateHeight(Z,$));while(K<=Y&&X.more){let G=Z.doc.lineAt(K).length;if(Q.length)Q.push(null);let W=X.heights[X.index++],j=0;if(W<0)j=-W,W=X.heights[X.index++];if(U==-1)U=W;else if(Math.abs(W-U)>=P6)U=-2;let z=new a0(G,W,j);z.outdated=!1,Q.push(z),K+=G+1}if(K<=Y)Q.push(null,new b0(Y-K).updateHeight(Z,K));let q=m0.of(Q);if(U<0||Math.abs(q.height-this.height)>=P6||Math.abs(U-this.heightMetrics(Z,$).perLine)>=P6)g2=!0;return m6(this,q)}else if(J||this.outdated)this.setHeight(Z.heightForGap($,$+this.length)),this.outdated=!1;return this}toString(){return`gap(${this.length})`}}class V$ extends m0{constructor(Z,$,J){super(Z.length+$+J.length,Z.height+J.height,$|(Z.outdated||J.outdated?2:0));this.left=Z,this.right=J,this.size=Z.size+J.size}get break(){return this.flags&1}blockAt(Z,$,J,X){let Y=J+this.left.height;return Z<Y?this.left.blockAt(Z,$,J,X):this.right.blockAt(Z,$,Y,X+this.left.length+this.break)}lineAt(Z,$,J,X,Y){let Q=X+this.left.height,K=Y+this.left.length+this.break,U=$==q0.ByHeight?Z<Q:Z<K,q=U?this.left.lineAt(Z,$,J,X,Y):this.right.lineAt(Z,$,J,Q,K);if(this.break||(U?q.to<K:q.from>K))return q;let G=$==q0.ByPosNoHeight?q0.ByPosNoHeight:q0.ByPos;if(U)return q.join(this.right.lineAt(K,G,J,Q,K));else return this.left.lineAt(K,G,J,X,Y).join(q)}forEachLine(Z,$,J,X,Y,Q){let K=X+this.left.height,U=Y+this.left.length+this.break;if(this.break){if(Z<U)this.left.forEachLine(Z,$,J,X,Y,Q);if($>=U)this.right.forEachLine(Z,$,J,K,U,Q)}else{let q=this.lineAt(U,q0.ByPos,J,X,Y);if(Z<q.from)this.left.forEachLine(Z,q.from-1,J,X,Y,Q);if(q.to>=Z&&q.from<=$)Q(q);if($>q.to)this.right.forEachLine(q.to+1,$,J,K,U,Q)}}replace(Z,$,J){let X=this.left.length+this.break;if($<X)return this.balanced(this.left.replace(Z,$,J),this.right);if(Z>this.left.length)return this.balanced(this.left,this.right.replace(Z-X,$-X,J));let Y=[];if(Z>0)this.decomposeLeft(Z,Y);let Q=Y.length;for(let K of J)Y.push(K);if(Z>0)r5(Y,Q-1);if($<this.length){let K=Y.length;this.decomposeRight($,Y),r5(Y,K)}return m0.of(Y)}decomposeLeft(Z,$){let J=this.left.length;if(Z<=J)return this.left.decomposeLeft(Z,$);if($.push(this.left),this.break){if(J++,Z>=J)$.push(null)}if(Z>J)this.right.decomposeLeft(Z-J,$)}decomposeRight(Z,$){let J=this.left.length,X=J+this.break;if(Z>=X)return this.right.decomposeRight(Z-X,$);if(Z<J)this.left.decomposeRight(Z,$);if(this.break&&Z<X)$.push(null);$.push(this.right)}balanced(Z,$){if(Z.size>2*$.size||$.size>2*Z.size)return m0.of(this.break?[Z,null,$]:[Z,$]);return this.left=m6(this.left,Z),this.right=m6(this.right,$),this.setHeight(Z.height+$.height),this.outdated=Z.outdated||$.outdated,this.size=Z.size+$.size,this.length=Z.length+this.break+$.length,this}updateHeight(Z,$=0,J=!1,X){let{left:Y,right:Q}=this,K=$+Y.length+this.break,U=null;if(X&&X.from<=$+Y.length&&X.more)U=Y=Y.updateHeight(Z,$,J,X);else Y.updateHeight(Z,$,J);if(X&&X.from<=K+Q.length&&X.more)U=Q=Q.updateHeight(Z,K,J,X);else Q.updateHeight(Z,K,J);if(U)return this.balanced(Y,Q);return this.height=this.left.height+this.right.height,this.outdated=!1,this}toString(){return this.left+(this.break?" ":"-")+this.right}}function r5(Z,$){let J,X;if(Z[$]==null&&(J=Z[$-1])instanceof b0&&(X=Z[$+1])instanceof b0)Z.splice($-1,3,new b0(J.length+1+X.length))}var tK=5;class q8{constructor(Z,$){this.pos=Z,this.oracle=$,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=Z}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(Z,$){if(this.lineStart>-1){let J=Math.min($,this.lineEnd),X=this.nodes[this.nodes.length-1];if(X instanceof a0)X.length+=J-this.pos;else if(J>this.pos||!this.isCovered)this.nodes.push(new a0(J-this.pos,-1,0));if(this.writtenTo=J,$>J)this.nodes.push(null),this.writtenTo++,this.lineStart=-1}this.pos=$}point(Z,$,J){if(Z<$||J.heightRelevant){let X=J.widget?J.widget.estimatedHeight:0,Y=J.widget?J.widget.lineBreaks:0;if(X<0)X=this.oracle.lineHeight;let Q=$-Z;if(J.block)this.addBlock(new U8(Q,X,J));else if(Q||Y||X>=tK)this.addLineDeco(X,Y,Q)}else if($>Z)this.span(Z,$);if(this.lineEnd>-1&&this.lineEnd<this.pos)this.lineEnd=this.oracle.doc.lineAt(this.pos).to}enterLine(){if(this.lineStart>-1)return;let{from:Z,to:$}=this.oracle.doc.lineAt(this.pos);if(this.lineStart=Z,this.lineEnd=$,this.writtenTo<Z){if(this.writtenTo<Z-1||this.nodes[this.nodes.length-1]==null)this.nodes.push(this.blankContent(this.writtenTo,Z-1));this.nodes.push(null)}if(this.pos>Z)this.nodes.push(new a0(this.pos-Z,-1,0));this.writtenTo=this.pos}blankContent(Z,$){let J=new b0($-Z);if(this.oracle.doc.lineAt(Z).to==$)J.flags|=4;return J}ensureLine(){this.enterLine();let Z=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(Z instanceof a0)return Z;let $=new a0(0,-1,0);return this.nodes.push($),$}addBlock(Z){this.enterLine();let $=Z.deco;if($&&$.startSide>0&&!this.isCovered)this.ensureLine();if(this.nodes.push(Z),this.writtenTo=this.pos=this.pos+Z.length,$&&$.endSide>0)this.covering=Z}addLineDeco(Z,$,J){let X=this.ensureLine();X.length+=J,X.collapsed+=J,X.widgetHeight=Math.max(X.widgetHeight,Z),X.breaks+=$,this.writtenTo=this.pos=this.pos+J}finish(Z){let $=this.nodes.length==0?null:this.nodes[this.nodes.length-1];if(this.lineStart>-1&&!($ instanceof a0)&&!this.isCovered)this.nodes.push(new a0(0,-1,0));else if(this.writtenTo<this.pos||$==null)this.nodes.push(this.blankContent(this.writtenTo,this.pos));let J=Z;for(let X of this.nodes){if(X instanceof a0)X.updateHeight(this.oracle,J);J+=X?X.length:1}return this.nodes}static build(Z,$,J,X){let Y=new q8(J,Z);return i.spans($,J,X,Y,0),Y.finish(J)}}function eK(Z,$,J){let X=new H$;return i.compare(Z,$,J,X,0),X.changes}class H${constructor(){this.changes=[]}compareRange(){}comparePoint(Z,$,J,X){if(Z<$||J&&J.heightRelevant||X&&X.heightRelevant)w2(Z,$,this.changes,5)}}function ZU(Z,$){let J=Z.getBoundingClientRect(),X=Z.ownerDocument,Y=X.defaultView||window,Q=Math.max(0,J.left),K=Math.min(Y.innerWidth,J.right),U=Math.max(0,J.top),q=Math.min(Y.innerHeight,J.bottom);for(let G=Z.parentNode;G&&G!=X.body;)if(G.nodeType==1){let W=G,j=window.getComputedStyle(W);if((W.scrollHeight>W.clientHeight||W.scrollWidth>W.clientWidth)&&j.overflow!="visible"){let z=W.getBoundingClientRect();Q=Math.max(Q,z.left),K=Math.min(K,z.right),U=Math.max(U,z.top),q=Math.min(G==Z.parentNode?Y.innerHeight:q,z.bottom)}G=j.position=="absolute"||j.position=="fixed"?W.offsetParent:W.parentNode}else if(G.nodeType==11)G=G.host;else break;return{left:Q-J.left,right:Math.max(Q,K)-J.left,top:U-(J.top+$),bottom:Math.max(U,q)-(J.top+$)}}function $U(Z){let $=Z.getBoundingClientRect(),J=Z.ownerDocument.defaultView||window;return $.left<J.innerWidth&&$.right>0&&$.top<J.innerHeight&&$.bottom>0}function JU(Z,$){let J=Z.getBoundingClientRect();return{left:0,right:J.right-J.left,top:$,bottom:J.bottom-(J.top+$)}}class C6{constructor(Z,$,J,X){this.from=Z,this.to=$,this.size=J,this.displaySize=X}static same(Z,$){if(Z.length!=$.length)return!1;for(let J=0;J<Z.length;J++){let X=Z[J],Y=$[J];if(X.from!=Y.from||X.to!=Y.to||X.size!=Y.size)return!1}return!0}draw(Z,$){return m.replace({widget:new N$(this.displaySize*($?Z.scaleY:Z.scaleX),$)}).range(this.from,this.to)}}class N$ extends o0{constructor(Z,$){super();this.size=Z,this.vertical=$}eq(Z){return Z.size==this.size&&Z.vertical==this.vertical}toDOM(){let Z=document.createElement("div");if(this.vertical)Z.style.height=this.size+"px";else Z.style.width=this.size+"px",Z.style.height="2px",Z.style.display="inline-block";return Z}get estimatedHeight(){return this.vertical?this.size:-1}}class p7{constructor(Z){this.state=Z,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=a5,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Y0.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let $=Z.facet(X8).some((J)=>typeof J!="function"&&J.class=="cm-lineWrapping");this.heightOracle=new _$($),this.stateDeco=o5(Z),this.heightMap=m0.empty().applyChanges(this.stateDeco,e.empty,this.heightOracle.setDoc(Z.doc),[new X1(0,0,0,Z.doc.length)]);for(let J=0;J<2;J++)if(this.viewport=this.getViewport(0,null),!this.updateForViewport())break;this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=m.set(this.lineGaps.map((J)=>J.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let Z=[this.viewport],{main:$}=this.state.selection;for(let J=0;J<=1;J++){let X=J?$.head:$.anchor;if(!Z.some(({from:Y,to:Q})=>X>=Y&&X<=Q)){let{from:Y,to:Q}=this.lineBlockAt(X);Z.push(new V3(Y,Q))}}return this.viewports=Z.sort((J,X)=>J.from-X.from),this.updateScaler()}updateScaler(){let Z=this.scaler;return this.scaler=this.heightMap.height<=7000000?a5:new G8(this.heightOracle,this.heightMap,this.viewports),Z.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(Z)=>{this.viewportLines.push(H3(Z,this.scaler))})}update(Z,$=null){this.state=Z.state;let J=this.stateDeco;this.stateDeco=o5(this.state);let X=Z.changedRanges,Y=X1.extendWithRanges(X,eK(J,this.stateDeco,Z?Z.changes:D0.empty(this.state.doc.length))),Q=this.heightMap.height,K=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);if(i5(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,Z.startState.doc,this.heightOracle.setDoc(this.state.doc),Y),this.heightMap.height!=Q||g2)Z.flags|=2;if(K)this.scrollAnchorPos=Z.changes.mapPos(K.from,-1),this.scrollAnchorHeight=K.top;else this.scrollAnchorPos=-1,this.scrollAnchorHeight=Q;let U=Y.length?this.mapViewport(this.viewport,Z.changes):this.viewport;if($&&($.range.head<U.from||$.range.head>U.to)||!this.viewportIsAppropriate(U))U=this.getViewport(0,$);let q=U.from!=this.viewport.from||U.to!=this.viewport.to;if(this.viewport=U,Z.flags|=this.updateForViewport(),q||!Z.changes.empty||Z.flags&2)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4000)this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,Z.changes)));if(Z.flags|=this.computeVisibleRanges(Z.changes),$)this.scrollTarget=$;if(!this.mustEnforceCursorAssoc&&(Z.selectionSet||Z.focusChanged)&&Z.view.lineWrapping&&Z.state.selection.main.empty&&Z.state.selection.main.assoc&&!Z.state.facet(xZ))this.mustEnforceCursorAssoc=!0}measure(Z){let $=Z.contentDOM,J=window.getComputedStyle($),X=this.heightOracle,Y=J.whiteSpace;this.defaultTextDirection=J.direction=="rtl"?Y0.RTL:Y0.LTR;let Q=this.heightOracle.mustRefreshForWrapping(Y)||this.mustMeasureContent,K=$.getBoundingClientRect(),U=Q||this.mustMeasureContent||this.contentDOMHeight!=K.height;this.contentDOMHeight=K.height,this.mustMeasureContent=!1;let q=0,G=0;if(K.width&&K.height){let{scaleX:A,scaleY:L}=HZ($,K);if(A>0.005&&Math.abs(this.scaleX-A)>0.005||L>0.005&&Math.abs(this.scaleY-L)>0.005)this.scaleX=A,this.scaleY=L,q|=16,Q=U=!0}let W=(parseInt(J.paddingTop)||0)*this.scaleY,j=(parseInt(J.paddingBottom)||0)*this.scaleY;if(this.paddingTop!=W||this.paddingBottom!=j)this.paddingTop=W,this.paddingBottom=j,q|=18;if(this.editorWidth!=Z.scrollDOM.clientWidth){if(X.lineWrapping)U=!0;this.editorWidth=Z.scrollDOM.clientWidth,q|=16}let z=Z.scrollDOM.scrollTop*this.scaleY;if(this.scrollTop!=z)this.scrollAnchorHeight=-1,this.scrollTop=z;this.scrolledToBottom=FZ(Z.scrollDOM);let _=(this.printing?JU:ZU)($,this.paddingTop),V=_.top-this.pixelViewport.top,O=_.bottom-this.pixelViewport.bottom;this.pixelViewport=_;let N=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(N!=this.inView){if(this.inView=N,N)U=!0}if(!this.inView&&!this.scrollTarget&&!$U(Z.dom))return 0;let F=K.width;if(this.contentDOMWidth!=F||this.editorHeight!=Z.scrollDOM.clientHeight)this.contentDOMWidth=K.width,this.editorHeight=Z.scrollDOM.clientHeight,q|=16;if(U){let A=Z.docView.measureVisibleLineHeights(this.viewport);if(X.mustRefreshForHeights(A))Q=!0;if(Q||X.lineWrapping&&Math.abs(F-this.contentDOMWidth)>X.charWidth){let{lineHeight:L,charWidth:B,textHeight:w}=Z.docView.measureTextSize();if(Q=L>0&&X.refresh(Y,L,B,w,Math.max(5,F/B),A),Q)Z.docView.minWidth=0,q|=16}if(V>0&&O>0)G=Math.max(V,O);else if(V<0&&O<0)G=Math.min(V,O);i5();for(let L of this.viewports){let B=L.from==this.viewport.from?A:Z.docView.measureVisibleLineHeights(L);this.heightMap=(Q?m0.empty().applyChanges(this.stateDeco,e.empty,this.heightOracle,[new X1(0,0,0,Z.state.doc.length)]):this.heightMap).updateHeight(X,0,Q,new O$(L.from,B))}if(g2)q|=2}let D=!this.viewportIsAppropriate(this.viewport,G)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);if(D){if(q&2)q|=this.updateScaler();this.viewport=this.getViewport(G,this.scrollTarget),q|=this.updateForViewport()}if(q&2||D)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4000)this.updateLineGaps(this.ensureLineGaps(Q?[]:this.lineGaps,Z));if(q|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc)this.mustEnforceCursorAssoc=!1,Z.docView.enforceCursorAssoc();return q}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(Z,$){let J=0.5-Math.max(-0.5,Math.min(0.5,Z/1000/2)),X=this.heightMap,Y=this.heightOracle,{visibleTop:Q,visibleBottom:K}=this,U=new V3(X.lineAt(Q-J*1000,q0.ByHeight,Y,0,0).from,X.lineAt(K+(1-J)*1000,q0.ByHeight,Y,0,0).to);if($){let{head:q}=$.range;if(q<U.from||q>U.to){let G=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),W=X.lineAt(q,q0.ByPos,Y,0,0),j;if($.y=="center")j=(W.top+W.bottom)/2-G/2;else if($.y=="start"||$.y=="nearest"&&q<U.from)j=W.top;else j=W.bottom-G;U=new V3(X.lineAt(j-500,q0.ByHeight,Y,0,0).from,X.lineAt(j+G+500,q0.ByHeight,Y,0,0).to)}}return U}mapViewport(Z,$){let J=$.mapPos(Z.from,-1),X=$.mapPos(Z.to,1);return new V3(this.heightMap.lineAt(J,q0.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(X,q0.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:Z,to:$},J=0){if(!this.inView)return!0;let{top:X}=this.heightMap.lineAt(Z,q0.ByPos,this.heightOracle,0,0),{bottom:Y}=this.heightMap.lineAt($,q0.ByPos,this.heightOracle,0,0),{visibleTop:Q,visibleBottom:K}=this;return(Z==0||X<=Q-Math.max(10,Math.min(-J,250)))&&($==this.state.doc.length||Y>=K+Math.max(10,Math.min(J,250)))&&(X>Q-2000&&Y<K+2000)}mapLineGaps(Z,$){if(!Z.length||$.empty)return Z;let J=[];for(let X of Z)if(!$.touchesRange(X.from,X.to))J.push(new C6($.mapPos(X.from),$.mapPos(X.to),X.size,X.displaySize));return J}ensureLineGaps(Z,$){let J=this.heightOracle.lineWrapping,X=J?1e4:2000,Y=X>>1,Q=X<<1;if(this.defaultTextDirection!=Y0.LTR&&!J)return[];let K=[],U=(G,W,j,z)=>{if(W-G<Y)return;let _=this.state.selection.main,V=[_.from];if(!_.empty)V.push(_.to);for(let N of V)if(N>G&&N<W){U(G,N-10,j,z),U(N+10,W,j,z);return}let O=YU(Z,(N)=>N.from>=j.from&&N.to<=j.to&&Math.abs(N.from-G)<Y&&Math.abs(N.to-W)<Y&&!V.some((F)=>N.from<F&&N.to>F));if(!O){if(W<j.to&&$&&J&&$.visibleRanges.some((D)=>D.from<=W&&D.to>=W)){let D=$.moveToLineBoundary(M.cursor(W),!1,!0).head;if(D>G)W=D}let N=this.gapSize(j,G,W,z),F=J||N<2000000?N:2000000;O=new C6(G,W,N,F)}K.push(O)},q=(G)=>{if(G.length<Q||G.type!=S0.Text)return;let W=XU(G.from,G.to,this.stateDeco);if(W.total<Q)return;let j=this.scrollTarget?this.scrollTarget.range.head:null,z,_;if(J){let V=X/this.heightOracle.lineLength*this.heightOracle.lineHeight,O,N;if(j!=null){let F=F6(W,j),D=((this.visibleBottom-this.visibleTop)/2+V)/G.height;O=F-D,N=F+D}else O=(this.visibleTop-G.top-V)/G.height,N=(this.visibleBottom-G.top+V)/G.height;z=R6(W,O),_=R6(W,N)}else{let V=W.total*this.heightOracle.charWidth,O=X*this.heightOracle.charWidth,N=0;if(V>2000000){for(let B of Z)if(B.from>=G.from&&B.from<G.to&&B.size!=B.displaySize&&B.from*this.heightOracle.charWidth+N<this.pixelViewport.left)N=B.size-B.displaySize}let F=this.pixelViewport.left+N,D=this.pixelViewport.right+N,A,L;if(j!=null){let B=F6(W,j),w=((D-F)/2+O)/V;A=B-w,L=B+w}else A=(F-O)/V,L=(D+O)/V;z=R6(W,A),_=R6(W,L)}if(z>G.from)U(G.from,z,G,W);if(_<G.to)U(_,G.to,G,W)};for(let G of this.viewportLines)if(Array.isArray(G.type))G.type.forEach(q);else q(G);return K}gapSize(Z,$,J,X){let Y=F6(X,J)-F6(X,$);if(this.heightOracle.lineWrapping)return Z.height*Y;else return X.total*this.heightOracle.charWidth*Y}updateLineGaps(Z){if(!C6.same(Z,this.lineGaps))this.lineGaps=Z,this.lineGapDeco=m.set(Z.map(($)=>$.draw(this,this.heightOracle.lineWrapping)))}computeVisibleRanges(Z){let $=this.stateDeco;if(this.lineGaps.length)$=$.concat(this.lineGapDeco);let J=[];i.spans($,this.viewport.from,this.viewport.to,{span(Y,Q){J.push({from:Y,to:Q})},point(){}},20);let X=0;if(J.length!=this.visibleRanges.length)X=12;else for(let Y=0;Y<J.length&&!(X&8);Y++){let Q=this.visibleRanges[Y],K=J[Y];if(Q.from!=K.from||Q.to!=K.to){if(X|=4,!(Z&&Z.mapPos(Q.from,-1)==K.from&&Z.mapPos(Q.to,1)==K.to))X|=8}}return this.visibleRanges=J,X}lineBlockAt(Z){return Z>=this.viewport.from&&Z<=this.viewport.to&&this.viewportLines.find(($)=>$.from<=Z&&$.to>=Z)||H3(this.heightMap.lineAt(Z,q0.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(Z){return Z>=this.viewportLines[0].top&&Z<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(($)=>$.top<=Z&&$.bottom>=Z)||H3(this.heightMap.lineAt(this.scaler.fromDOM(Z),q0.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(Z){let $=this.lineBlockAtHeight(Z+8);return $.from>=this.viewport.from||this.viewportLines[0].top-Z>200?$:this.viewportLines[0]}elementAtHeight(Z){return H3(this.heightMap.blockAt(this.scaler.fromDOM(Z),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class V3{constructor(Z,$){this.from=Z,this.to=$}}function XU(Z,$,J){let X=[],Y=Z,Q=0;if(i.spans(J,Z,$,{span(){},point(K,U){if(K>Y)X.push({from:Y,to:K}),Q+=K-Y;Y=U}},20),Y<$)X.push({from:Y,to:$}),Q+=$-Y;return{total:Q,ranges:X}}function R6({total:Z,ranges:$},J){if(J<=0)return $[0].from;if(J>=1)return $[$.length-1].to;let X=Math.floor(Z*J);for(let Y=0;;Y++){let{from:Q,to:K}=$[Y],U=K-Q;if(X<=U)return Q+X;X-=U}}function F6(Z,$){let J=0;for(let{from:X,to:Y}of Z.ranges){if($<=Y){J+=$-X;break}J+=Y-X}return J/Z.total}function YU(Z,$){for(let J of Z)if($(J))return J;return}var a5={toDOM(Z){return Z},fromDOM(Z){return Z},scale:1,eq(Z){return Z==this}};function o5(Z){let $=Z.facet(l6).filter((X)=>typeof X!="function"),J=Z.facet(Y8).filter((X)=>typeof X!="function");if(J.length)$.push(i.join(J));return $}class G8{constructor(Z,$,J){let X=0,Y=0,Q=0;this.viewports=J.map(({from:K,to:U})=>{let q=$.lineAt(K,q0.ByPos,Z,0,0).top,G=$.lineAt(U,q0.ByPos,Z,0,0).bottom;return X+=G-q,{from:K,to:U,top:q,bottom:G,domTop:0,domBottom:0}}),this.scale=(7000000-X)/($.height-X);for(let K of this.viewports)K.domTop=Q+(K.top-Y)*this.scale,Q=K.domBottom=K.domTop+(K.bottom-K.top),Y=K.bottom}toDOM(Z){for(let $=0,J=0,X=0;;$++){let Y=$<this.viewports.length?this.viewports[$]:null;if(!Y||Z<Y.top)return X+(Z-J)*this.scale;if(Z<=Y.bottom)return Y.domTop+(Z-Y.top);J=Y.bottom,X=Y.domBottom}}fromDOM(Z){for(let $=0,J=0,X=0;;$++){let Y=$<this.viewports.length?this.viewports[$]:null;if(!Y||Z<Y.domTop)return J+(Z-X)/this.scale;if(Z<=Y.domBottom)return Y.top+(Z-Y.domTop);J=Y.bottom,X=Y.domBottom}}eq(Z){if(!(Z instanceof G8))return!1;return this.scale==Z.scale&&this.viewports.length==Z.viewports.length&&this.viewports.every(($,J)=>$.from==Z.viewports[J].from&&$.to==Z.viewports[J].to)}}function H3(Z,$){if($.scale==1)return Z;let J=$.toDOM(Z.top),X=$.toDOM(Z.bottom);return new I1(Z.from,Z.length,J,X-J,Array.isArray(Z._content)?Z._content.map((Y)=>H3(Y,$)):Z._content)}var I6=k.define({combine:(Z)=>Z.join(" ")}),l7=k.define({combine:(Z)=>Z.indexOf(!0)>-1}),d7=R1.newName(),R$=R1.newName(),F$=R1.newName(),I$={"&light":"."+R$,"&dark":"."+F$};function c7(Z,$,J){return new R1($,{finish(X){return/&/.test(X)?X.replace(/&\w*/,(Y)=>{if(Y=="&")return Z;if(!J||!J[Y])throw RangeError(`Unsupported selector: ${Y}`);return J[Y]}):Z+" "+X}})}var QU=c7("."+d7,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},I$),KU={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},M7=x.ie&&x.ie_version<=11;class D${constructor(Z){if(this.view=Z,this.active=!1,this.editContext=null,this.selectionRange=new NZ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=Z.contentDOM,this.observer=new MutationObserver(($)=>{for(let J of $)this.queue.push(J);if((x.ie&&x.ie_version<=11||x.ios&&Z.composing)&&$.some((J)=>J.type=="childList"&&J.removedNodes.length||J.type=="characterData"&&J.oldValue.length>J.target.nodeValue.length))this.flushSoon();else this.flush()}),window.EditContext&&x.android&&Z.constructor.EDIT_CONTEXT!==!1&&!(x.chrome&&x.chrome_version<126)){if(this.editContext=new M$(Z),Z.state.facet(m1))Z.contentDOM.editContext=this.editContext.editContext}if(M7)this.onCharData=($)=>{this.queue.push({target:$.target,type:"characterData",oldValue:$.prevValue}),this.flushSoon()};if(this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia)this.printQuery=window.matchMedia("print");if(typeof ResizeObserver=="function")this.resizeScroll=new ResizeObserver(()=>{var $;if((($=this.view.docView)===null||$===void 0?void 0:$.lastUpdate)<Date.now()-75)this.onResize()}),this.resizeScroll.observe(Z.scrollDOM);if(this.addWindowListeners(this.win=Z.win),this.start(),typeof IntersectionObserver=="function")this.intersection=new IntersectionObserver(($)=>{if(this.parentCheck<0)this.parentCheck=setTimeout(this.listenForScroll.bind(this),1000);if($.length>0&&$[$.length-1].intersectionRatio>0!=this.intersecting){if(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView)this.onScrollChanged(document.createEvent("Event"))}},{threshold:[0,0.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(($)=>{if($.length>0&&$[$.length-1].intersectionRatio>0)this.onScrollChanged(document.createEvent("Event"))},{});this.listenForScroll(),this.readSelectionRange()}onScrollChanged(Z){if(this.view.inputState.runHandlers("scroll",Z),this.intersecting)this.view.measure()}onScroll(Z){if(this.intersecting)this.flush(!1);if(this.editContext)this.view.requestMeasure(this.editContext.measureReq);this.onScrollChanged(Z)}onResize(){if(this.resizeTimeout<0)this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50)}onPrint(Z){if((Z.type=="change"||!Z.type)&&!Z.matches)return;this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(Z){if(this.gapIntersection&&(Z.length!=this.gaps.length||this.gaps.some(($,J)=>$!=Z[J]))){this.gapIntersection.disconnect();for(let $ of Z)this.gapIntersection.observe($);this.gaps=Z}}onSelectionChange(Z){let $=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:J}=this,X=this.selectionRange;if(J.state.facet(m1)?J.root.activeElement!=this.dom:!F3(this.dom,X))return;let Y=X.anchorNode&&J.docView.tile.nearest(X.anchorNode);if(Y&&Y.isWidget()&&Y.widget.ignoreEvent(Z)){if(!$)this.selectionChanged=!1;return}if((x.ie&&x.ie_version<=11||x.android&&x.chrome)&&!J.state.selection.main.empty&&X.focusNode&&I3(X.focusNode,X.focusOffset,X.anchorNode,X.anchorOffset))this.flushSoon();else this.flush(!1)}readSelectionRange(){let{view:Z}=this,$=u2(Z.root);if(!$)return!1;let J=x.safari&&Z.root.nodeType==11&&Z.root.activeElement==this.dom&&UU(this.view,$)||$;if(!J||this.selectionRange.eq(J))return!1;let X=F3(this.dom,J);if(X&&!this.selectionChanged&&Z.inputState.lastFocusTime>Date.now()-200&&Z.inputState.lastTouchTime<Date.now()-300&&JK(this.dom,J))return this.view.inputState.lastFocusTime=0,Z.docView.updateSelection(),!1;if(this.selectionRange.setRange(J),X)this.selectionChanged=!0;return!0}setSelectionRange(Z,$){this.selectionRange.set(Z.node,Z.offset,$.node,$.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let Z=0,$=null;for(let J=this.dom;J;)if(J.nodeType==1){if(!$&&Z<this.scrollTargets.length&&this.scrollTargets[Z]==J)Z++;else if(!$)$=this.scrollTargets.slice(0,Z);if($)$.push(J);J=J.assignedSlot||J.parentNode}else if(J.nodeType==11)J=J.host;else break;if(Z<this.scrollTargets.length&&!$)$=this.scrollTargets.slice(0,Z);if($){for(let J of this.scrollTargets)J.removeEventListener("scroll",this.onScroll);for(let J of this.scrollTargets=$)J.addEventListener("scroll",this.onScroll)}}ignore(Z){if(!this.active)return Z();try{return this.stop(),Z()}finally{this.start(),this.clear()}}start(){if(this.active)return;if(this.observer.observe(this.dom,KU),M7)this.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.active=!0}stop(){if(!this.active)return;if(this.active=!1,this.observer.disconnect(),M7)this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(Z,$){var J;if(!this.delayedAndroidKey){let X=()=>{let Y=this.delayedAndroidKey;if(Y){if(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=Y.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&Y.force)h2(this.dom,Y.key,Y.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(X)}if(!this.delayedAndroidKey||Z=="Enter")this.delayedAndroidKey={key:Z,keyCode:$,force:this.lastChange<Date.now()-50||!!((J=this.delayedAndroidKey)===null||J===void 0?void 0:J.force)}}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){if(this.delayedFlush<0)this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()})}forceFlush(){if(this.delayedFlush>=0)this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1;this.flush()}pendingRecords(){for(let Z of this.observer.takeRecords())this.queue.push(Z);return this.queue}processRecords(){let Z=this.pendingRecords();if(Z.length)this.queue=[];let $=-1,J=-1,X=!1;for(let Y of Z){let Q=this.readMutation(Y);if(!Q)continue;if(Q.typeOver)X=!0;if($==-1)({from:$,to:J}=Q);else $=Math.min(Q.from,$),J=Math.max(Q.to,J)}return{from:$,to:J,typeOver:X}}readChange(){let{from:Z,to:$,typeOver:J}=this.processRecords(),X=this.selectionChanged&&F3(this.dom,this.selectionRange);if(Z<0&&!X)return null;if(Z>-1)this.lastChange=Date.now();this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let Y=new eZ(this.view,Z,$,J);return this.view.docView.domChanged={newSel:Y.newSel?Y.newSel.main:null},Y}flush(Z=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;if(Z)this.readSelectionRange();let $=this.readChange();if(!$)return this.view.requestMeasure(),!1;let J=this.view.state,X=$$(this.view,$);if(this.view.state==J&&($.domChanged||$.newSel&&!u6(this.view.state.selection,$.newSel.main)))this.view.update([]);return X}readMutation(Z){let $=this.view.docView.tile.nearest(Z.target);if(!$||$.isWidget())return null;if($.markDirty(Z.type=="attributes"),Z.type=="childList"){let J=t5($,Z.previousSibling||Z.target.previousSibling,-1),X=t5($,Z.nextSibling||Z.target.nextSibling,1);return{from:J?$.posAfter(J):$.posAtStart,to:X?$.posBefore(X):$.posAtEnd,typeOver:!1}}else if(Z.type=="characterData")return{from:$.posAtStart,to:$.posAtEnd,typeOver:Z.target.nodeValue==Z.oldValue};else return null}setWindow(Z){if(Z!=this.win)this.removeWindowListeners(this.win),this.win=Z,this.addWindowListeners(this.win)}addWindowListeners(Z){if(Z.addEventListener("resize",this.onResize),this.printQuery)if(this.printQuery.addEventListener)this.printQuery.addEventListener("change",this.onPrint);else this.printQuery.addListener(this.onPrint);else Z.addEventListener("beforeprint",this.onPrint);Z.addEventListener("scroll",this.onScroll),Z.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(Z){if(Z.removeEventListener("scroll",this.onScroll),Z.removeEventListener("resize",this.onResize),this.printQuery)if(this.printQuery.removeEventListener)this.printQuery.removeEventListener("change",this.onPrint);else this.printQuery.removeListener(this.onPrint);else Z.removeEventListener("beforeprint",this.onPrint);Z.document.removeEventListener("selectionchange",this.onSelectionChange)}update(Z){if(this.editContext){if(this.editContext.update(Z),Z.startState.facet(m1)!=Z.state.facet(m1))Z.view.contentDOM.editContext=Z.state.facet(m1)?this.editContext.editContext:null}}destroy(){var Z,$,J;this.stop(),(Z=this.intersection)===null||Z===void 0||Z.disconnect(),($=this.gapIntersection)===null||$===void 0||$.disconnect(),(J=this.resizeScroll)===null||J===void 0||J.disconnect();for(let X of this.scrollTargets)X.removeEventListener("scroll",this.onScroll);if(this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext)this.view.contentDOM.editContext=null,this.editContext.destroy()}}function t5(Z,$,J){while($){let X=M0.get($);if(X&&X.parent==Z)return X;let Y=$.parentNode;$=Y!=Z.dom?Y:J>0?$.nextSibling:$.previousSibling}return null}function e5(Z,$){let{startContainer:J,startOffset:X,endContainer:Y,endOffset:Q}=$,K=Z.docView.domAtPos(Z.state.selection.main.anchor,1);if(I3(K.node,K.offset,Y,Q))[J,X,Y,Q]=[Y,Q,J,X];return{anchorNode:J,anchorOffset:X,focusNode:Y,focusOffset:Q}}function UU(Z,$){if($.getComposedRanges){let Y=$.getComposedRanges(Z.root)[0];if(Y)return e5(Z,Y)}let J=null;function X(Y){Y.preventDefault(),Y.stopImmediatePropagation(),J=Y.getTargetRanges()[0]}return Z.contentDOM.addEventListener("beforeinput",X,!0),Z.dom.ownerDocument.execCommand("indent"),Z.contentDOM.removeEventListener("beforeinput",X,!0),J?e5(Z,J):null}class M${constructor(Z){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(Z.state);let $=this.editContext=new window.EditContext({text:Z.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,Z.state.selection.main.anchor))),selectionEnd:this.toContextPos(Z.state.selection.main.head)});this.handlers.textupdate=(J)=>{let X=Z.state.selection.main,{anchor:Y,head:Q}=X,K=this.toEditorPos(J.updateRangeStart),U=this.toEditorPos(J.updateRangeEnd);if(Z.inputState.composing>=0&&!this.composing)this.composing={contextBase:J.updateRangeStart,editorBase:K,drifted:!1};let q=U-K>J.text.length;if(K==this.from&&Y<this.from)K=Y;else if(U==this.to&&Y>this.to)U=Y;let G=J$(Z.state.sliceDoc(K,U),J.text,(q?X.from:X.to)-K,q?"end":null);if(!G){let j=M.single(this.toEditorPos(J.selectionStart),this.toEditorPos(J.selectionEnd));if(!u6(j,X))Z.dispatch({selection:j,userEvent:"select"});return}let W={from:G.from+K,to:G.toA+K,insert:e.of(J.text.slice(G.from,G.toB).split(`
`))};if((x.mac||x.android)&&W.from==Q-1&&/^\. ?$/.test(J.text)&&Z.contentDOM.getAttribute("autocorrect")=="off")W={from:K,to:U,insert:e.of([J.text.replace("."," ")])};if(this.pendingContextChange=W,!Z.state.readOnly){let j=this.to-this.from+(W.to-W.from+W.insert.length);K8(Z,W,M.single(this.toEditorPos(J.selectionStart,j),this.toEditorPos(J.selectionEnd,j)))}if(this.pendingContextChange)this.revertPending(Z.state),this.setSelection(Z.state);if(W.from<W.to&&!W.insert.length&&Z.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test($.text.slice(Math.max(0,J.updateRangeStart-1),Math.min($.text.length,J.updateRangeStart+1))))this.handlers.compositionend(J)},this.handlers.characterboundsupdate=(J)=>{let X=[],Y=null;for(let Q=this.toEditorPos(J.rangeStart),K=this.toEditorPos(J.rangeEnd);Q<K;Q++){let U=Z.coordsForChar(Q);Y=U&&new DOMRect(U.left,U.top,U.right-U.left,U.bottom-U.top)||Y||new DOMRect,X.push(Y)}$.updateCharacterBounds(J.rangeStart,X)},this.handlers.textformatupdate=(J)=>{let X=[];for(let Y of J.getTextFormats()){let{underlineStyle:Q,underlineThickness:K}=Y;if(!/none/i.test(Q)&&!/none/i.test(K)){let U=this.toEditorPos(Y.rangeStart),q=this.toEditorPos(Y.rangeEnd);if(U<q){let G=`text-decoration: underline ${/^[a-z]/.test(Q)?Q+" ":Q=="Dashed"?"dashed ":Q=="Squiggle"?"wavy ":""}${/thin/i.test(K)?1:2}px`;X.push(m.mark({attributes:{style:G}}).range(U,q))}}}Z.dispatch({effects:hZ.of(m.set(X))})},this.handlers.compositionstart=()=>{if(Z.inputState.composing<0)Z.inputState.composing=0,Z.inputState.compositionFirstChange=!0},this.handlers.compositionend=()=>{if(Z.inputState.composing=-1,Z.inputState.compositionFirstChange=null,this.composing){let{drifted:J}=this.composing;if(this.composing=null,J)this.reset(Z.state)}};for(let J in this.handlers)$.addEventListener(J,this.handlers[J]);this.measureReq={read:(J)=>{this.editContext.updateControlBounds(J.contentDOM.getBoundingClientRect());let X=u2(J.root);if(X&&X.rangeCount)this.editContext.updateSelectionBounds(X.getRangeAt(0).getBoundingClientRect())}}}applyEdits(Z){let $=0,J=!1,X=this.pendingContextChange;if(Z.changes.iterChanges((Y,Q,K,U,q)=>{if(J)return;let G=q.length-(Q-Y);if(X&&Q>=X.to)if(X.from==Y&&X.to==Q&&X.insert.eq(q)){X=this.pendingContextChange=null,$+=G,this.to+=G;return}else X=null,this.revertPending(Z.state);if(Y+=$,Q+=$,Q<=this.from)this.from+=G,this.to+=G;else if(Y<this.to){if(Y<this.from||Q>this.to||this.to-this.from+q.length>30000){J=!0;return}this.editContext.updateText(this.toContextPos(Y),this.toContextPos(Q),q.toString()),this.to+=G}$+=G}),X&&!J)this.revertPending(Z.state);return!J}update(Z){let $=this.pendingContextChange,J=Z.startState.selection.main;if(this.composing&&(this.composing.drifted||!Z.changes.touchesRange(J.from,J.to)&&Z.transactions.some((X)=>!X.isUserEvent("input.type")&&X.changes.touchesRange(this.from,this.to))))this.composing.drifted=!0,this.composing.editorBase=Z.changes.mapPos(this.composing.editorBase);else if(!this.applyEdits(Z)||!this.rangeIsValid(Z.state))this.pendingContextChange=null,this.reset(Z.state);else if(Z.docChanged||Z.selectionSet||$)this.setSelection(Z.state);if(Z.geometryChanged||Z.docChanged||Z.selectionSet)Z.view.requestMeasure(this.measureReq)}resetRange(Z){let{head:$}=Z.selection.main;this.from=Math.max(0,$-1e4),this.to=Math.min(Z.doc.length,$+1e4)}reset(Z){this.resetRange(Z),this.editContext.updateText(0,this.editContext.text.length,Z.doc.sliceString(this.from,this.to)),this.setSelection(Z)}revertPending(Z){let $=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos($.from),this.toContextPos($.from+$.insert.length),Z.doc.sliceString($.from,$.to))}setSelection(Z){let{main:$}=Z.selection,J=this.toContextPos(Math.max(this.from,Math.min(this.to,$.anchor))),X=this.toContextPos($.head);if(this.editContext.selectionStart!=J||this.editContext.selectionEnd!=X)this.editContext.updateSelection(J,X)}rangeIsValid(Z){let{head:$}=Z.selection.main;return!(this.from>0&&$-this.from<500||this.to<Z.doc.length&&this.to-$<500||this.to-this.from>30000)}toEditorPos(Z,$=this.to-this.from){Z=Math.min(Z,$);let J=this.composing;return J&&J.drifted?J.editorBase+(Z-J.contextBase):Z+this.from}toContextPos(Z){let $=this.composing;return $&&$.drifted?$.contextBase+(Z-$.editorBase):Z-this.from}destroy(){for(let Z in this.handlers)this.editContext.removeEventListener(Z,this.handlers[Z])}}class C{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(Z={}){var $;if(this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),Z.parent)Z.parent.appendChild(this.dom);let{dispatch:J}=Z;if(this.dispatchTransactions=Z.dispatchTransactions||J&&((X)=>X.forEach((Y)=>J(Y,this)))||((X)=>this.update(X)),this.dispatch=this.dispatch.bind(this),this._root=Z.root||$K(Z.parent)||document,this.viewState=new p7(Z.state||n.create(Z)),Z.scrollTo&&Z.scrollTo.is(V6))this.viewState.scrollTarget=Z.scrollTo.value.clip(this.viewState.state);this.plugins=this.state.facet(S2).map((X)=>new B6(X));for(let X of this.plugins)X.update(this);if(this.observer=new D$(this),this.inputState=new X$(this),this.inputState.ensureHandlers(this.plugins),this.docView=new h7(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),($=document.fonts)===null||$===void 0?void 0:$.ready)document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...Z){let $=Z.length==1&&Z[0]instanceof H0?Z:Z.length==1&&Array.isArray(Z[0])?Z[0]:[this.state.update(...Z)];this.dispatchTransactions($,this)}update(Z){if(this.updateState!=0)throw Error("Calls to EditorView.update are not allowed while an update is in progress");let $=!1,J=!1,X,Y=this.state;for(let j of Z){if(j.startState!=Y)throw RangeError("Trying to update state with a transaction that doesn't start from the previous state.");Y=j.state}if(this.destroyed){this.viewState.state=Y;return}let Q=this.hasFocus,K=0,U=null;if(Z.some((j)=>j.annotation(W$)))this.inputState.notifiedFocused=Q,K=1;else if(Q!=this.inputState.notifiedFocused){if(this.inputState.notifiedFocused=Q,U=j$(Y,Q),!U)K=1}let q=this.observer.delayedAndroidKey,G=null;if(q){if(this.observer.clearDelayedAndroidKey(),G=this.observer.readChange(),G&&!this.state.doc.eq(Y.doc)||!this.state.selection.eq(Y.selection))G=null}else this.observer.clear();if(Y.facet(n.phrases)!=this.state.facet(n.phrases))return this.setState(Y);X=h6.create(this,Y,Z),X.flags|=K;let W=this.viewState.scrollTarget;try{this.updateState=2;for(let j of Z){if(W)W=W.map(j.changes);if(j.scrollIntoView){let{main:z}=j.state.selection;W=new v2(z.empty?z:M.cursor(z.head,z.head>z.anchor?-1:1))}for(let z of j.effects)if(z.is(V6))W=z.value.clip(this.state)}if(this.viewState.update(X,W),this.bidiCache=g6.update(this.bidiCache,X.changes),!X.empty)this.updatePlugins(X),this.inputState.update(X);if($=this.docView.update(X),this.state.facet(_3)!=this.styleModules)this.mountStyles();J=this.updateAttrs(),this.showAnnouncements(Z),this.docView.updateSelection($,Z.some((j)=>j.isUserEvent("select.pointer")))}finally{this.updateState=0}if(X.startState.facet(I6)!=X.state.facet(I6))this.viewState.mustMeasureContent=!0;if($||J||W||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)this.requestMeasure();if($)this.docViewUpdate();if(!X.empty)for(let j of this.state.facet(w7))try{j(X)}catch(z){k0(this.state,z,"update listener")}if(U||G)Promise.resolve().then(()=>{if(U&&this.state==U.startState)this.dispatch(U);if(G){if(!$$(this,G)&&q.force)h2(this.contentDOM,q.key,q.keyCode)}})}setState(Z){if(this.updateState!=0)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=Z;return}this.updateState=2;let $=this.hasFocus;try{for(let J of this.plugins)J.destroy(this);this.viewState=new p7(Z),this.plugins=Z.facet(S2).map((J)=>new B6(J)),this.pluginMap.clear();for(let J of this.plugins)J.update(this);this.docView.destroy(),this.docView=new h7(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}if($)this.focus();this.requestMeasure()}updatePlugins(Z){let $=Z.startState.facet(S2),J=Z.state.facet(S2);if($!=J){let X=[];for(let Y of J){let Q=$.indexOf(Y);if(Q<0)X.push(new B6(Y));else{let K=this.plugins[Q];K.mustUpdate=Z,X.push(K)}}for(let Y of this.plugins)if(Y.mustUpdate!=Z)Y.destroy(this);this.plugins=X,this.pluginMap.clear()}else for(let X of this.plugins)X.mustUpdate=Z;for(let X=0;X<this.plugins.length;X++)this.plugins[X].update(this);if($!=J)this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let Z of this.plugins){let $=Z.value;if($&&$.docViewUpdate)try{$.docViewUpdate(this)}catch(J){k0(this.state,J,"doc view update listener")}}}measure(Z=!0){if(this.destroyed)return;if(this.measureScheduled>-1)this.win.cancelAnimationFrame(this.measureScheduled);if(this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}if(this.measureScheduled=0,Z)this.observer.forceFlush();let $=null,J=this.scrollDOM,X=J.scrollTop*this.scaleY,{scrollAnchorPos:Y,scrollAnchorHeight:Q}=this.viewState;if(Math.abs(X-this.viewState.scrollTop)>1)Q=-1;this.viewState.scrollAnchorHeight=-1;try{for(let K=0;;K++){if(Q<0)if(FZ(J))Y=-1,Q=this.viewState.heightMap.height;else{let z=this.viewState.scrollAnchorAt(X);Y=z.from,Q=z.top}this.updateState=1;let U=this.viewState.measure(this);if(!U&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(K>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let q=[];if(!(U&4))[this.measureRequests,q]=[q,this.measureRequests];let G=q.map((z)=>{try{return z.read(this)}catch(_){return k0(this.state,_),ZZ}}),W=h6.create(this,this.state,[]),j=!1;if(W.flags|=U,!$)$=W;else $.flags|=U;if(this.updateState=2,!W.empty){if(this.updatePlugins(W),this.inputState.update(W),this.updateAttrs(),j=this.docView.update(W),j)this.docViewUpdate()}for(let z=0;z<q.length;z++)if(G[z]!=ZZ)try{let _=q[z];if(_.write)_.write(G[z],this)}catch(_){k0(this.state,_)}if(j)this.docView.updateSelection(!0);if(!W.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,Q=-1;continue}else{let _=(Y<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(Y).top)-Q;if(_>1||_<-1){X=X+_,J.scrollTop=X/this.scaleY,Q=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if($&&!$.empty)for(let K of this.state.facet(w7))K($)}get themeClasses(){return d7+" "+(this.state.facet(l7)?F$:R$)+" "+this.state.facet(I6)}updateAttrs(){let Z=$Z(this,vZ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),$={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:!this.state.facet(m1)?"false":"true",class:"cm-content",style:`${x.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};if(this.state.readOnly)$["aria-readonly"]="true";$Z(this,X8,$);let J=this.observer.ignore(()=>{let X=k5(this.contentDOM,this.contentAttrs,$),Y=k5(this.dom,this.editorAttrs,Z);return X||Y});return this.editorAttrs=Z,this.contentAttrs=$,J}showAnnouncements(Z){let $=!0;for(let J of Z)for(let X of J.effects)if(X.is(C.announce)){if($)this.announceDOM.textContent="";$=!1;let Y=this.announceDOM.appendChild(document.createElement("div"));Y.textContent=X.value}}mountStyles(){this.styleModules=this.state.facet(_3);let Z=this.state.facet(C.cspNonce);R1.mount(this.root,this.styleModules.concat(QU).reverse(),Z?{nonce:Z}:void 0)}readMeasured(){if(this.updateState==2)throw Error("Reading the editor layout isn't allowed during an update");if(this.updateState==0&&this.measureScheduled>-1)this.measure(!1)}requestMeasure(Z){if(this.measureScheduled<0)this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure());if(Z){if(this.measureRequests.indexOf(Z)>-1)return;if(Z.key!=null){for(let $=0;$<this.measureRequests.length;$++)if(this.measureRequests[$].key===Z.key){this.measureRequests[$]=Z;return}}this.measureRequests.push(Z)}}plugin(Z){let $=this.pluginMap.get(Z);if($===void 0||$&&$.plugin!=Z)this.pluginMap.set(Z,$=this.plugins.find((J)=>J.plugin==Z)||null);return $&&$.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(Z){return this.readMeasured(),this.viewState.elementAtHeight(Z)}lineBlockAtHeight(Z){return this.readMeasured(),this.viewState.lineBlockAtHeight(Z)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(Z){return this.viewState.lineBlockAt(Z)}get contentHeight(){return this.viewState.contentHeight}moveByChar(Z,$,J){return D7(this,Z,u5(this,Z,$,J))}moveByGroup(Z,$){return D7(this,Z,u5(this,Z,$,(J)=>yK(this,Z.head,J)))}visualLineSide(Z,$){let J=this.bidiSpans(Z),X=this.textDirectionAt(Z.from),Y=J[$?J.length-1:0];return M.cursor(Y.side($,X)+Z.from,Y.forward(!$,X)?1:-1)}moveToLineBoundary(Z,$,J=!0){return TK(this,Z,$,J)}moveVertically(Z,$,J){return D7(this,Z,bK(this,Z,$,J))}domAtPos(Z,$=1){return this.docView.domAtPos(Z,$)}posAtDOM(Z,$=0){return this.docView.posFromDOM(Z,$)}posAtCoords(Z,$=!0){this.readMeasured();let J=m7(this,Z,$);return J&&J.pos}posAndSideAtCoords(Z,$=!0){return this.readMeasured(),m7(this,Z,$)}coordsAtPos(Z,$=1){this.readMeasured();let J=this.docView.coordsAt(Z,$);if(!J||J.left==J.right)return J;let X=this.state.doc.lineAt(Z),Y=this.bidiSpans(X),Q=Y[b1.find(Y,Z-X.from,-1,$)];return w6(J,Q.dir==Y0.LTR==$>0)}coordsForChar(Z){return this.readMeasured(),this.docView.coordsForChar(Z)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(Z){if(!this.state.facet(SZ)||Z<this.viewport.from||Z>this.viewport.to)return this.textDirection;return this.readMeasured(),this.docView.textDirectionAt(Z)}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(Z){if(Z.length>qU)return BZ(Z.length);let $=this.textDirectionAt(Z.from),J;for(let Y of this.bidiCache)if(Y.from==Z.from&&Y.dir==$&&(Y.fresh||LZ(Y.isolates,J=w5(this,Z))))return Y.order;if(!J)J=w5(this,Z);let X=GK(Z.text,$,J);return this.bidiCache.push(new g6(Z.from,Z.to,$,J,!0,X)),X}get hasFocus(){var Z;return(this.dom.ownerDocument.hasFocus()||x.safari&&((Z=this.inputState)===null||Z===void 0?void 0:Z.lastContextMenu)>Date.now()-30000)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{RZ(this.contentDOM),this.docView.updateSelection()})}setRoot(Z){if(this._root!=Z)this._root=Z,this.observer.setWindow((Z.nodeType==9?Z:Z.ownerDocument).defaultView||window),this.mountStyles()}destroy(){if(this.root.activeElement==this.contentDOM)this.contentDOM.blur();for(let Z of this.plugins)Z.destroy(this);if(this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1)this.win.cancelAnimationFrame(this.measureScheduled);this.destroyed=!0}static scrollIntoView(Z,$={}){return V6.of(new v2(typeof Z=="number"?M.cursor(Z):Z,$.y,$.x,$.yMargin,$.xMargin))}scrollSnapshot(){let{scrollTop:Z,scrollLeft:$}=this.scrollDOM,J=this.viewState.scrollAnchorAt(Z);return V6.of(new v2(M.cursor(J.from),"start","start",J.top-Z,$,!0))}setTabFocusMode(Z){if(Z==null)this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1;else if(typeof Z=="boolean")this.inputState.tabFocusMode=Z?0:-1;else if(this.inputState.tabFocusMode!=0)this.inputState.tabFocusMode=Date.now()+Z}static domEventHandlers(Z){return j0.define(()=>({}),{eventHandlers:Z})}static domEventObservers(Z){return j0.define(()=>({}),{eventObservers:Z})}static theme(Z,$){let J=R1.newName(),X=[I6.of(J),_3.of(c7(`.${J}`,Z))];if($&&$.dark)X.push(l7.of(!0));return X}static baseTheme(Z){return N1.lowest(_3.of(c7("."+d7,Z,I$)))}static findFromDOM(Z){var $;let J=Z.querySelector(".cm-content"),X=J&&M0.get(J)||M0.get(Z);return(($=X===null||X===void 0?void 0:X.root)===null||$===void 0?void 0:$.view)||null}}C.styleModule=_3;C.inputHandler=bZ;C.clipboardInputFilter=$8;C.clipboardOutputFilter=J8;C.scrollHandler=wZ;C.focusChangeEffect=kZ;C.perLineTextDirection=SZ;C.exceptionSink=yZ;C.updateListener=w7;C.editable=m1;C.mouseSelectionStyle=TZ;C.dragMovesSelection=CZ;C.clickAddsSelectionRange=PZ;C.decorations=l6;C.blockWrappers=uZ;C.outerDecorations=Y8;C.atomicRanges=T3;C.bidiIsolatedRanges=mZ;C.scrollMargins=gZ;C.darkTheme=l7;C.cspNonce=k.define({combine:(Z)=>Z.length?Z[0]:""});C.contentAttributes=X8;C.editorAttributes=vZ;C.lineWrapping=C.contentAttributes.of({class:"cm-lineWrapping"});C.announce=p.define();var qU=4096,ZZ={};class g6{constructor(Z,$,J,X,Y,Q){this.from=Z,this.to=$,this.dir=J,this.isolates=X,this.fresh=Y,this.order=Q}static update(Z,$){if($.empty&&!Z.some((Y)=>Y.fresh))return Z;let J=[],X=Z.length?Z[Z.length-1].dir:Y0.LTR;for(let Y=Math.max(0,Z.length-10);Y<Z.length;Y++){let Q=Z[Y];if(Q.dir==X&&!$.touchesRange(Q.from,Q.to))J.push(new g6($.mapPos(Q.from,1),$.mapPos(Q.to,-1),Q.dir,Q.isolates,!1,Q.order))}return J}}function $Z(Z,$,J){for(let X=Z.state.facet($),Y=X.length-1;Y>=0;Y--){let Q=X[Y],K=typeof Q=="function"?Q(Z):Q;if(K)t7(K,J)}return J}var GU=x.mac?"mac":x.windows?"win":x.linux?"linux":"key";function WU(Z,$){let J=Z.split(/-(?!$)/),X=J[J.length-1];if(X=="Space")X=" ";let Y,Q,K,U;for(let q=0;q<J.length-1;++q){let G=J[q];if(/^(cmd|meta|m)$/i.test(G))U=!0;else if(/^a(lt)?$/i.test(G))Y=!0;else if(/^(c|ctrl|control)$/i.test(G))Q=!0;else if(/^s(hift)?$/i.test(G))K=!0;else if(/^mod$/i.test(G))if($=="mac")U=!0;else Q=!0;else throw Error("Unrecognized modifier name: "+G)}if(Y)X="Alt-"+X;if(Q)X="Ctrl-"+X;if(U)X="Meta-"+X;if(K)X="Shift-"+X;return X}function D6(Z,$,J){if($.altKey)Z="Alt-"+Z;if($.ctrlKey)Z="Ctrl-"+Z;if($.metaKey)Z="Meta-"+Z;if(J!==!1&&$.shiftKey)Z="Shift-"+Z;return Z}var jU=N1.default(C.domEventHandlers({keydown(Z,$){return B$(A$($.state),Z,$,"editor")}})),k3=k.define({enables:jU}),JZ=new WeakMap;function A$(Z){let $=Z.facet(k3),J=JZ.get($);if(!J)JZ.set($,J=_U($.reduce((X,Y)=>X.concat(Y),[])));return J}function L$(Z,$,J){return B$(A$(Z.state),$,Z,J)}var c1=null,zU=4000;function _U(Z,$=GU){let J=Object.create(null),X=Object.create(null),Y=(K,U)=>{let q=X[K];if(q==null)X[K]=U;else if(q!=U)throw Error("Key binding "+K+" is used both as a regular binding and as a multi-stroke prefix")},Q=(K,U,q,G,W)=>{var j,z;let _=J[K]||(J[K]=Object.create(null)),V=U.split(/ (?!$)/).map((F)=>WU(F,$));for(let F=1;F<V.length;F++){let D=V.slice(0,F).join(" ");if(Y(D,!0),!_[D])_[D]={preventDefault:!0,stopPropagation:!1,run:[(A)=>{let L=c1={view:A,prefix:D,scope:K};return setTimeout(()=>{if(c1==L)c1=null},zU),!0}]}}let O=V.join(" ");Y(O,!1);let N=_[O]||(_[O]={preventDefault:!1,stopPropagation:!1,run:((z=(j=_._any)===null||j===void 0?void 0:j.run)===null||z===void 0?void 0:z.slice())||[]});if(q)N.run.push(q);if(G)N.preventDefault=!0;if(W)N.stopPropagation=!0};for(let K of Z){let U=K.scope?K.scope.split(" "):["editor"];if(K.any)for(let G of U){let W=J[G]||(J[G]=Object.create(null));if(!W._any)W._any={preventDefault:!1,stopPropagation:!1,run:[]};let{any:j}=K;for(let z in W)W[z].run.push((_)=>j(_,s7))}let q=K[$]||K.key;if(!q)continue;for(let G of U)if(Q(G,q,K.run,K.preventDefault,K.stopPropagation),K.shift)Q(G,"Shift-"+q,K.shift,K.preventDefault,K.stopPropagation)}return J}var s7=null;function B$(Z,$,J,X){s7=$;let Y=P5($),Q=y0(Y,0),K=i0(Q)==Y.length&&Y!=" ",U="",q=!1,G=!1,W=!1;if(c1&&c1.view==J&&c1.scope==X){if(U=c1.prefix+" ",Q$.indexOf($.keyCode)<0)G=!0,c1=null}let j=new Set,z=(N)=>{if(N){for(let F of N.run)if(!j.has(F)){if(j.add(F),F(J)){if(N.stopPropagation)W=!0;return!0}}if(N.preventDefault){if(N.stopPropagation)W=!0;G=!0}}return!1},_=Z[X],V,O;if(_){if(z(_[U+D6(Y,$,!K)]))q=!0;else if(K&&($.altKey||$.metaKey||$.ctrlKey)&&!(x.windows&&$.ctrlKey&&$.altKey)&&!(x.mac&&$.altKey&&!($.ctrlKey||$.metaKey))&&(V=u1[$.keyCode])&&V!=Y){if(z(_[U+D6(V,$,!0)]))q=!0;else if($.shiftKey&&(O=k2[$.keyCode])!=Y&&O!=V&&z(_[U+D6(O,$,!1)]))q=!0}else if(K&&$.shiftKey&&z(_[U+D6(Y,$,!0)]))q=!0;if(!q&&z(_._any))q=!0}if(G)q=!0;if(q&&W)$.stopPropagation();return s7=null,q}class S3{constructor(Z,$,J,X,Y){this.className=Z,this.left=$,this.top=J,this.width=X,this.height=Y}draw(){let Z=document.createElement("div");return Z.className=this.className,this.adjust(Z),Z}update(Z,$){if($.className!=this.className)return!1;return this.adjust(Z),!0}adjust(Z){if(Z.style.left=this.left+"px",Z.style.top=this.top+"px",this.width!=null)Z.style.width=this.width+"px";Z.style.height=this.height+"px"}eq(Z){return this.left==Z.left&&this.top==Z.top&&this.width==Z.width&&this.height==Z.height&&this.className==Z.className}static forRange(Z,$,J){if(J.empty){let X=Z.coordsAtPos(J.head,J.assoc||1);if(!X)return[];let Y=E$(Z);return[new S3($,X.left-Y.left,X.top-Y.top,null,X.bottom-X.top)]}else return OU(Z,$,J)}}function E$(Z){let $=Z.scrollDOM.getBoundingClientRect();return{left:(Z.textDirection==Y0.LTR?$.left:$.right-Z.scrollDOM.clientWidth*Z.scaleX)-Z.scrollDOM.scrollLeft*Z.scaleX,top:$.top-Z.scrollDOM.scrollTop*Z.scaleY}}function XZ(Z,$,J,X){let Y=Z.coordsAtPos($,J*2);if(!Y)return X;let Q=Z.dom.getBoundingClientRect(),K=(Y.top+Y.bottom)/2,U=Z.posAtCoords({x:Q.left+1,y:K}),q=Z.posAtCoords({x:Q.right-1,y:K});if(U==null||q==null)return X;return{from:Math.max(X.from,Math.min(U,q)),to:Math.min(X.to,Math.max(U,q))}}function OU(Z,$,J){if(J.to<=Z.viewport.from||J.from>=Z.viewport.to)return[];let X=Math.max(J.from,Z.viewport.from),Y=Math.min(J.to,Z.viewport.to),Q=Z.textDirection==Y0.LTR,K=Z.contentDOM,U=K.getBoundingClientRect(),q=E$(Z),G=K.querySelector(".cm-line"),W=G&&window.getComputedStyle(G),j=U.left+(W?parseInt(W.paddingLeft)+Math.min(0,parseInt(W.textIndent)):0),z=U.right-(W?parseInt(W.paddingRight):0),_=u7(Z,X,1),V=u7(Z,Y,-1),O=_.type==S0.Text?_:null,N=V.type==S0.Text?V:null;if(O&&(Z.lineWrapping||_.widgetLineBreaks))O=XZ(Z,X,1,O);if(N&&(Z.lineWrapping||V.widgetLineBreaks))N=XZ(Z,Y,-1,N);if(O&&N&&O.from==N.from&&O.to==N.to)return D(A(J.from,J.to,O));else{let B=O?A(J.from,null,O):L(_,!1),w=N?A(null,J.to,N):L(V,!0),S=[];if((O||_).to<(N||V).from-(O&&N?1:0)||_.widgetLineBreaks>1&&B.bottom+Z.defaultLineHeight/2<w.top)S.push(F(j,B.bottom,z,w.top));else if(B.bottom<w.top&&Z.elementAtHeight((B.bottom+w.top)/2).type==S0.Text)B.bottom=w.top=(B.bottom+w.top)/2;return D(B).concat(S).concat(D(w))}function F(B,w,S,d){return new S3($,B-q.left,w-q.top,S-B,d-w)}function D({top:B,bottom:w,horizontal:S}){let d=[];for(let r=0;r<S.length;r+=2)d.push(F(S[r],B,S[r+1],w));return d}function A(B,w,S){let d=1e9,r=-1e9,T=[];function P(g,o,F0,P0,$1){let L0=Z.coordsAtPos(g,g==S.to?-2:2),R=Z.coordsAtPos(F0,F0==S.from?2:-2);if(!L0||!R)return;if(d=Math.min(L0.top,R.top,d),r=Math.max(L0.bottom,R.bottom,r),$1==Y0.LTR)T.push(Q&&o?j:L0.left,Q&&P0?z:R.right);else T.push(!Q&&P0?j:R.left,!Q&&o?z:L0.right)}let E=B!==null&&B!==void 0?B:S.from,y=w!==null&&w!==void 0?w:S.to;for(let g of Z.visibleRanges)if(g.to>E&&g.from<y)for(let o=Math.max(g.from,E),F0=Math.min(g.to,y);;){let P0=Z.state.doc.lineAt(o);for(let $1 of Z.bidiSpans(P0)){let L0=$1.from+P0.from,R=$1.to+P0.from;if(L0>=F0)break;if(R>o)P(Math.max(L0,o),B==null&&L0<=E,Math.min(R,F0),w==null&&R>=y,$1.dir)}if(o=P0.to+1,o>=F0)break}if(T.length==0)P(E,B==null,y,w==null,Z.textDirection);return{top:d,bottom:r,horizontal:T}}function L(B,w){let S=U.top+(w?B.top:B.bottom);return{top:S,bottom:S,horizontal:[]}}}function VU(Z,$){return Z.constructor==$.constructor&&Z.eq($)}class P${constructor(Z,$){if(this.view=Z,this.layer=$,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=Z.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),$.above)this.dom.classList.add("cm-layer-above");if($.class)this.dom.classList.add($.class);if(this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(Z.state),Z.requestMeasure(this.measureReq),$.mount)$.mount(this.dom,Z)}update(Z){if(Z.startState.facet(T6)!=Z.state.facet(T6))this.setOrder(Z.state);if(this.layer.update(Z,this.dom)||Z.geometryChanged)this.scale(),Z.view.requestMeasure(this.measureReq)}docViewUpdate(Z){if(this.layer.updateOnDocViewUpdate!==!1)Z.requestMeasure(this.measureReq)}setOrder(Z){let $=0,J=Z.facet(T6);while($<J.length&&J[$]!=this.layer)$++;this.dom.style.zIndex=String((this.layer.above?150:-1)-$)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:Z,scaleY:$}=this.view;if(Z!=this.scaleX||$!=this.scaleY)this.scaleX=Z,this.scaleY=$,this.dom.style.transform=`scale(${1/Z}, ${1/$})`}draw(Z){if(Z.length!=this.drawn.length||Z.some(($,J)=>!VU($,this.drawn[J]))){let $=this.dom.firstChild,J=0;for(let X of Z)if(X.update&&$&&X.constructor&&this.drawn[J].constructor&&X.update($,this.drawn[J]))$=$.nextSibling,J++;else this.dom.insertBefore(X.draw(),$);while($){let X=$.nextSibling;$.remove(),$=X}if(this.drawn=Z,x.safari&&x.safari_version>=26)this.dom.style.display=this.dom.firstChild?"":"none"}}destroy(){if(this.layer.destroy)this.layer.destroy(this.dom,this.view);this.dom.remove()}}var T6=k.define();function C$(Z){return[j0.define(($)=>new P$($,Z)),T6.of(Z)]}var E3=k.define({combine(Z){return h0(Z,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:($,J)=>Math.min($,J),drawRangeCursor:($,J)=>$||J})}});function T$(Z={}){return[E3.of(Z),HU,NU,RU,xZ.of(!0)]}function y$(Z){return Z.startState.facet(E3)!=Z.state.facet(E3)}var HU=C$({above:!0,markers(Z){let{state:$}=Z,J=$.facet(E3),X=[];for(let Y of $.selection.ranges){let Q=Y==$.selection.main;if(Y.empty||J.drawRangeCursor){let K=Q?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",U=Y.empty?Y:M.cursor(Y.head,Y.head>Y.anchor?-1:1);for(let q of S3.forRange(Z,K,U))X.push(q)}}return X},update(Z,$){if(Z.transactions.some((X)=>X.selection))$.style.animationName=$.style.animationName=="cm-blink"?"cm-blink2":"cm-blink";let J=y$(Z);if(J)YZ(Z.state,$);return Z.docChanged||Z.selectionSet||J},mount(Z,$){YZ($.state,Z)},class:"cm-cursorLayer"});function YZ(Z,$){$.style.animationDuration=Z.facet(E3).cursorBlinkRate+"ms"}var NU=C$({above:!1,markers(Z){return Z.state.selection.ranges.map(($)=>$.empty?[]:S3.forRange(Z,"cm-selectionBackground",$)).reduce(($,J)=>$.concat(J))},update(Z,$){return Z.docChanged||Z.selectionSet||Z.viewportChanged||y$(Z)},class:"cm-selectionLayer"}),RU=N1.highest(C.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),b$=p.define({map(Z,$){return Z==null?null:$.mapPos(Z)}}),N3=z0.define({create(){return null},update(Z,$){if(Z!=null)Z=$.changes.mapPos(Z);return $.effects.reduce((J,X)=>X.is(b$)?X.value:J,Z)}}),FU=j0.fromClass(class{constructor(Z){this.view=Z,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(Z){var $;let J=Z.state.field(N3);if(J==null){if(this.cursor!=null)($=this.cursor)===null||$===void 0||$.remove(),this.cursor=null}else{if(!this.cursor)this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor";if(Z.startState.field(N3)!=J||Z.docChanged||Z.geometryChanged)this.view.requestMeasure(this.measureReq)}}readPos(){let{view:Z}=this,$=Z.state.field(N3),J=$!=null&&Z.coordsAtPos($);if(!J)return null;let X=Z.scrollDOM.getBoundingClientRect();return{left:J.left-X.left+Z.scrollDOM.scrollLeft*Z.scaleX,top:J.top-X.top+Z.scrollDOM.scrollTop*Z.scaleY,height:J.bottom-J.top}}drawCursor(Z){if(this.cursor){let{scaleX:$,scaleY:J}=this.view;if(Z)this.cursor.style.left=Z.left/$+"px",this.cursor.style.top=Z.top/J+"px",this.cursor.style.height=Z.height/J+"px";else this.cursor.style.left="-100000px"}}destroy(){if(this.cursor)this.cursor.remove()}setDropPos(Z){if(this.view.state.field(N3)!=Z)this.view.dispatch({effects:b$.of(Z)})}},{eventObservers:{dragover(Z){this.setDropPos(this.view.posAtCoords({x:Z.clientX,y:Z.clientY}))},dragleave(Z){if(Z.target==this.view.contentDOM||!this.view.contentDOM.contains(Z.relatedTarget))this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function k$(){return[N3,FU]}function QZ(Z,$,J,X,Y){$.lastIndex=0;for(let Q=Z.iterRange(J,X),K=J,U;!Q.next().done;K+=Q.value.length)if(!Q.lineBreak)while(U=$.exec(Q.value))Y(K+U.index,U)}function IU(Z,$){let J=Z.visibleRanges;if(J.length==1&&J[0].from==Z.viewport.from&&J[0].to==Z.viewport.to)return J;let X=[];for(let{from:Y,to:Q}of J)if(Y=Math.max(Z.state.doc.lineAt(Y).from,Y-$),Q=Math.min(Z.state.doc.lineAt(Q).to,Q+$),X.length&&X[X.length-1].to>=Y)X[X.length-1].to=Q;else X.push({from:Y,to:Q});return X}class S${constructor(Z){let{regexp:$,decoration:J,decorate:X,boundary:Y,maxLength:Q=1000}=Z;if(!$.global)throw RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=$,X)this.addMatch=(K,U,q,G)=>X(G,q,q+K[0].length,K,U);else if(typeof J=="function")this.addMatch=(K,U,q,G)=>{let W=J(K,U,q);if(W)G(q,q+K[0].length,W)};else if(J)this.addMatch=(K,U,q,G)=>G(q,q+K[0].length,J);else throw RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=Y,this.maxLength=Q}createDeco(Z){let $=new n0,J=$.add.bind($);for(let{from:X,to:Y}of IU(Z,this.maxLength))QZ(Z.state.doc,this.regexp,X,Y,(Q,K)=>this.addMatch(K,Z,Q,J));return $.finish()}updateDeco(Z,$){let J=1e9,X=-1;if(Z.docChanged)Z.changes.iterChanges((Y,Q,K,U)=>{if(U>=Z.view.viewport.from&&K<=Z.view.viewport.to)J=Math.min(K,J),X=Math.max(U,X)});if(Z.viewportMoved||X-J>1000)return this.createDeco(Z.view);if(X>-1)return this.updateRange(Z.view,$.map(Z.changes),J,X);return $}updateRange(Z,$,J,X){for(let Y of Z.visibleRanges){let Q=Math.max(Y.from,J),K=Math.min(Y.to,X);if(K>=Q){let U=Z.state.doc.lineAt(Q),q=U.to<K?Z.state.doc.lineAt(K):U,G=Math.max(Y.from,U.from),W=Math.min(Y.to,q.to);if(this.boundary){for(;Q>U.from;Q--)if(this.boundary.test(U.text[Q-1-U.from])){G=Q;break}for(;K<q.to;K++)if(this.boundary.test(q.text[K-q.from])){W=K;break}}let j=[],z,_=(V,O,N)=>j.push(N.range(V,O));if(U==q){this.regexp.lastIndex=G-U.from;while((z=this.regexp.exec(U.text))&&z.index<W-U.from)this.addMatch(z,Z,z.index+U.from,_)}else QZ(Z.state.doc,this.regexp,G,W,(V,O)=>this.addMatch(O,Z,V,_));$=$.update({filterFrom:G,filterTo:W,filter:(V,O)=>V<G||O>W,add:j})}}return $}}var n7=/x/.unicode!=null?"gu":"g",DU=new RegExp(`[\x00-\b
-\x1F-ÂŸÂ­Øœâ€‹â€Žâ€\u2028\u2029â€­â€®â¦â§â©\uFEFFï¿¹-ï¿¼]`,n7),MU={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},A7=null;function AU(){var Z;if(A7==null&&typeof document<"u"&&document.body){let $=document.body.style;A7=((Z=$.tabSize)!==null&&Z!==void 0?Z:$.MozTabSize)!=null}return A7||!1}var y6=k.define({combine(Z){let $=h0(Z,{render:null,specialChars:DU,addSpecialChars:null});if($.replaceTabs=!AU())$.specialChars=new RegExp("\t|"+$.specialChars.source,n7);if($.addSpecialChars)$.specialChars=new RegExp($.specialChars.source+"|"+$.addSpecialChars.source,n7);return $}});function x$(Z={}){return[y6.of(Z),LU()]}var KZ=null;function LU(){return KZ||(KZ=j0.fromClass(class{constructor(Z){this.view=Z,this.decorations=m.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(Z.state.facet(y6)),this.decorations=this.decorator.createDeco(Z)}makeDecorator(Z){return new S$({regexp:Z.specialChars,decoration:($,J,X)=>{let{doc:Y}=J.state,Q=y0($[0],0);if(Q==9){let K=Y.lineAt(X),U=J.state.tabSize,q=v1(K.text,U,X-K.from);return m.replace({widget:new h$((U-q%U)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[Q]||(this.decorationCache[Q]=m.replace({widget:new w$(Z,Q)}))},boundary:Z.replaceTabs?void 0:/[^]/})}update(Z){let $=Z.state.facet(y6);if(Z.startState.facet(y6)!=$)this.decorator=this.makeDecorator($),this.decorations=this.decorator.createDeco(Z.view);else this.decorations=this.decorator.updateDeco(Z,this.decorations)}},{decorations:(Z)=>Z.decorations}))}var BU="â€¢";function EU(Z){if(Z>=32)return BU;if(Z==10)return"â¤";return String.fromCharCode(9216+Z)}class w$ extends o0{constructor(Z,$){super();this.options=Z,this.code=$}eq(Z){return Z.code==this.code}toDOM(Z){let $=EU(this.code),J=Z.state.phrase("Control character")+" "+(MU[this.code]||"0x"+this.code.toString(16)),X=this.options.render&&this.options.render(this.code,J,$);if(X)return X;let Y=document.createElement("span");return Y.textContent=$,Y.title=J,Y.setAttribute("aria-label",J),Y.className="cm-specialChar",Y}ignoreEvent(){return!1}}class h$ extends o0{constructor(Z){super();this.width=Z}eq(Z){return Z.width==this.width}toDOM(){let Z=document.createElement("span");return Z.textContent="\t",Z.className="cm-tab",Z.style.width=this.width+"px",Z}ignoreEvent(){return!1}}function v$(){return CU}var PU=m.line({class:"cm-activeLine"}),CU=j0.fromClass(class{constructor(Z){this.decorations=this.getDeco(Z)}update(Z){if(Z.docChanged||Z.selectionSet)this.decorations=this.getDeco(Z.view)}getDeco(Z){let $=-1,J=[];for(let X of Z.state.selection.ranges){let Y=Z.lineBlockAt(X.head);if(Y.from>$)J.push(PU.range(Y.from)),$=Y.from}return m.set(J)}},{decorations:(Z)=>Z.decorations});var i7=2000;function TU(Z,$,J){let X=Math.min($.line,J.line),Y=Math.max($.line,J.line),Q=[];if($.off>i7||J.off>i7||$.col<0||J.col<0){let K=Math.min($.off,J.off),U=Math.max($.off,J.off);for(let q=X;q<=Y;q++){let G=Z.doc.line(q);if(G.length<=U)Q.push(M.range(G.from+K,G.to+U))}}else{let K=Math.min($.col,J.col),U=Math.max($.col,J.col);for(let q=X;q<=Y;q++){let G=Z.doc.line(q),W=O6(G.text,K,Z.tabSize,!0);if(W<0)Q.push(M.cursor(G.to));else{let j=O6(G.text,U,Z.tabSize);Q.push(M.range(G.from+W,G.from+j))}}}return Q}function yU(Z,$){let J=Z.coordsAtPos(Z.viewport.from);return J?Math.round(Math.abs((J.left-$)/Z.defaultCharacterWidth)):-1}function UZ(Z,$){let J=Z.posAtCoords({x:$.clientX,y:$.clientY},!1),X=Z.state.doc.lineAt(J),Y=J-X.from,Q=Y>i7?-1:Y==X.length?yU(Z,$.clientX):v1(X.text,Z.state.tabSize,J-X.from);return{line:X.number,col:Q,off:Y}}function bU(Z,$){let J=UZ(Z,$),X=Z.state.selection;if(!J)return null;return{update(Y){if(Y.docChanged){let Q=Y.changes.mapPos(Y.startState.doc.line(J.line).from),K=Y.state.doc.lineAt(Q);J={line:K.number,col:J.col,off:Math.min(J.off,K.length)},X=X.map(Y.changes)}},get(Y,Q,K){let U=UZ(Z,Y);if(!U)return X;let q=TU(Z.state,J,U);if(!q.length)return X;if(K)return M.create(q.concat(X.ranges));else return M.create(q)}}}function u$(Z){let $=(Z===null||Z===void 0?void 0:Z.eventFilter)||((J)=>J.altKey&&J.button==0);return C.mouseSelectionStyle.of((J,X)=>$(X)?bU(J,X):null)}var kU={Alt:[18,(Z)=>!!Z.altKey],Control:[17,(Z)=>!!Z.ctrlKey],Shift:[16,(Z)=>!!Z.shiftKey],Meta:[91,(Z)=>!!Z.metaKey]},SU={style:"cursor: crosshair"};function m$(Z={}){let[$,J]=kU[Z.key||"Alt"],X=j0.fromClass(class{constructor(Y){this.view=Y,this.isDown=!1}set(Y){if(this.isDown!=Y)this.isDown=Y,this.view.update([])}},{eventObservers:{keydown(Y){this.set(Y.keyCode==$||J(Y))},keyup(Y){if(Y.keyCode==$||!J(Y))this.set(!1)},mousemove(Y){this.set(J(Y))}}});return[X,C.contentAttributes.of((Y)=>{var Q;return((Q=Y.plugin(X))===null||Q===void 0?void 0:Q.isDown)?SU:null})]}var M6="-10000px";class W8{constructor(Z,$,J,X){this.facet=$,this.createTooltipView=J,this.removeTooltipView=X,this.input=Z.state.facet($),this.tooltips=this.input.filter((Q)=>Q);let Y=null;this.tooltipViews=this.tooltips.map((Q)=>Y=J(Q,Y))}update(Z,$){var J;let X=Z.state.facet(this.facet),Y=X.filter((U)=>U);if(X===this.input){for(let U of this.tooltipViews)if(U.update)U.update(Z);return!1}let Q=[],K=$?[]:null;for(let U=0;U<Y.length;U++){let q=Y[U],G=-1;if(!q)continue;for(let W=0;W<this.tooltips.length;W++){let j=this.tooltips[W];if(j&&j.create==q.create)G=W}if(G<0){if(Q[U]=this.createTooltipView(q,U?Q[U-1]:null),K)K[U]=!!q.above}else{let W=Q[U]=this.tooltipViews[G];if(K)K[U]=$[G];if(W.update)W.update(Z)}}for(let U of this.tooltipViews)if(Q.indexOf(U)<0)this.removeTooltipView(U),(J=U.destroy)===null||J===void 0||J.call(U);if($)K.forEach((U,q)=>$[q]=U),$.length=K.length;return this.input=X,this.tooltips=Y,this.tooltipViews=Q,!0}}function xU(Z){let $=Z.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:$.clientHeight,right:$.clientWidth}}var L7=k.define({combine:(Z)=>{var $,J,X;return{position:x.ios?"absolute":(($=Z.find((Y)=>Y.position))===null||$===void 0?void 0:$.position)||"fixed",parent:((J=Z.find((Y)=>Y.parent))===null||J===void 0?void 0:J.parent)||null,tooltipSpace:((X=Z.find((Y)=>Y.tooltipSpace))===null||X===void 0?void 0:X.tooltipSpace)||xU}}}),qZ=new WeakMap,j8=j0.fromClass(class{constructor(Z){this.view=Z,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let $=Z.state.facet(L7);this.position=$.position,this.parent=$.parent,this.classes=Z.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new W8(Z,x3,(J,X)=>this.createTooltip(J,X),(J)=>{if(this.resizeObserver)this.resizeObserver.unobserve(J.dom);J.dom.remove()}),this.above=this.manager.tooltips.map((J)=>!!J.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver((J)=>{if(Date.now()>this.lastTransaction-50&&J.length>0&&J[J.length-1].intersectionRatio<1)this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),Z.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){if(this.parent)this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container);else this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let Z of this.manager.tooltipViews)this.intersectionObserver.observe(Z.dom)}}measureSoon(){if(this.measureTimeout<0)this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50)}update(Z){if(Z.transactions.length)this.lastTransaction=Date.now();let $=this.manager.update(Z,this.above);if($)this.observeIntersection();let J=$||Z.geometryChanged,X=Z.state.facet(L7);if(X.position!=this.position&&!this.madeAbsolute){this.position=X.position;for(let Y of this.manager.tooltipViews)Y.dom.style.position=this.position;J=!0}if(X.parent!=this.parent){if(this.parent)this.container.remove();this.parent=X.parent,this.createContainer();for(let Y of this.manager.tooltipViews)this.container.appendChild(Y.dom);J=!0}else if(this.parent&&this.view.themeClasses!=this.classes)this.classes=this.container.className=this.view.themeClasses;if(J)this.maybeMeasure()}createTooltip(Z,$){let J=Z.create(this.view),X=$?$.dom:null;if(J.dom.classList.add("cm-tooltip"),Z.arrow&&!J.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let Y=document.createElement("div");Y.className="cm-tooltip-arrow",J.dom.appendChild(Y)}if(J.dom.style.position=this.position,J.dom.style.top=M6,J.dom.style.left="0px",this.container.insertBefore(J.dom,X),J.mount)J.mount(this.view);if(this.resizeObserver)this.resizeObserver.observe(J.dom);return J}destroy(){var Z,$,J;this.view.win.removeEventListener("resize",this.measureSoon);for(let X of this.manager.tooltipViews)X.dom.remove(),(Z=X.destroy)===null||Z===void 0||Z.call(X);if(this.parent)this.container.remove();($=this.resizeObserver)===null||$===void 0||$.disconnect(),(J=this.intersectionObserver)===null||J===void 0||J.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let Z=1,$=1,J=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:Q}=this.manager.tooltipViews[0];if(x.safari){let K=Q.getBoundingClientRect();J=Math.abs(K.top+1e4)>1||Math.abs(K.left)>1}else J=!!Q.offsetParent&&Q.offsetParent!=this.container.ownerDocument.body}if(J||this.position=="absolute")if(this.parent){let Q=this.parent.getBoundingClientRect();if(Q.width&&Q.height)Z=Q.width/this.parent.offsetWidth,$=Q.height/this.parent.offsetHeight}else({scaleX:Z,scaleY:$}=this.view.viewState);let X=this.view.scrollDOM.getBoundingClientRect(),Y=Q8(this.view);return{visible:{left:X.left+Y.left,top:X.top+Y.top,right:X.right-Y.right,bottom:X.bottom-Y.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((Q,K)=>{let U=this.manager.tooltipViews[K];return U.getCoords?U.getCoords(Q.pos):this.view.coordsAtPos(Q.pos)}),size:this.manager.tooltipViews.map(({dom:Q})=>Q.getBoundingClientRect()),space:this.view.state.facet(L7).tooltipSpace(this.view),scaleX:Z,scaleY:$,makeAbsolute:J}}writeMeasure(Z){var $;if(Z.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let U of this.manager.tooltipViews)U.dom.style.position="absolute"}let{visible:J,space:X,scaleX:Y,scaleY:Q}=Z,K=[];for(let U=0;U<this.manager.tooltips.length;U++){let q=this.manager.tooltips[U],G=this.manager.tooltipViews[U],{dom:W}=G,j=Z.pos[U],z=Z.size[U];if(!j||q.clip!==!1&&(j.bottom<=Math.max(J.top,X.top)||j.top>=Math.min(J.bottom,X.bottom)||j.right<Math.max(J.left,X.left)-0.1||j.left>Math.min(J.right,X.right)+0.1)){W.style.top=M6;continue}let _=q.arrow?G.dom.querySelector(".cm-tooltip-arrow"):null,V=_?7:0,O=z.right-z.left,N=($=qZ.get(G))!==null&&$!==void 0?$:z.bottom-z.top,F=G.offset||hU,D=this.view.textDirection==Y0.LTR,A=z.width>X.right-X.left?D?X.left:X.right-z.width:D?Math.max(X.left,Math.min(j.left-(_?14:0)+F.x,X.right-O)):Math.min(Math.max(X.left,j.left-O+(_?14:0)-F.x),X.right-O),L=this.above[U];if(!q.strictSide&&(L?j.top-N-V-F.y<X.top:j.bottom+N+V+F.y>X.bottom)&&L==X.bottom-j.bottom>j.top-X.top)L=this.above[U]=!L;let B=(L?j.top-X.top:X.bottom-j.bottom)-V;if(B<N&&G.resize!==!1){if(B<this.view.defaultLineHeight){W.style.top=M6;continue}qZ.set(G,N),W.style.height=(N=B)/Q+"px"}else if(W.style.height)W.style.height="";let w=L?j.top-N-V-F.y:j.bottom+V+F.y,S=A+O;if(G.overlap!==!0){for(let d of K)if(d.left<S&&d.right>A&&d.top<w+N&&d.bottom>w)w=L?d.top-N-2-V:d.bottom+V+2}if(this.position=="absolute")W.style.top=(w-Z.parent.top)/Q+"px",GZ(W,(A-Z.parent.left)/Y);else W.style.top=w/Q+"px",GZ(W,A/Y);if(_){let d=j.left+(D?F.x:-F.x)-(A+14-7);_.style.left=d/Y+"px"}if(G.overlap!==!0)K.push({left:A,top:w,right:S,bottom:w+N});if(W.classList.toggle("cm-tooltip-above",L),W.classList.toggle("cm-tooltip-below",!L),G.positioned)G.positioned(Z.space)}}maybeMeasure(){if(this.manager.tooltips.length){if(this.view.inView)this.view.requestMeasure(this.measureReq);if(this.inView!=this.view.inView){if(this.inView=this.view.inView,!this.inView)for(let Z of this.manager.tooltipViews)Z.dom.style.top=M6}}}},{eventObservers:{scroll(){this.maybeMeasure()}}});function GZ(Z,$){let J=parseInt(Z.style.left,10);if(isNaN(J)||Math.abs($-J)>1)Z.style.left=$+"px"}var wU=C.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),hU={x:0,y:0},x3=k.define({enables:[j8,wU]}),f6=k.define({combine:(Z)=>Z.reduce(($,J)=>$.concat(J),[])});class c6{static create(Z){return new c6(Z)}constructor(Z){this.view=Z,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new W8(Z,f6,($,J)=>this.createHostedView($,J),($)=>$.dom.remove())}createHostedView(Z,$){let J=Z.create(this.view);if(J.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(J.dom,$?$.dom.nextSibling:this.dom.firstChild),this.mounted&&J.mount)J.mount(this.view);return J}mount(Z){for(let $ of this.manager.tooltipViews)if($.mount)$.mount(Z);this.mounted=!0}positioned(Z){for(let $ of this.manager.tooltipViews)if($.positioned)$.positioned(Z)}update(Z){this.manager.update(Z)}destroy(){var Z;for(let $ of this.manager.tooltipViews)(Z=$.destroy)===null||Z===void 0||Z.call($)}passProp(Z){let $=void 0;for(let J of this.manager.tooltipViews){let X=J[Z];if(X!==void 0){if($===void 0)$=X;else if($!==X)return}}return $}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}var vU=x3.compute([f6],(Z)=>{let $=Z.facet(f6);if($.length===0)return null;return{pos:Math.min(...$.map((J)=>J.pos)),end:Math.max(...$.map((J)=>{var X;return(X=J.end)!==null&&X!==void 0?X:J.pos})),create:c6.create,above:$[0].above,arrow:$.some((J)=>J.arrow)}});class g${constructor(Z,$,J,X,Y){this.view=Z,this.source=$,this.field=J,this.setHover=X,this.hoverTime=Y,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:Z.dom,time:0},this.checkHover=this.checkHover.bind(this),Z.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),Z.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){if(this.pending)this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20)}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let Z=Date.now()-this.lastMove.time;if(Z<this.hoverTime)this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-Z);else this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:Z,lastMove:$}=this,J=Z.docView.tile.nearest($.target);if(!J)return;let X,Y=1;if(J.isWidget())X=J.posAtStart;else{if(X=Z.posAtCoords($),X==null)return;let K=Z.coordsAtPos(X);if(!K||$.y<K.top||$.y>K.bottom||$.x<K.left-Z.defaultCharacterWidth||$.x>K.right+Z.defaultCharacterWidth)return;let U=Z.bidiSpans(Z.state.doc.lineAt(X)).find((G)=>G.from<=X&&G.to>=X),q=U&&U.dir==Y0.RTL?-1:1;Y=$.x<K.left?-q:q}let Q=this.source(Z,X,Y);if(Q===null||Q===void 0?void 0:Q.then){let K=this.pending={pos:X};Q.then((U)=>{if(this.pending==K){if(this.pending=null,U&&!(Array.isArray(U)&&!U.length))Z.dispatch({effects:this.setHover.of(Array.isArray(U)?U:[U])})}},(U)=>k0(Z.state,U,"hover tooltip"))}else if(Q&&!(Array.isArray(Q)&&!Q.length))Z.dispatch({effects:this.setHover.of(Array.isArray(Q)?Q:[Q])})}get tooltip(){let Z=this.view.plugin(j8),$=Z?Z.manager.tooltips.findIndex((J)=>J.create==c6.create):-1;return $>-1?Z.manager.tooltipViews[$]:null}mousemove(Z){var $,J;if(this.lastMove={x:Z.clientX,y:Z.clientY,target:Z.target,time:Date.now()},this.hoverTimeout<0)this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime);let{active:X,tooltip:Y}=this;if(X.length&&Y&&!uU(Y.dom,Z)||this.pending){let{pos:Q}=X[0]||this.pending,K=(J=($=X[0])===null||$===void 0?void 0:$.end)!==null&&J!==void 0?J:Q;if(Q==K?this.view.posAtCoords(this.lastMove)!=Q:!mU(this.view,Q,K,Z.clientX,Z.clientY))this.view.dispatch({effects:this.setHover.of([])}),this.pending=null}}mouseleave(Z){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:$}=this;if($.length){let{tooltip:J}=this;if(!(J&&J.dom.contains(Z.relatedTarget)))this.view.dispatch({effects:this.setHover.of([])});else this.watchTooltipLeave(J.dom)}}watchTooltipLeave(Z){let $=(J)=>{if(Z.removeEventListener("mouseleave",$),this.active.length&&!this.view.dom.contains(J.relatedTarget))this.view.dispatch({effects:this.setHover.of([])})};Z.addEventListener("mouseleave",$)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}var A6=4;function uU(Z,$){let{left:J,right:X,top:Y,bottom:Q}=Z.getBoundingClientRect(),K;if(K=Z.querySelector(".cm-tooltip-arrow")){let U=K.getBoundingClientRect();Y=Math.min(U.top,Y),Q=Math.max(U.bottom,Q)}return $.clientX>=J-A6&&$.clientX<=X+A6&&$.clientY>=Y-A6&&$.clientY<=Q+A6}function mU(Z,$,J,X,Y,Q){let K=Z.scrollDOM.getBoundingClientRect(),U=Z.documentTop+Z.documentPadding.top+Z.contentHeight;if(K.left>X||K.right<X||K.top>Y||Math.min(K.bottom,U)<Y)return!1;let q=Z.posAtCoords({x:X,y:Y},!1);return q>=$&&q<=J}function f$(Z,$={}){let J=p.define(),X=z0.define({create(){return[]},update(Y,Q){if(Y.length){if($.hideOnChange&&(Q.docChanged||Q.selection))Y=[];else if($.hideOn)Y=Y.filter((K)=>!$.hideOn(Q,K));if(Q.docChanged){let K=[];for(let U of Y){let q=Q.changes.mapPos(U.pos,-1,T0.TrackDel);if(q!=null){let G=Object.assign(Object.create(null),U);if(G.pos=q,G.end!=null)G.end=Q.changes.mapPos(G.end);K.push(G)}}Y=K}}for(let K of Q.effects){if(K.is(J))Y=K.value;if(K.is(gU))Y=[]}return Y},provide:(Y)=>f6.from(Y)});return{active:X,extension:[X,j0.define((Y)=>new g$(Y,Z,X,J,$.hoverTime||300)),vU]}}function z8(Z,$){let J=Z.plugin(j8);if(!J)return null;let X=J.manager.tooltips.indexOf($);return X<0?null:J.manager.tooltipViews[X]}var gU=p.define();var WZ=k.define({combine(Z){let $,J;for(let X of Z)$=$||X.topContainer,J=J||X.bottomContainer;return{topContainer:$,bottomContainer:J}}});function w3(Z,$){let J=Z.plugin(p$),X=J?J.specs.indexOf($):-1;return X>-1?J.panels[X]:null}var p$=j0.fromClass(class{constructor(Z){this.input=Z.state.facet(H2),this.specs=this.input.filter((J)=>J),this.panels=this.specs.map((J)=>J(Z));let $=Z.state.facet(WZ);this.top=new R3(Z,!0,$.topContainer),this.bottom=new R3(Z,!1,$.bottomContainer),this.top.sync(this.panels.filter((J)=>J.top)),this.bottom.sync(this.panels.filter((J)=>!J.top));for(let J of this.panels)if(J.dom.classList.add("cm-panel"),J.mount)J.mount()}update(Z){let $=Z.state.facet(WZ);if(this.top.container!=$.topContainer)this.top.sync([]),this.top=new R3(Z.view,!0,$.topContainer);if(this.bottom.container!=$.bottomContainer)this.bottom.sync([]),this.bottom=new R3(Z.view,!1,$.bottomContainer);this.top.syncClasses(),this.bottom.syncClasses();let J=Z.state.facet(H2);if(J!=this.input){let X=J.filter((q)=>q),Y=[],Q=[],K=[],U=[];for(let q of X){let G=this.specs.indexOf(q),W;if(G<0)W=q(Z.view),U.push(W);else if(W=this.panels[G],W.update)W.update(Z);Y.push(W),(W.top?Q:K).push(W)}this.specs=X,this.panels=Y,this.top.sync(Q),this.bottom.sync(K);for(let q of U)if(q.dom.classList.add("cm-panel"),q.mount)q.mount()}else for(let X of this.panels)if(X.update)X.update(Z)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:(Z)=>C.scrollMargins.of(($)=>{let J=$.plugin(Z);return J&&{top:J.top.scrollMargin(),bottom:J.bottom.scrollMargin()}})});class R3{constructor(Z,$,J){this.view=Z,this.top=$,this.container=J,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(Z){for(let $ of this.panels)if($.destroy&&Z.indexOf($)<0)$.destroy();this.panels=Z,this.syncDOM()}syncDOM(){if(this.panels.length==0){if(this.dom)this.dom.remove(),this.dom=void 0;return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let $=this.container||this.view.dom;$.insertBefore(this.dom,this.top?$.firstChild:null)}let Z=this.dom.firstChild;for(let $ of this.panels)if($.dom.parentNode==this.dom){while(Z!=$.dom)Z=jZ(Z);Z=Z.nextSibling}else this.dom.insertBefore($.dom,Z);while(Z)Z=jZ(Z)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!this.container||this.classes==this.view.themeClasses)return;for(let Z of this.classes.split(" "))if(Z)this.container.classList.remove(Z);for(let Z of(this.classes=this.view.themeClasses).split(" "))if(Z)this.container.classList.add(Z)}}function jZ(Z){let $=Z.nextSibling;return Z.remove(),$}var H2=k.define({enables:p$});function l$(Z,$){let J,X=new Promise((K)=>J=K),Y=(K)=>fU(K,$,J);if(Z.state.field(B7,!1))Z.dispatch({effects:d$.of(Y)});else Z.dispatch({effects:p.appendConfig.of(B7.init(()=>[Y]))});let Q=c$.of(Y);return{close:Q,result:X.then((K)=>{return(Z.win.queueMicrotask||((q)=>Z.win.setTimeout(q,10)))(()=>{if(Z.state.field(B7).indexOf(Y)>-1)Z.dispatch({effects:Q})}),K})}}var B7=z0.define({create(){return[]},update(Z,$){for(let J of $.effects)if(J.is(d$))Z=[J.value].concat(Z);else if(J.is(c$))Z=Z.filter((X)=>X!=J.value);return Z},provide:(Z)=>H2.computeN([Z],($)=>$.field(Z))}),d$=p.define(),c$=p.define();function fU(Z,$,J){let X=$.content?$.content(Z,()=>K(null)):null;if(!X){if(X=$0("form"),$.input){let U=$0("input",$.input);if(/^(text|password|number|email|tel|url)$/.test(U.type))U.classList.add("cm-textfield");if(!U.name)U.name="input";X.appendChild($0("label",($.label||"")+": ",U))}else X.appendChild(document.createTextNode($.label||""));X.appendChild(document.createTextNode(" ")),X.appendChild($0("button",{class:"cm-button",type:"submit"},$.submitLabel||"OK"))}let Y=X.nodeName=="FORM"?[X]:X.querySelectorAll("form");for(let U=0;U<Y.length;U++){let q=Y[U];q.addEventListener("keydown",(G)=>{if(G.keyCode==27)G.preventDefault(),K(null);else if(G.keyCode==13)G.preventDefault(),K(q)}),q.addEventListener("submit",(G)=>{G.preventDefault(),K(q)})}let Q=$0("div",X,$0("button",{onclick:()=>K(null),"aria-label":Z.state.phrase("close"),class:"cm-dialog-close",type:"button"},["Ã—"]));if($.class)Q.className=$.class;Q.classList.add("cm-dialog");function K(U){if(Q.contains(Q.ownerDocument.activeElement))Z.focus();J(U)}return{dom:Q,top:$.top,mount:()=>{if($.focus){let U;if(typeof $.focus=="string")U=X.querySelector($.focus);else U=X.querySelector("input")||X.querySelector("button");if(U&&"select"in U)U.select();else if(U&&"focus"in U)U.focus()}}}}class Q1 extends H1{compare(Z){return this==Z||this.constructor==Z.constructor&&this.eq(Z)}eq(Z){return!1}destroy(Z){}}Q1.prototype.elementClass="";Q1.prototype.toDOM=void 0;Q1.prototype.mapMode=T0.TrackBefore;Q1.prototype.startSide=Q1.prototype.endSide=-1;Q1.prototype.point=!0;var b6=k.define(),pU=k.define(),lU={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>i.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},M3=k.define();function _8(Z){return[s$(),M3.of({...lU,...Z})]}var r7=k.define({combine:(Z)=>Z.some(($)=>$)});function s$(Z){let $=[dU];if(Z&&Z.fixed===!1)$.push(r7.of(!0));return $}var dU=j0.fromClass(class{constructor(Z){this.view=Z,this.domAfter=null,this.prevViewport=Z.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=Z.state.facet(M3).map(($)=>new o7(Z,$)),this.fixed=!Z.state.facet(r7);for(let $ of this.gutters)if($.config.side=="after")this.getDOMAfter().appendChild($.dom);else this.dom.appendChild($.dom);if(this.fixed)this.dom.style.position="sticky";this.syncGutters(!1),Z.scrollDOM.insertBefore(this.dom,Z.contentDOM)}getDOMAfter(){if(!this.domAfter)this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter);return this.domAfter}update(Z){if(this.updateGutters(Z)){let $=this.prevViewport,J=Z.view.viewport,X=Math.min($.to,J.to)-Math.max($.from,J.from);this.syncGutters(X<(J.to-J.from)*0.8)}if(Z.geometryChanged){let $=this.view.contentHeight/this.view.scaleY+"px";if(this.dom.style.minHeight=$,this.domAfter)this.domAfter.style.minHeight=$}if(this.view.state.facet(r7)!=!this.fixed){if(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter)this.domAfter.style.position=this.fixed?"sticky":""}this.prevViewport=Z.view.viewport}syncGutters(Z){let $=this.dom.nextSibling;if(Z){if(this.dom.remove(),this.domAfter)this.domAfter.remove()}let J=i.iter(this.view.state.facet(b6),this.view.viewport.from),X=[],Y=this.gutters.map((Q)=>new n$(Q,this.view.viewport,-this.view.documentPadding.top));for(let Q of this.view.viewportLineBlocks){if(X.length)X=[];if(Array.isArray(Q.type)){let K=!0;for(let U of Q.type)if(U.type==S0.Text&&K){a7(J,X,U.from);for(let q of Y)q.line(this.view,U,X);K=!1}else if(U.widget)for(let q of Y)q.widget(this.view,U)}else if(Q.type==S0.Text){a7(J,X,Q.from);for(let K of Y)K.line(this.view,Q,X)}else if(Q.widget)for(let K of Y)K.widget(this.view,Q)}for(let Q of Y)Q.finish();if(Z){if(this.view.scrollDOM.insertBefore(this.dom,$),this.domAfter)this.view.scrollDOM.appendChild(this.domAfter)}}updateGutters(Z){let $=Z.startState.facet(M3),J=Z.state.facet(M3),X=Z.docChanged||Z.heightChanged||Z.viewportChanged||!i.eq(Z.startState.facet(b6),Z.state.facet(b6),Z.view.viewport.from,Z.view.viewport.to);if($==J){for(let Y of this.gutters)if(Y.update(Z))X=!0}else{X=!0;let Y=[];for(let Q of J){let K=$.indexOf(Q);if(K<0)Y.push(new o7(this.view,Q));else this.gutters[K].update(Z),Y.push(this.gutters[K])}for(let Q of this.gutters)if(Q.dom.remove(),Y.indexOf(Q)<0)Q.destroy();for(let Q of Y)if(Q.config.side=="after")this.getDOMAfter().appendChild(Q.dom);else this.dom.appendChild(Q.dom);this.gutters=Y}return X}destroy(){for(let Z of this.gutters)Z.destroy();if(this.dom.remove(),this.domAfter)this.domAfter.remove()}},{provide:(Z)=>C.scrollMargins.of(($)=>{let J=$.plugin(Z);if(!J||J.gutters.length==0||!J.fixed)return null;let X=J.dom.offsetWidth*$.scaleX,Y=J.domAfter?J.domAfter.offsetWidth*$.scaleX:0;return $.textDirection==Y0.LTR?{left:X,right:Y}:{right:X,left:Y}})});function zZ(Z){return Array.isArray(Z)?Z:[Z]}function a7(Z,$,J){while(Z.value&&Z.from<=J){if(Z.from==J)$.push(Z.value);Z.next()}}class n${constructor(Z,$,J){this.gutter=Z,this.height=J,this.i=0,this.cursor=i.iter(Z.markers,$.from)}addElement(Z,$,J){let{gutter:X}=this,Y=($.top-this.height)/Z.scaleY,Q=$.height/Z.scaleY;if(this.i==X.elements.length){let K=new O8(Z,Q,Y,J);X.elements.push(K),X.dom.appendChild(K.dom)}else X.elements[this.i].update(Z,Q,Y,J);this.height=$.bottom,this.i++}line(Z,$,J){let X=[];if(a7(this.cursor,X,$.from),J.length)X=X.concat(J);let Y=this.gutter.config.lineMarker(Z,$,X);if(Y)X.unshift(Y);let Q=this.gutter;if(X.length==0&&!Q.config.renderEmptyElements)return;this.addElement(Z,$,X)}widget(Z,$){let J=this.gutter.config.widgetMarker(Z,$.widget,$),X=J?[J]:null;for(let Y of Z.state.facet(pU)){let Q=Y(Z,$.widget,$);if(Q)(X||(X=[])).push(Q)}if(X)this.addElement(Z,$,X)}finish(){let Z=this.gutter;while(Z.elements.length>this.i){let $=Z.elements.pop();Z.dom.removeChild($.dom),$.destroy()}}}class o7{constructor(Z,$){this.view=Z,this.config=$,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let J in $.domEventHandlers)this.dom.addEventListener(J,(X)=>{let Y=X.target,Q;if(Y!=this.dom&&this.dom.contains(Y)){while(Y.parentNode!=this.dom)Y=Y.parentNode;let U=Y.getBoundingClientRect();Q=(U.top+U.bottom)/2}else Q=X.clientY;let K=Z.lineBlockAtHeight(Q-Z.documentTop);if($.domEventHandlers[J](Z,K,X))X.preventDefault()});if(this.markers=zZ($.markers(Z)),$.initialSpacer)this.spacer=new O8(Z,0,0,[$.initialSpacer(Z)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none"}update(Z){let $=this.markers;if(this.markers=zZ(this.config.markers(Z.view)),this.spacer&&this.config.updateSpacer){let X=this.config.updateSpacer(this.spacer.markers[0],Z);if(X!=this.spacer.markers[0])this.spacer.update(Z.view,0,0,[X])}let J=Z.view.viewport;return!i.eq(this.markers,$,J.from,J.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(Z):!1)}destroy(){for(let Z of this.elements)Z.destroy()}}class O8{constructor(Z,$,J,X){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(Z,$,J,X)}update(Z,$,J,X){if(this.height!=$)this.height=$,this.dom.style.height=$+"px";if(this.above!=J)this.dom.style.marginTop=(this.above=J)?J+"px":"";if(!cU(this.markers,X))this.setMarkers(Z,X)}setMarkers(Z,$){let J="cm-gutterElement",X=this.dom.firstChild;for(let Y=0,Q=0;;){let K=Q,U=Y<$.length?$[Y++]:null,q=!1;if(U){let G=U.elementClass;if(G)J+=" "+G;for(let W=Q;W<this.markers.length;W++)if(this.markers[W].compare(U)){K=W,q=!0;break}}else K=this.markers.length;while(Q<K){let G=this.markers[Q++];if(G.toDOM){G.destroy(X);let W=X.nextSibling;X.remove(),X=W}}if(!U)break;if(U.toDOM)if(q)X=X.nextSibling;else this.dom.insertBefore(U.toDOM(Z),X);if(q)Q++}this.dom.className=J,this.markers=$}destroy(){this.setMarkers(null,[])}}function cU(Z,$){if(Z.length!=$.length)return!1;for(let J=0;J<Z.length;J++)if(!Z[J].compare($[J]))return!1;return!0}var sU=k.define(),nU=k.define(),x2=k.define({combine(Z){return h0(Z,{formatNumber:String,domEventHandlers:{}},{domEventHandlers($,J){let X=Object.assign({},$);for(let Y in J){let Q=X[Y],K=J[Y];X[Y]=Q?(U,q,G)=>Q(U,q,G)||K(U,q,G):K}return X}})}});class k6 extends Q1{constructor(Z){super();this.number=Z}eq(Z){return this.number==Z.number}toDOM(){return document.createTextNode(this.number)}}function E7(Z,$){return Z.state.facet(x2).formatNumber($,Z.state)}var iU=M3.compute([x2],(Z)=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers($){return $.state.facet(sU)},lineMarker($,J,X){if(X.some((Y)=>Y.toDOM))return null;return new k6(E7($,$.state.doc.lineAt(J.from).number))},widgetMarker:($,J,X)=>{for(let Y of $.state.facet(nU)){let Q=Y($,J,X);if(Q)return Q}return null},lineMarkerChange:($)=>$.startState.facet(x2)!=$.state.facet(x2),initialSpacer($){return new k6(E7($,_Z($.state.doc.lines)))},updateSpacer($,J){let X=E7(J.view,_Z(J.view.state.doc.lines));return X==$.number?$:new k6(X)},domEventHandlers:Z.facet(x2).domEventHandlers,side:"before"}));function i$(Z={}){return[x2.of(Z),s$(),iU]}function _Z(Z){let $=9;while($<Z)$=$*10+9;return $}var rU=new class extends Q1{constructor(){super(...arguments);this.elementClass="cm-activeLineGutter"}},aU=b6.compute(["selection"],(Z)=>{let $=[],J=-1;for(let X of Z.selection.ranges){let Y=Z.doc.lineAt(X.head).from;if(Y>J)J=Y,$.push(rU.range(Y))}return i.of($)});function r$(){return aU}var oU=0;class n6{constructor(Z,$){this.from=Z,this.to=$}}class a{constructor(Z={}){this.id=oU++,this.perNode=!!Z.perNode,this.deserialize=Z.deserialize||(()=>{throw Error("This node type doesn't define a deserialize function")}),this.combine=Z.combine||null}add(Z){if(this.perNode)throw RangeError("Can't add per-node props to node types");if(typeof Z!="function")Z=g0.match(Z);return($)=>{let J=Z($);return J===void 0?null:[this,J]}}}a.closedBy=new a({deserialize:(Z)=>Z.split(" ")});a.openedBy=new a({deserialize:(Z)=>Z.split(" ")});a.group=new a({deserialize:(Z)=>Z.split(" ")});a.isolate=new a({deserialize:(Z)=>{if(Z&&Z!="rtl"&&Z!="ltr"&&Z!="auto")throw RangeError("Invalid value for isolate: "+Z);return Z||"auto"}});a.contextHash=new a({perNode:!0});a.lookAhead=new a({perNode:!0});a.mounted=new a({perNode:!0});class f2{constructor(Z,$,J,X=!1){this.tree=Z,this.overlay=$,this.parser=J,this.bracketed=X}static get(Z){return Z&&Z.props&&Z.props[a.mounted.id]}}var tU=Object.create(null);class g0{constructor(Z,$,J,X=0){this.name=Z,this.props=$,this.id=J,this.flags=X}static define(Z){let $=Z.props&&Z.props.length?Object.create(null):tU,J=(Z.top?1:0)|(Z.skipped?2:0)|(Z.error?4:0)|(Z.name==null?8:0),X=new g0(Z.name||"",$,Z.id,J);if(Z.props)for(let Y of Z.props){if(!Array.isArray(Y))Y=Y(X);if(Y){if(Y[0].perNode)throw RangeError("Can't store a per-node prop on a node type");$[Y[0].id]=Y[1]}}return X}prop(Z){return this.props[Z.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(Z){if(typeof Z=="string"){if(this.name==Z)return!0;let $=this.prop(a.group);return $?$.indexOf(Z)>-1:!1}return this.id==Z}static match(Z){let $=Object.create(null);for(let J in Z)for(let X of J.split(" "))$[X]=Z[J];return(J)=>{for(let X=J.prop(a.group),Y=-1;Y<(X?X.length:0);Y++){let Q=$[Y<0?J.name:X[Y]];if(Q)return Q}}}}g0.none=new g0("",Object.create(null),0,8);class a6{constructor(Z){this.types=Z;for(let $=0;$<Z.length;$++)if(Z[$].id!=$)throw RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...Z){let $=[];for(let J of this.types){let X=null;for(let Y of Z){let Q=Y(J);if(Q){if(!X)X=Object.assign({},J.props);let K=Q[1],U=Q[0];if(U.combine&&U.id in X)K=U.combine(X[U.id],K);X[U.id]=K}}$.push(X?new g0(J.name,X,J.id,J.flags):J)}return new a6($)}}var s6=new WeakMap,a$=new WeakMap,R0;(function(Z){Z[Z.ExcludeBuffers=1]="ExcludeBuffers",Z[Z.IncludeAnonymous=2]="IncludeAnonymous",Z[Z.IgnoreMounts=4]="IgnoreMounts",Z[Z.IgnoreOverlays=8]="IgnoreOverlays",Z[Z.EnterBracketed=16]="EnterBracketed"})(R0||(R0={}));class W0{constructor(Z,$,J,X,Y){if(this.type=Z,this.children=$,this.positions=J,this.length=X,this.props=null,Y&&Y.length){this.props=Object.create(null);for(let[Q,K]of Y)this.props[typeof Q=="number"?Q:Q.id]=K}}toString(){let Z=f2.get(this);if(Z&&!Z.overlay)return Z.tree.toString();let $="";for(let J of this.children){let X=J.toString();if(X){if($)$+=",";$+=X}}return!this.type.name?$:(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+($.length?"("+$+")":"")}cursor(Z=0){return new r6(this.topNode,Z)}cursorAt(Z,$=0,J=0){let X=s6.get(this)||this.topNode,Y=new r6(X);return Y.moveTo(Z,$),s6.set(this,Y._tree),Y}get topNode(){return new K1(this,0,0,null)}resolve(Z,$=0){let J=h3(s6.get(this)||this.topNode,Z,$,!1);return s6.set(this,J),J}resolveInner(Z,$=0){let J=h3(a$.get(this)||this.topNode,Z,$,!0);return a$.set(this,J),J}resolveStack(Z,$=0){return eU(this,Z,$)}iterate(Z){let{enter:$,leave:J,from:X=0,to:Y=this.length}=Z,Q=Z.mode||0,K=(Q&R0.IncludeAnonymous)>0;for(let U=this.cursor(Q|R0.IncludeAnonymous);;){let q=!1;if(U.from<=Y&&U.to>=X&&(!K&&U.type.isAnonymous||$(U)!==!1)){if(U.firstChild())continue;q=!0}for(;;){if(q&&J&&(K||!U.type.isAnonymous))J(U);if(U.nextSibling())break;if(!U.parent())return;q=!0}}}prop(Z){return!Z.perNode?this.type.prop(Z):this.props?this.props[Z.id]:void 0}get propValues(){let Z=[];if(this.props)for(let $ in this.props)Z.push([+$,this.props[$]]);return Z}balance(Z={}){return this.children.length<=8?this:F8(g0.none,this.children,this.positions,0,this.children.length,0,this.length,($,J,X)=>new W0(this.type,$,J,X,this.propValues),Z.makeTree||(($,J,X)=>new W0(g0.none,$,J,X)))}static build(Z){return Zq(Z)}}W0.empty=new W0(g0.none,[],[],0);class H8{constructor(Z,$){this.buffer=Z,this.index=$}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new H8(this.buffer,this.index)}}class r1{constructor(Z,$,J){this.buffer=Z,this.length=$,this.set=J}get type(){return g0.none}toString(){let Z=[];for(let $=0;$<this.buffer.length;)Z.push(this.childString($)),$=this.buffer[$+3];return Z.join(",")}childString(Z){let $=this.buffer[Z],J=this.buffer[Z+3],X=this.set.types[$],Y=X.name;if(/\W/.test(Y)&&!X.isError)Y=JSON.stringify(Y);if(Z+=4,J==Z)return Y;let Q=[];while(Z<J)Q.push(this.childString(Z)),Z=this.buffer[Z+3];return Y+"("+Q.join(",")+")"}findChild(Z,$,J,X,Y){let{buffer:Q}=this,K=-1;for(let U=Z;U!=$;U=Q[U+3])if(e$(Y,X,Q[U+1],Q[U+2])){if(K=U,J>0)break}return K}slice(Z,$,J){let X=this.buffer,Y=new Uint16Array($-Z),Q=0;for(let K=Z,U=0;K<$;){Y[U++]=X[K++],Y[U++]=X[K++]-J;let q=Y[U++]=X[K++]-J;Y[U++]=X[K++]-Z,Q=Math.max(Q,q)}return new r1(Y,Q,this.set)}}function e$(Z,$,J,X){switch(Z){case-2:return J<$;case-1:return X>=$&&J<$;case 0:return J<$&&X>$;case 1:return J<=$&&X>$;case 2:return X>$;case 4:return!0}}function h3(Z,$,J,X){var Y;while(Z.from==Z.to||(J<1?Z.from>=$:Z.from>$)||(J>-1?Z.to<=$:Z.to<$)){let K=!X&&Z instanceof K1&&Z.index<0?null:Z.parent;if(!K)return Z;Z=K}let Q=X?0:R0.IgnoreOverlays;if(X){for(let K=Z,U=K.parent;U;K=U,U=K.parent)if(K instanceof K1&&K.index<0&&((Y=U.enter($,J,Q))===null||Y===void 0?void 0:Y.from)!=K.from)Z=U}for(;;){let K=Z.enter($,J,Q);if(!K)return Z;Z=K}}class N8{cursor(Z=0){return new r6(this,Z)}getChild(Z,$=null,J=null){let X=o$(this,Z,$,J);return X.length?X[0]:null}getChildren(Z,$=null,J=null){return o$(this,Z,$,J)}resolve(Z,$=0){return h3(this,Z,$,!1)}resolveInner(Z,$=0){return h3(this,Z,$,!0)}matchContext(Z){return V8(this.parent,Z)}enterUnfinishedNodesBefore(Z){let $=this.childBefore(Z),J=this;while($){let X=$.lastChild;if(!X||X.to!=$.to)break;if(X.type.isError&&X.from==X.to)J=$,$=X.prevSibling;else $=X}return J}get node(){return this}get next(){return this.parent}}class K1 extends N8{constructor(Z,$,J,X){super();this._tree=Z,this.from=$,this.index=J,this._parent=X}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(Z,$,J,X,Y=0){var Q;for(let K=this;;){for(let{children:U,positions:q}=K._tree,G=$>0?U.length:-1;Z!=G;Z+=$){let W=U[Z],j=q[Z]+K.from;if(!(Y&R0.EnterBracketed&&W instanceof W0&&((Q=f2.get(W))===null||Q===void 0?void 0:Q.overlay)===null&&(j>=J||j+W.length<=J))&&!e$(X,J,j,j+W.length))continue;if(W instanceof r1){if(Y&R0.ExcludeBuffers)continue;let z=W.findChild(0,W.buffer.length,$,J-j,X);if(z>-1)return new i1(new ZJ(K,W,Z,j),null,z)}else if(Y&R0.IncludeAnonymous||(!W.type.isAnonymous||R8(W))){let z;if(!(Y&R0.IgnoreMounts)&&(z=f2.get(W))&&!z.overlay)return new K1(z.tree,j,Z,K);let _=new K1(W,j,Z,K);return Y&R0.IncludeAnonymous||!_.type.isAnonymous?_:_.nextChild($<0?W.children.length-1:0,$,J,X,Y)}}if(Y&R0.IncludeAnonymous||!K.type.isAnonymous)return null;if(K.index>=0)Z=K.index+$;else Z=$<0?-1:K._parent._tree.children.length;if(K=K._parent,!K)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(Z){return this.nextChild(0,1,Z,2)}childBefore(Z){return this.nextChild(this._tree.children.length-1,-1,Z,-2)}prop(Z){return this._tree.prop(Z)}enter(Z,$,J=0){let X;if(!(J&R0.IgnoreOverlays)&&(X=f2.get(this._tree))&&X.overlay){let Y=Z-this.from,Q=J&R0.EnterBracketed&&X.bracketed;for(let{from:K,to:U}of X.overlay)if(($>0||Q?K<=Y:K<Y)&&($<0||Q?U>=Y:U>Y))return new K1(X.tree,X.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,Z,$,J)}nextSignificantParent(){let Z=this;while(Z.type.isAnonymous&&Z._parent)Z=Z._parent;return Z}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function o$(Z,$,J,X){let Y=Z.cursor(),Q=[];if(!Y.firstChild())return Q;if(J!=null){for(let K=!1;!K;)if(K=Y.type.is(J),!Y.nextSibling())return Q}for(;;){if(X!=null&&Y.type.is(X))return Q;if(Y.type.is($))Q.push(Y.node);if(!Y.nextSibling())return X==null?Q:[]}}function V8(Z,$,J=$.length-1){for(let X=Z;J>=0;X=X.parent){if(!X)return!1;if(!X.type.isAnonymous){if($[J]&&$[J]!=X.name)return!1;J--}}return!0}class ZJ{constructor(Z,$,J,X){this.parent=Z,this.buffer=$,this.index=J,this.start=X}}class i1 extends N8{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(Z,$,J){super();this.context=Z,this._parent=$,this.index=J,this.type=Z.buffer.set.types[Z.buffer.buffer[J]]}child(Z,$,J){let{buffer:X}=this.context,Y=X.findChild(this.index+4,X.buffer[this.index+3],Z,$-this.context.start,J);return Y<0?null:new i1(this.context,this,Y)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(Z){return this.child(1,Z,2)}childBefore(Z){return this.child(-1,Z,-2)}prop(Z){return this.type.prop(Z)}enter(Z,$,J=0){if(J&R0.ExcludeBuffers)return null;let{buffer:X}=this.context,Y=X.findChild(this.index+4,X.buffer[this.index+3],$>0?1:-1,Z-this.context.start,$);return Y<0?null:new i1(this.context,this,Y)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(Z){return this._parent?null:this.context.parent.nextChild(this.context.index+Z,Z,0,4)}get nextSibling(){let{buffer:Z}=this.context,$=Z.buffer[this.index+3];if($<(this._parent?Z.buffer[this._parent.index+3]:Z.buffer.length))return new i1(this.context,this._parent,$);return this.externalSibling(1)}get prevSibling(){let{buffer:Z}=this.context,$=this._parent?this._parent.index+4:0;if(this.index==$)return this.externalSibling(-1);return new i1(this.context,this._parent,Z.findChild($,this.index,-1,0,4))}get tree(){return null}toTree(){let Z=[],$=[],{buffer:J}=this.context,X=this.index+4,Y=J.buffer[this.index+3];if(Y>X){let Q=J.buffer[this.index+1];Z.push(J.slice(X,Y,Q)),$.push(0)}return new W0(this.type,Z,$,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function $J(Z){if(!Z.length)return null;let $=0,J=Z[0];for(let Q=1;Q<Z.length;Q++){let K=Z[Q];if(K.from>J.from||K.to<J.to)J=K,$=Q}let X=J instanceof K1&&J.index<0?null:J.parent,Y=Z.slice();if(X)Y[$]=X;else Y.splice($,1);return new JJ(Y,J)}class JJ{constructor(Z,$){this.heads=Z,this.node=$}get next(){return $J(this.heads)}}function eU(Z,$,J){let X=Z.resolveInner($,J),Y=null;for(let Q=X instanceof K1?X:X.context.parent;Q;Q=Q.parent)if(Q.index<0){let K=Q.parent;(Y||(Y=[X])).push(K.resolve($,J)),Q=K}else{let K=f2.get(Q.tree);if(K&&K.overlay&&K.overlay[0].from<=$&&K.overlay[K.overlay.length-1].to>=$){let U=new K1(K.tree,K.overlay[0].from+Q.from,-1,Q);(Y||(Y=[X])).push(h3(U,$,J,!1))}}return Y?$J(Y):X}class r6{get name(){return this.type.name}constructor(Z,$=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=$&~R0.EnterBracketed,Z instanceof K1)this.yieldNode(Z);else{this._tree=Z.context.parent,this.buffer=Z.context;for(let J=Z._parent;J;J=J._parent)this.stack.unshift(J.index);this.bufferNode=Z,this.yieldBuf(Z.index)}}yieldNode(Z){if(!Z)return!1;return this._tree=Z,this.type=Z.type,this.from=Z.from,this.to=Z.to,!0}yieldBuf(Z,$){this.index=Z;let{start:J,buffer:X}=this.buffer;return this.type=$||X.set.types[X.buffer[Z]],this.from=J+X.buffer[Z+1],this.to=J+X.buffer[Z+2],!0}yield(Z){if(!Z)return!1;if(Z instanceof K1)return this.buffer=null,this.yieldNode(Z);return this.buffer=Z.context,this.yieldBuf(Z.index,Z.type)}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(Z,$,J){if(!this.buffer)return this.yield(this._tree.nextChild(Z<0?this._tree._tree.children.length-1:0,Z,$,J,this.mode));let{buffer:X}=this.buffer,Y=X.findChild(this.index+4,X.buffer[this.index+3],Z,$-this.buffer.start,J);if(Y<0)return!1;return this.stack.push(this.index),this.yieldBuf(Y)}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(Z){return this.enterChild(1,Z,2)}childBefore(Z){return this.enterChild(-1,Z,-2)}enter(Z,$,J=this.mode){if(!this.buffer)return this.yield(this._tree.enter(Z,$,J));return J&R0.ExcludeBuffers?!1:this.enterChild(1,Z,$)}parent(){if(!this.buffer)return this.yieldNode(this.mode&R0.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let Z=this.mode&R0.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(Z)}sibling(Z){if(!this.buffer)return!this._tree._parent?!1:this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+Z,Z,0,4,this.mode));let{buffer:$}=this.buffer,J=this.stack.length-1;if(Z<0){let X=J<0?0:this.stack[J]+4;if(this.index!=X)return this.yieldBuf($.findChild(X,this.index,-1,0,4))}else{let X=$.buffer[this.index+3];if(X<(J<0?$.buffer.length:$.buffer[this.stack[J]+3]))return this.yieldBuf(X)}return J<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+Z,Z,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(Z){let $,J,{buffer:X}=this;if(X){if(Z>0){if(this.index<X.buffer.buffer.length)return!1}else for(let Y=0;Y<this.index;Y++)if(X.buffer.buffer[Y+3]<this.index)return!1;({index:$,parent:J}=X)}else({index:$,_parent:J}=this._tree);for(;J;{index:$,_parent:J}=J)if($>-1)for(let Y=$+Z,Q=Z<0?-1:J._tree.children.length;Y!=Q;Y+=Z){let K=J._tree.children[Y];if(this.mode&R0.IncludeAnonymous||K instanceof r1||!K.type.isAnonymous||R8(K))return!1}return!0}move(Z,$){if($&&this.enterChild(Z,0,4))return!0;for(;;){if(this.sibling(Z))return!0;if(this.atLastNode(Z)||!this.parent())return!1}}next(Z=!0){return this.move(1,Z)}prev(Z=!0){return this.move(-1,Z)}moveTo(Z,$=0){while(this.from==this.to||($<1?this.from>=Z:this.from>Z)||($>-1?this.to<=Z:this.to<Z))if(!this.parent())break;while(this.enterChild(1,Z,$));return this}get node(){if(!this.buffer)return this._tree;let Z=this.bufferNode,$=null,J=0;if(Z&&Z.context==this.buffer)Z:for(let X=this.index,Y=this.stack.length;Y>=0;){for(let Q=Z;Q;Q=Q._parent)if(Q.index==X){if(X==this.index)return Q;$=Q,J=Y+1;break Z}X=this.stack[--Y]}for(let X=J;X<this.stack.length;X++)$=new i1(this.buffer,$,this.stack[X]);return this.bufferNode=new i1(this.buffer,$,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(Z,$){for(let J=0;;){let X=!1;if(this.type.isAnonymous||Z(this)!==!1){if(this.firstChild()){J++;continue}if(!this.type.isAnonymous)X=!0}for(;;){if(X&&$)$(this);if(X=this.type.isAnonymous,!J)return;if(this.nextSibling())break;this.parent(),J--,X=!0}}}matchContext(Z){if(!this.buffer)return V8(this.node.parent,Z);let{buffer:$}=this.buffer,{types:J}=$.set;for(let X=Z.length-1,Y=this.stack.length-1;X>=0;Y--){if(Y<0)return V8(this._tree,Z,X);let Q=J[$.buffer[this.stack[Y]]];if(!Q.isAnonymous){if(Z[X]&&Z[X]!=Q.name)return!1;X--}}return!0}}function R8(Z){return Z.children.some(($)=>$ instanceof r1||!$.type.isAnonymous||R8($))}function Zq(Z){var $;let{buffer:J,nodeSet:X,maxBufferLength:Y=1024,reused:Q=[],minRepeatType:K=X.types.length}=Z,U=Array.isArray(J)?new H8(J,J.length):J,q=X.types,G=0,W=0;function j(B,w,S,d,r,T){let{id:P,start:E,end:y,size:g}=U,o=W,F0=G;if(g<0)if(U.next(),g==-1){let H=Q[P];S.push(H),d.push(E-B);return}else if(g==-3){G=P;return}else if(g==-4){W=P;return}else throw RangeError(`Unrecognized record size: ${g}`);let P0=q[P],$1,L0,R=E-B;if(y-E<=Y&&(L0=N(U.pos-w,r))){let H=new Uint16Array(L0.size-L0.skip),h=U.pos-L0.size,u=H.length;while(U.pos>h)u=F(L0.start,H,u);$1=new r1(H,y-L0.start,X),R=L0.start-B}else{let H=U.pos-g;U.next();let h=[],u=[],l=P>=K?P:-1,c=0,s=y;while(U.pos>H)if(l>=0&&U.id==l&&U.size>=0){if(U.end<=s-Y)V(h,u,E,c,U.end,s,l,o,F0),c=h.length,s=U.end;U.next()}else if(T>2500)z(E,H,h,u);else j(E,H,h,u,l,T+1);if(l>=0&&c>0&&c<h.length)V(h,u,E,c,E,s,l,o,F0);if(h.reverse(),u.reverse(),l>-1&&c>0){let f=_(P0,F0);$1=F8(P0,h,u,0,h.length,0,y-E,f,f)}else $1=O(P0,h,u,y-E,o-y,F0)}S.push($1),d.push(R)}function z(B,w,S,d){let r=[],T=0,P=-1;while(U.pos>w){let{id:E,start:y,end:g,size:o}=U;if(o>4)U.next();else if(P>-1&&y<P)break;else{if(P<0)P=g-Y;r.push(E,y,g),T++,U.next()}}if(T){let E=new Uint16Array(T*4),y=r[r.length-2];for(let g=r.length-3,o=0;g>=0;g-=3)E[o++]=r[g],E[o++]=r[g+1]-y,E[o++]=r[g+2]-y,E[o++]=o;S.push(new r1(E,r[2]-y,X)),d.push(y-B)}}function _(B,w){return(S,d,r)=>{let T=0,P=S.length-1,E,y;if(P>=0&&(E=S[P])instanceof W0){if(!P&&E.type==B&&E.length==r)return E;if(y=E.prop(a.lookAhead))T=d[P]+E.length+y}return O(B,S,d,r,T,w)}}function V(B,w,S,d,r,T,P,E,y){let g=[],o=[];while(B.length>d)g.push(B.pop()),o.push(w.pop()+S-r);B.push(O(X.types[P],g,o,T-r,E-T,y)),w.push(r-S)}function O(B,w,S,d,r,T,P){if(T){let E=[a.contextHash,T];P=P?[E].concat(P):[E]}if(r>25){let E=[a.lookAhead,r];P=P?[E].concat(P):[E]}return new W0(B,w,S,d,P)}function N(B,w){let S=U.fork(),d=0,r=0,T=0,P=S.end-Y,E={size:0,start:0,skip:0};Z:for(let y=S.pos-B;S.pos>y;){let g=S.size;if(S.id==w&&g>=0){E.size=d,E.start=r,E.skip=T,T+=4,d+=4,S.next();continue}let o=S.pos-g;if(g<0||o<y||S.start<P)break;let F0=S.id>=K?4:0,P0=S.start;S.next();while(S.pos>o){if(S.size<0)if(S.size==-3||S.size==-4)F0+=4;else break Z;else if(S.id>=K)F0+=4;S.next()}r=P0,d+=g,T+=F0}if(w<0||d==B)E.size=d,E.start=r,E.skip=T;return E.size>4?E:void 0}function F(B,w,S){let{id:d,start:r,end:T,size:P}=U;if(U.next(),P>=0&&d<K){let E=S;if(P>4){let y=U.pos-(P-4);while(U.pos>y)S=F(B,w,S)}w[--S]=E,w[--S]=T-B,w[--S]=r-B,w[--S]=d}else if(P==-3)G=d;else if(P==-4)W=d;return S}let D=[],A=[];while(U.pos>0)j(Z.start||0,Z.bufferStart||0,D,A,-1,0);let L=($=Z.length)!==null&&$!==void 0?$:D.length?A[0]+D[0].length:0;return new W0(q[Z.topID],D.reverse(),A.reverse(),L)}var t$=new WeakMap;function i6(Z,$){if(!Z.isAnonymous||$ instanceof r1||$.type!=Z)return 1;let J=t$.get($);if(J==null){J=1;for(let X of $.children){if(X.type!=Z||!(X instanceof W0)){J=1;break}J+=i6(Z,X)}t$.set($,J)}return J}function F8(Z,$,J,X,Y,Q,K,U,q){let G=0;for(let V=X;V<Y;V++)G+=i6(Z,$[V]);let W=Math.ceil(G*1.5/8),j=[],z=[];function _(V,O,N,F,D){for(let A=N;A<F;){let L=A,B=O[A],w=i6(Z,V[A]);A++;for(;A<F;A++){let S=i6(Z,V[A]);if(w+S>=W)break;w+=S}if(A==L+1){if(w>W){let S=V[L];_(S.children,S.positions,0,S.children.length,O[L]+D);continue}j.push(V[L])}else{let S=O[A-1]+V[A-1].length-B;j.push(F8(Z,V,O,L,A,B,S,null,q))}z.push(B+D-Q)}}return _($,J,X,Y,0),(U||q)(j,z,K)}class a1{constructor(Z,$,J,X,Y=!1,Q=!1){this.from=Z,this.to=$,this.tree=J,this.offset=X,this.open=(Y?1:0)|(Q?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(Z,$=[],J=!1){let X=[new a1(0,Z.length,Z,0,!1,J)];for(let Y of $)if(Y.to>Z.length)X.push(Y);return X}static applyChanges(Z,$,J=128){if(!$.length)return Z;let X=[],Y=1,Q=Z.length?Z[0]:null;for(let K=0,U=0,q=0;;K++){let G=K<$.length?$[K]:null,W=G?G.fromA:1e9;if(W-U>=J)while(Q&&Q.from<W){let j=Q;if(U>=j.from||W<=j.to||q){let z=Math.max(j.from,U)-q,_=Math.min(j.to,W)-q;j=z>=_?null:new a1(z,_,j.tree,j.offset+q,K>0,!!G)}if(j)X.push(j);if(Q.to>W)break;Q=Y<Z.length?Z[Y++]:null}if(!G)break;U=G.toA,q=G.toA-G.toB}return X}}class o6{startParse(Z,$,J){if(typeof Z=="string")Z=new XJ(Z);return J=!J?[new n6(0,Z.length)]:J.length?J.map((X)=>new n6(X.from,X.to)):[new n6(0,0)],this.createParse(Z,$||[],J)}parse(Z,$,J){let X=this.startParse(Z,$,J);for(;;){let Y=X.advance();if(Y)return Y}}}class XJ{constructor(Z){this.string=Z}get length(){return this.string.length}chunk(Z){return this.string.slice(Z)}get lineChunks(){return!1}read(Z,$){return this.string.slice(Z,$)}}var O_=new a({perNode:!0});var $q=0;class U1{constructor(Z,$,J,X){this.name=Z,this.set=$,this.base=J,this.modified=X,this.id=$q++}toString(){let{name:Z}=this;for(let $ of this.modified)if($.name)Z=`${$.name}(${Z})`;return Z}static define(Z,$){let J=typeof Z=="string"?Z:"?";if(Z instanceof U1)$=Z;if($===null||$===void 0?void 0:$.base)throw Error("Can not derive from a modified tag");let X=new U1(J,[],null,[]);if(X.set.push(X),$)for(let Y of $.set)X.set.push(Y);return X}static defineModifier(Z){let $=new $9(Z);return(J)=>{if(J.modified.indexOf($)>-1)return J;return $9.get(J.base||J,J.modified.concat($).sort((X,Y)=>X.id-Y.id))}}}var Jq=0;class $9{constructor(Z){this.name=Z,this.instances=[],this.id=Jq++}static get(Z,$){if(!$.length)return Z;let J=$[0].instances.find((K)=>K.base==Z&&Xq($,K.modified));if(J)return J;let X=[],Y=new U1(Z.name,X,Z,$);for(let K of $)K.instances.push(Y);let Q=Yq($);for(let K of Z.set)if(!K.modified.length)for(let U of Q)X.push($9.get(K,U));return Y}}function Xq(Z,$){return Z.length==$.length&&Z.every((J,X)=>J==$[X])}function Yq(Z){let $=[[]];for(let J=0;J<Z.length;J++)for(let X=0,Y=$.length;X<Y;X++)$.push($[X].concat(Z[J]));return $.sort((J,X)=>X.length-J.length)}function KJ(Z){let $=Object.create(null);for(let J in Z){let X=Z[J];if(!Array.isArray(X))X=[X];for(let Y of J.split(" "))if(Y){let Q=[],K=2,U=Y;for(let j=0;;){if(U=="..."&&j>0&&j+3==Y.length){K=1;break}let z=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(U);if(!z)throw RangeError("Invalid path: "+Y);if(Q.push(z[0]=="*"?"":z[0][0]=='"'?JSON.parse(z[0]):z[0]),j+=z[0].length,j==Y.length)break;let _=Y[j++];if(j==Y.length&&_=="!"){K=0;break}if(_!="/")throw RangeError("Invalid path: "+Y);U=Y.slice(j)}let q=Q.length-1,G=Q[q];if(!G)throw RangeError("Invalid path: "+Y);let W=new p2(X,K,q>0?Q.slice(0,q):null);$[G]=W.sort($[G])}}return UJ.add($)}var UJ=new a({combine(Z,$){let J,X,Y;while(Z||$){if(!Z||$&&Z.depth>=$.depth)Y=$,$=$.next;else Y=Z,Z=Z.next;if(J&&J.mode==Y.mode&&!Y.context&&!J.context)continue;let Q=new p2(Y.tags,Y.mode,Y.context);if(J)J.next=Q;else X=Q;J=Q}return X}});class p2{constructor(Z,$,J,X){this.tags=Z,this.mode=$,this.context=J,this.next=X}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(Z){if(!Z||Z.depth<this.depth)return this.next=Z,this;return Z.next=this.sort(Z.next),Z}get depth(){return this.context?this.context.length:0}}p2.empty=new p2([],2,null);function M8(Z,$){let J=Object.create(null);for(let Q of Z)if(!Array.isArray(Q.tag))J[Q.tag.id]=Q.class;else for(let K of Q.tag)J[K.id]=Q.class;let{scope:X,all:Y=null}=$||{};return{style:(Q)=>{let K=Y;for(let U of Q)for(let q of U.set){let G=J[q.id];if(G){K=K?K+" "+G:G;break}}return K},scope:X}}function Qq(Z,$){let J=null;for(let X of Z){let Y=X.style($);if(Y)J=J?J+" "+Y:Y}return J}function qJ(Z,$,J,X=0,Y=Z.length){let Q=new GJ(X,Array.isArray($)?$:[$],J);Q.highlightRange(Z.cursor(),X,Y,"",Q.highlighters),Q.flush(Y)}class GJ{constructor(Z,$,J){this.at=Z,this.highlighters=$,this.span=J,this.class=""}startSpan(Z,$){if($!=this.class){if(this.flush(Z),Z>this.at)this.at=Z;this.class=$}}flush(Z){if(Z>this.at&&this.class)this.span(this.at,Z,this.class)}highlightRange(Z,$,J,X,Y){let{type:Q,from:K,to:U}=Z;if(K>=J||U<=$)return;if(Q.isTop)Y=this.highlighters.filter((z)=>!z.scope||z.scope(Q));let q=X,G=Kq(Z)||p2.empty,W=Qq(Y,G.tags);if(W){if(q)q+=" ";if(q+=W,G.mode==1)X+=(X?" ":"")+W}if(this.startSpan(Math.max($,K),q),G.opaque)return;let j=Z.tree&&Z.tree.prop(a.mounted);if(j&&j.overlay){let z=Z.node.enter(j.overlay[0].from+K,1),_=this.highlighters.filter((O)=>!O.scope||O.scope(j.tree.type)),V=Z.firstChild();for(let O=0,N=K;;O++){let F=O<j.overlay.length?j.overlay[O]:null,D=F?F.from+K:U,A=Math.max($,N),L=Math.min(J,D);if(A<L&&V){while(Z.from<L)if(this.highlightRange(Z,A,L,X,Y),this.startSpan(Math.min(L,Z.to),q),Z.to>=D||!Z.nextSibling())break}if(!F||D>J)break;if(N=F.to+K,N>$)this.highlightRange(z.cursor(),Math.max($,F.from+K),Math.min(J,N),"",_),this.startSpan(Math.min(J,N),q)}if(V)Z.parent()}else if(Z.firstChild()){if(j)X="";do{if(Z.to<=$)continue;if(Z.from>=J)break;this.highlightRange(Z,$,J,X,Y),this.startSpan(Math.min(J,Z.to),q)}while(Z.nextSibling());Z.parent()}}}function Kq(Z){let $=Z.type.prop(UJ);while($&&$.context&&!Z.matchContext($.context))$=$.next;return $||null}var b=U1.define,t6=b(),o1=b(),YJ=b(o1),QJ=b(o1),t1=b(),e6=b(t1),I8=b(t1),x1=b(),N2=b(x1),k1=b(),S1=b(),D8=b(),v3=b(D8),Z9=b(),I={comment:t6,lineComment:b(t6),blockComment:b(t6),docComment:b(t6),name:o1,variableName:b(o1),typeName:YJ,tagName:b(YJ),propertyName:QJ,attributeName:b(QJ),className:b(o1),labelName:b(o1),namespace:b(o1),macroName:b(o1),literal:t1,string:e6,docString:b(e6),character:b(e6),attributeValue:b(e6),number:I8,integer:b(I8),float:b(I8),bool:b(t1),regexp:b(t1),escape:b(t1),color:b(t1),url:b(t1),keyword:k1,self:b(k1),null:b(k1),atom:b(k1),unit:b(k1),modifier:b(k1),operatorKeyword:b(k1),controlKeyword:b(k1),definitionKeyword:b(k1),moduleKeyword:b(k1),operator:S1,derefOperator:b(S1),arithmeticOperator:b(S1),logicOperator:b(S1),bitwiseOperator:b(S1),compareOperator:b(S1),updateOperator:b(S1),definitionOperator:b(S1),typeOperator:b(S1),controlOperator:b(S1),punctuation:D8,separator:b(D8),bracket:v3,angleBracket:b(v3),squareBracket:b(v3),paren:b(v3),brace:b(v3),content:x1,heading:N2,heading1:b(N2),heading2:b(N2),heading3:b(N2),heading4:b(N2),heading5:b(N2),heading6:b(N2),contentSeparator:b(x1),list:b(x1),quote:b(x1),emphasis:b(x1),strong:b(x1),link:b(x1),monospace:b(x1),strikethrough:b(x1),inserted:b(),deleted:b(),changed:b(),invalid:b(),meta:Z9,documentMeta:b(Z9),annotation:b(Z9),processingInstruction:b(Z9),definition:U1.defineModifier("definition"),constant:U1.defineModifier("constant"),function:U1.defineModifier("function"),standard:U1.defineModifier("standard"),local:U1.defineModifier("local"),special:U1.defineModifier("special")};for(let Z in I){let $=I[Z];if($ instanceof U1)$.name=Z}var N_=M8([{tag:I.link,class:"tok-link"},{tag:I.heading,class:"tok-heading"},{tag:I.emphasis,class:"tok-emphasis"},{tag:I.strong,class:"tok-strong"},{tag:I.keyword,class:"tok-keyword"},{tag:I.atom,class:"tok-atom"},{tag:I.bool,class:"tok-bool"},{tag:I.url,class:"tok-url"},{tag:I.labelName,class:"tok-labelName"},{tag:I.inserted,class:"tok-inserted"},{tag:I.deleted,class:"tok-deleted"},{tag:I.literal,class:"tok-literal"},{tag:I.string,class:"tok-string"},{tag:I.number,class:"tok-number"},{tag:[I.regexp,I.escape,I.special(I.string)],class:"tok-string2"},{tag:I.variableName,class:"tok-variableName"},{tag:I.local(I.variableName),class:"tok-variableName tok-local"},{tag:I.definition(I.variableName),class:"tok-variableName tok-definition"},{tag:I.special(I.variableName),class:"tok-variableName2"},{tag:I.definition(I.propertyName),class:"tok-propertyName tok-definition"},{tag:I.typeName,class:"tok-typeName"},{tag:I.namespace,class:"tok-namespace"},{tag:I.className,class:"tok-className"},{tag:I.macroName,class:"tok-macroName"},{tag:I.propertyName,class:"tok-propertyName"},{tag:I.operator,class:"tok-operator"},{tag:I.comment,class:"tok-comment"},{tag:I.meta,class:"tok-meta"},{tag:I.invalid,class:"tok-invalid"},{tag:I.punctuation,class:"tok-punctuation"}]);var A8,l2=new a;function Uq(Z){return k.define({combine:Z?($)=>$.concat(Z):void 0})}var qq=new a;class q1{constructor(Z,$,J=[],X=""){if(this.data=Z,this.name=X,!n.prototype.hasOwnProperty("tree"))Object.defineProperty(n.prototype,"tree",{get(){return B0(this)}});this.parser=$,this.extension=[e1.of(this),n.languageData.of((Y,Q,K)=>{let U=WJ(Y,Q,K),q=U.type.prop(l2);if(!q)return[];let G=Y.facet(q),W=U.type.prop(qq);if(W){let j=U.resolve(Q-U.from,K);for(let z of W)if(z.test(j,Y)){let _=Y.facet(z.facet);return z.type=="replace"?_:_.concat(G)}}return G})].concat(J)}isActiveAt(Z,$,J=-1){return WJ(Z,$,J).type.prop(l2)==this.data}findRegions(Z){let $=Z.facet(e1);if(($===null||$===void 0?void 0:$.data)==this.data)return[{from:0,to:Z.doc.length}];if(!$||!$.allowsNesting)return[];let J=[],X=(Y,Q)=>{if(Y.prop(l2)==this.data){J.push({from:Q,to:Q+Y.length});return}let K=Y.prop(a.mounted);if(K){if(K.tree.prop(l2)==this.data){if(K.overlay)for(let U of K.overlay)J.push({from:U.from+Q,to:U.to+Q});else J.push({from:Q,to:Q+Y.length});return}else if(K.overlay){let U=J.length;if(X(K.tree,K.overlay[0].from+Q),J.length>U)return}}for(let U=0;U<Y.children.length;U++){let q=Y.children[U];if(q instanceof W0)X(q,Y.positions[U]+Q)}};return X(B0(Z),0),J}get allowsNesting(){return!0}}q1.setState=p.define();function WJ(Z,$,J){let X=Z.facet(e1),Y=B0(Z).topNode;if(!X||X.allowsNesting){for(let Q=Y;Q;Q=Q.enter($,J,R0.ExcludeBuffers|R0.EnterBracketed))if(Q.type.isTop)Y=Q}return Y}function B0(Z){let $=Z.field(q1.state,!1);return $?$.tree:W0.empty}class RJ{constructor(Z){this.doc=Z,this.cursorPos=0,this.string="",this.cursor=Z.iter()}get length(){return this.doc.length}syncTo(Z){return this.string=this.cursor.next(Z-this.cursorPos).value,this.cursorPos=Z+this.string.length,this.cursorPos-this.string.length}chunk(Z){return this.syncTo(Z),this.string}get lineChunks(){return!0}read(Z,$){let J=this.cursorPos-this.string.length;if(Z<J||$>=this.cursorPos)return this.doc.sliceString(Z,$);else return this.string.slice(Z-J,$-J)}}var u3=null;class d2{constructor(Z,$,J=[],X,Y,Q,K,U){this.parser=Z,this.state=$,this.fragments=J,this.tree=X,this.treeLen=Y,this.viewport=Q,this.skipped=K,this.scheduleOn=U,this.parse=null,this.tempSkipped=[]}static create(Z,$,J){return new d2(Z,$,[],W0.empty,0,J,[],null)}startParse(){return this.parser.startParse(new RJ(this.state.doc),this.fragments)}work(Z,$){if($!=null&&$>=this.state.doc.length)$=void 0;if(this.tree!=W0.empty&&this.isDone($!==null&&$!==void 0?$:this.state.doc.length))return this.takeTree(),!0;return this.withContext(()=>{var J;if(typeof Z=="number"){let X=Date.now()+Z;Z=()=>Date.now()>X}if(!this.parse)this.parse=this.startParse();if($!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>$)&&$<this.state.doc.length)this.parse.stopAt($);for(;;){let X=this.parse.advance();if(X)if(this.fragments=this.withoutTempSkipped(a1.addTree(X,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(J=this.parse.stoppedAt)!==null&&J!==void 0?J:this.state.doc.length,this.tree=X,this.parse=null,this.treeLen<($!==null&&$!==void 0?$:this.state.doc.length))this.parse=this.startParse();else return!0;if(Z())return!1}})}takeTree(){let Z,$;if(this.parse&&(Z=this.parse.parsedPos)>=this.treeLen){if(this.parse.stoppedAt==null||this.parse.stoppedAt>Z)this.parse.stopAt(Z);this.withContext(()=>{while(!($=this.parse.advance()));}),this.treeLen=Z,this.tree=$,this.fragments=this.withoutTempSkipped(a1.addTree(this.tree,this.fragments,!0)),this.parse=null}}withContext(Z){let $=u3;u3=this;try{return Z()}finally{u3=$}}withoutTempSkipped(Z){for(let $;$=this.tempSkipped.pop();)Z=jJ(Z,$.from,$.to);return Z}changes(Z,$){let{fragments:J,tree:X,treeLen:Y,viewport:Q,skipped:K}=this;if(this.takeTree(),!Z.empty){let U=[];if(Z.iterChangedRanges((q,G,W,j)=>U.push({fromA:q,toA:G,fromB:W,toB:j})),J=a1.applyChanges(J,U),X=W0.empty,Y=0,Q={from:Z.mapPos(Q.from,-1),to:Z.mapPos(Q.to,1)},this.skipped.length){K=[];for(let q of this.skipped){let G=Z.mapPos(q.from,1),W=Z.mapPos(q.to,-1);if(G<W)K.push({from:G,to:W})}}}return new d2(this.parser,$,J,X,Y,Q,K,this.scheduleOn)}updateViewport(Z){if(this.viewport.from==Z.from&&this.viewport.to==Z.to)return!1;this.viewport=Z;let $=this.skipped.length;for(let J=0;J<this.skipped.length;J++){let{from:X,to:Y}=this.skipped[J];if(X<Z.to&&Y>Z.from)this.fragments=jJ(this.fragments,X,Y),this.skipped.splice(J--,1)}if(this.skipped.length>=$)return!1;return this.reset(),!0}reset(){if(this.parse)this.takeTree(),this.parse=null}skipUntilInView(Z,$){this.skipped.push({from:Z,to:$})}static getSkippingParser(Z){return new class extends o6{createParse($,J,X){let Y=X[0].from,Q=X[X.length-1].to;return{parsedPos:Y,advance(){let U=u3;if(U){for(let q of X)U.tempSkipped.push(q);if(Z)U.scheduleOn=U.scheduleOn?Promise.all([U.scheduleOn,Z]):Z}return this.parsedPos=Q,new W0(g0.none,[],[],Q-Y)},stoppedAt:null,stopAt(){}}}}}isDone(Z){Z=Math.min(Z,this.state.doc.length);let $=this.fragments;return this.treeLen>=Z&&$.length&&$[0].from==0&&$[0].to>=Z}static get(){return u3}}function jJ(Z,$,J){return a1.applyChanges(Z,[{fromA:$,toA:J,fromB:$,toB:J}])}class c2{constructor(Z){this.context=Z,this.tree=Z.tree}apply(Z){if(!Z.docChanged&&this.tree==this.context.tree)return this;let $=this.context.changes(Z.changes,Z.state),J=this.context.treeLen==Z.startState.doc.length?void 0:Math.max(Z.changes.mapPos(this.context.treeLen),$.viewport.to);if(!$.work(20,J))$.takeTree();return new c2($)}static init(Z){let $=Math.min(3000,Z.doc.length),J=d2.create(Z.facet(e1).parser,Z,{from:0,to:$});if(!J.work(20,$))J.takeTree();return new c2(J)}}q1.state=z0.define({create:c2.init,update(Z,$){for(let J of $.effects)if(J.is(q1.setState))return J.value;if($.startState.facet(e1)!=$.state.facet(e1))return c2.init($.state);return Z.apply($)}});var FJ=(Z)=>{let $=setTimeout(()=>Z(),500);return()=>clearTimeout($)};if(typeof requestIdleCallback<"u")FJ=(Z)=>{let $=-1,J=setTimeout(()=>{$=requestIdleCallback(Z,{timeout:400})},100);return()=>$<0?clearTimeout(J):cancelIdleCallback($)};var L8=typeof navigator<"u"&&((A8=navigator.scheduling)===null||A8===void 0?void 0:A8.isInputPending)?()=>navigator.scheduling.isInputPending():null,Gq=j0.fromClass(class{constructor($){this.view=$,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update($){let J=this.view.state.field(q1.state).context;if(J.updateViewport($.view.viewport)||this.view.viewport.to>J.treeLen)this.scheduleWork();if($.docChanged||$.selectionSet){if(this.view.hasFocus)this.chunkBudget+=50;this.scheduleWork()}this.checkAsyncSchedule(J)}scheduleWork(){if(this.working)return;let{state:$}=this.view,J=$.field(q1.state);if(J.tree!=J.context.tree||!J.context.isDone($.doc.length))this.working=FJ(this.work)}work($){this.working=null;let J=Date.now();if(this.chunkEnd<J&&(this.chunkEnd<0||this.view.hasFocus))this.chunkEnd=J+30000,this.chunkBudget=3000;if(this.chunkBudget<=0)return;let{state:X,viewport:{to:Y}}=this.view,Q=X.field(q1.state);if(Q.tree==Q.context.tree&&Q.context.isDone(Y+1e5))return;let K=Date.now()+Math.min(this.chunkBudget,100,$&&!L8?Math.max(25,$.timeRemaining()-5):1e9),U=Q.context.treeLen<Y&&X.doc.length>Y+1000,q=Q.context.work(()=>{return L8&&L8()||Date.now()>K},Y+(U?0:1e5));if(this.chunkBudget-=Date.now()-J,q||this.chunkBudget<=0)Q.context.takeTree(),this.view.dispatch({effects:q1.setState.of(new c2(Q.context))});if(this.chunkBudget>0&&!(q&&!U))this.scheduleWork();this.checkAsyncSchedule(Q.context)}checkAsyncSchedule($){if($.scheduleOn)this.workScheduled++,$.scheduleOn.then(()=>this.scheduleWork()).catch((J)=>k0(this.view.state,J)).then(()=>this.workScheduled--),$.scheduleOn=null}destroy(){if(this.working)this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),e1=k.define({combine(Z){return Z.length?Z[0]:null},enables:(Z)=>[q1.state,Gq,C.contentAttributes.compute([Z],($)=>{let J=$.facet(Z);return J&&J.name?{"data-language":J.name}:{}})]});var Wq=k.define(),g3=k.define({combine:(Z)=>{if(!Z.length)return"  ";let $=Z[0];if(!$||/\S/.test($)||Array.from($).some((J)=>J!=$[0]))throw Error("Invalid indent unit: "+JSON.stringify(Z[0]));return $}});function Z2(Z){let $=Z.facet(g3);return $.charCodeAt(0)==9?Z.tabSize*$.length:$.length}function s2(Z,$){let J="",X=Z.tabSize,Y=Z.facet(g3)[0];if(Y=="\t"){while($>=X)J+="\t",$-=X;Y=" "}for(let Q=0;Q<$;Q++)J+=Y;return J}function Q9(Z,$){if(Z instanceof n)Z=new n2(Z);for(let X of Z.state.facet(Wq)){let Y=X(Z,$);if(Y!==void 0)return Y}let J=B0(Z.state);return J.length>=$?jq(Z,J,$):null}class n2{constructor(Z,$={}){this.state=Z,this.options=$,this.unit=Z2(Z)}lineAt(Z,$=1){let J=this.state.doc.lineAt(Z),{simulateBreak:X,simulateDoubleBreak:Y}=this.options;if(X!=null&&X>=J.from&&X<=J.to)if(Y&&X==Z)return{text:"",from:Z};else if($<0?X<Z:X<=Z)return{text:J.text.slice(X-J.from),from:X};else return{text:J.text.slice(0,X-J.from),from:J.from};return J}textAfterPos(Z,$=1){if(this.options.simulateDoubleBreak&&Z==this.options.simulateBreak)return"";let{text:J,from:X}=this.lineAt(Z,$);return J.slice(Z-X,Math.min(J.length,Z+100-X))}column(Z,$=1){let{text:J,from:X}=this.lineAt(Z,$),Y=this.countColumn(J,Z-X),Q=this.options.overrideIndentation?this.options.overrideIndentation(X):-1;if(Q>-1)Y+=Q-this.countColumn(J,J.search(/\S|$/));return Y}countColumn(Z,$=Z.length){return v1(Z,this.state.tabSize,$)}lineIndent(Z,$=1){let{text:J,from:X}=this.lineAt(Z,$),Y=this.options.overrideIndentation;if(Y){let Q=Y(X);if(Q>-1)return Q}return this.countColumn(J,J.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}var IJ=new a;function jq(Z,$,J){let X=$.resolveStack(J),Y=$.resolveInner(J,-1).resolve(J,0).enterUnfinishedNodesBefore(J);if(Y!=X.node){let Q=[];for(let K=Y;K&&!(K.from<X.node.from||K.to>X.node.to||K.from==X.node.from&&K.type==X.node.type);K=K.parent)Q.push(K);for(let K=Q.length-1;K>=0;K--)X={node:Q[K],next:X}}return DJ(X,Z,J)}function DJ(Z,$,J){for(let X=Z;X;X=X.next){let Y=_q(X.node);if(Y)return Y(y8.create($,J,X))}return 0}function zq(Z){return Z.pos==Z.options.simulateBreak&&Z.options.simulateDoubleBreak}function _q(Z){let $=Z.type.prop(IJ);if($)return $;let J=Z.firstChild,X;if(J&&(X=J.type.prop(a.closedBy))){let Y=Z.lastChild,Q=Y&&X.indexOf(Y.name)>-1;return(K)=>Nq(K,!0,1,void 0,Q&&!zq(K)?Y.from:void 0)}return Z.parent==null?Oq:null}function Oq(){return 0}class y8 extends n2{constructor(Z,$,J){super(Z.state,Z.options);this.base=Z,this.pos=$,this.context=J}get node(){return this.context.node}static create(Z,$,J){return new y8(Z,$,J)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(Z){let $=this.state.doc.lineAt(Z.from);for(;;){let J=Z.resolve($.from);while(J.parent&&J.parent.from==J.from)J=J.parent;if(Vq(J,Z))break;$=this.state.doc.lineAt(J.from)}return this.lineIndent($.from)}continue(){return DJ(this.context.next,this.base,this.pos)}}function Vq(Z,$){for(let J=$;J;J=J.parent)if(Z==J)return!0;return!1}function Hq(Z){let $=Z.node,J=$.childAfter($.from),X=$.lastChild;if(!J)return null;let Y=Z.options.simulateBreak,Q=Z.state.doc.lineAt(J.from),K=Y==null||Y<=Q.from?Q.to:Math.min(Q.to,Y);for(let U=J.to;;){let q=$.childAfter(U);if(!q||q==X)return null;if(!q.type.isSkipped){if(q.from>=K)return null;let G=/^ */.exec(Q.text.slice(J.to-Q.from))[0].length;return{from:J.from,to:J.to+G}}U=q.to}}function Nq(Z,$,J,X,Y){let Q=Z.textAfter,K=Q.match(/^\s*/)[0].length,U=X&&Q.slice(K,K+X.length)==X||Y==Z.pos+K,q=$?Hq(Z):null;if(q)return U?Z.column(q.from):Z.column(q.to);return Z.baseIndent+(U?0:Z.unit*J)}var Rq=200;function MJ(){return n.transactionFilter.of((Z)=>{if(!Z.docChanged||!Z.isUserEvent("input.type")&&!Z.isUserEvent("input.complete"))return Z;let $=Z.startState.languageDataAt("indentOnInput",Z.startState.selection.main.head);if(!$.length)return Z;let J=Z.newDoc,{head:X}=Z.newSelection.main,Y=J.lineAt(X);if(X>Y.from+Rq)return Z;let Q=J.sliceString(Y.from,X);if(!$.some((G)=>G.test(Q)))return Z;let{state:K}=Z,U=-1,q=[];for(let{head:G}of K.selection.ranges){let W=K.doc.lineAt(G);if(W.from==U)continue;U=W.from;let j=Q9(K,W.from);if(j==null)continue;let z=/^\s*/.exec(W.text)[0],_=s2(K,j);if(z!=_)q.push({from:W.from,to:W.from+z.length,insert:_})}return q.length?[Z,{changes:q,sequential:!0}]:Z})}var Fq=k.define(),Iq=new a;function Dq(Z,$,J){let X=B0(Z);if(X.length<J)return null;let Y=X.resolveStack(J,1),Q=null;for(let K=Y;K;K=K.next){let U=K.node;if(U.to<=J||U.from>J)continue;if(Q&&U.from<$)break;let q=U.type.prop(Iq);if(q&&(U.to<X.length-50||X.length==Z.doc.length||!Mq(U))){let G=q(U,Z);if(G&&G.from<=J&&G.from>=$&&G.to>J)Q=G}}return Q}function Mq(Z){let $=Z.lastChild;return $&&$.to==Z.to&&$.type.isError}function X9(Z,$,J){for(let X of Z.facet(Fq)){let Y=X(Z,$,J);if(Y)return Y}return Dq(Z,$,J)}function AJ(Z,$){let J=$.mapPos(Z.from,1),X=$.mapPos(Z.to,-1);return J>=X?void 0:{from:J,to:X}}var K9=p.define({map:AJ}),f3=p.define({map:AJ});function LJ(Z){let $=[];for(let{head:J}of Z.state.selection.ranges){if($.some((X)=>X.from<=J&&X.to>=J))continue;$.push(Z.lineBlockAt(J))}return $}var R2=z0.define({create(){return m.none},update(Z,$){if($.isUserEvent("delete"))$.changes.iterChangedRanges((J,X)=>Z=zJ(Z,J,X));Z=Z.map($.changes);for(let J of $.effects)if(J.is(K9)&&!Aq(Z,J.value.from,J.value.to)){let{preparePlaceholder:X}=$.state.facet(b8),Y=!X?_J:m.replace({widget:new yJ(X($.state,J.value))});Z=Z.update({add:[Y.range(J.value.from,J.value.to)]})}else if(J.is(f3))Z=Z.update({filter:(X,Y)=>J.value.from!=X||J.value.to!=Y,filterFrom:J.value.from,filterTo:J.value.to});if($.selection)Z=zJ(Z,$.selection.main.head);return Z},provide:(Z)=>C.decorations.from(Z),toJSON(Z,$){let J=[];return Z.between(0,$.doc.length,(X,Y)=>{J.push(X,Y)}),J},fromJSON(Z){if(!Array.isArray(Z)||Z.length%2)throw RangeError("Invalid JSON for fold state");let $=[];for(let J=0;J<Z.length;){let X=Z[J++],Y=Z[J++];if(typeof X!="number"||typeof Y!="number")throw RangeError("Invalid JSON for fold state");$.push(_J.range(X,Y))}return m.set($,!0)}});function zJ(Z,$,J=$){let X=!1;return Z.between($,J,(Y,Q)=>{if(Y<J&&Q>$)X=!0}),!X?Z:Z.update({filterFrom:$,filterTo:J,filter:(Y,Q)=>Y>=J||Q<=$})}function Y9(Z,$,J){var X;let Y=null;return(X=Z.field(R2,!1))===null||X===void 0||X.between($,J,(Q,K)=>{if(!Y||Y.from>Q)Y={from:Q,to:K}}),Y}function Aq(Z,$,J){let X=!1;return Z.between($,$,(Y,Q)=>{if(Y==$&&Q==J)X=!0}),X}function BJ(Z,$){return Z.field(R2,!1)?$:$.concat(p.appendConfig.of(CJ()))}var Lq=(Z)=>{for(let $ of LJ(Z)){let J=X9(Z.state,$.from,$.to);if(J)return Z.dispatch({effects:BJ(Z.state,[K9.of(J),EJ(Z,J)])}),!0}return!1},Bq=(Z)=>{if(!Z.state.field(R2,!1))return!1;let $=[];for(let J of LJ(Z)){let X=Y9(Z.state,J.from,J.to);if(X)$.push(f3.of(X),EJ(Z,X,!1))}if($.length)Z.dispatch({effects:$});return $.length>0};function EJ(Z,$,J=!0){let X=Z.state.doc.lineAt($.from).number,Y=Z.state.doc.lineAt($.to).number;return C.announce.of(`${Z.state.phrase(J?"Folded lines":"Unfolded lines")} ${X} ${Z.state.phrase("to")} ${Y}.`)}var Eq=(Z)=>{let{state:$}=Z,J=[];for(let X=0;X<$.doc.length;){let Y=Z.lineBlockAt(X),Q=X9($,Y.from,Y.to);if(Q)J.push(K9.of(Q));X=(Q?Z.lineBlockAt(Q.to):Y).to+1}if(J.length)Z.dispatch({effects:BJ(Z.state,J)});return!!J.length},Pq=(Z)=>{let $=Z.state.field(R2,!1);if(!$||!$.size)return!1;let J=[];return $.between(0,Z.state.doc.length,(X,Y)=>{J.push(f3.of({from:X,to:Y}))}),Z.dispatch({effects:J}),!0};var PJ=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Lq},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Bq},{key:"Ctrl-Alt-[",run:Eq},{key:"Ctrl-Alt-]",run:Pq}],Cq={placeholderDOM:null,preparePlaceholder:null,placeholderText:"â€¦"},b8=k.define({combine(Z){return h0(Z,Cq)}});function CJ(Z){let $=[R2,yq];if(Z)$.push(b8.of(Z));return $}function TJ(Z,$){let{state:J}=Z,X=J.facet(b8),Y=(K)=>{let U=Z.lineBlockAt(Z.posAtDOM(K.target)),q=Y9(Z.state,U.from,U.to);if(q)Z.dispatch({effects:f3.of(q)});K.preventDefault()};if(X.placeholderDOM)return X.placeholderDOM(Z,Y,$);let Q=document.createElement("span");return Q.textContent=X.placeholderText,Q.setAttribute("aria-label",J.phrase("folded code")),Q.title=J.phrase("unfold"),Q.className="cm-foldPlaceholder",Q.onclick=Y,Q}var _J=m.replace({widget:new class extends o0{toDOM(Z){return TJ(Z,null)}}});class yJ extends o0{constructor(Z){super();this.value=Z}eq(Z){return this.value==Z.value}toDOM(Z){return TJ(Z,this.value)}}var Tq={openText:"âŒ„",closedText:"â€º",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class J9 extends Q1{constructor(Z,$){super();this.config=Z,this.open=$}eq(Z){return this.config==Z.config&&this.open==Z.open}toDOM(Z){if(this.config.markerDOM)return this.config.markerDOM(this.open);let $=document.createElement("span");return $.textContent=this.open?this.config.openText:this.config.closedText,$.title=Z.state.phrase(this.open?"Fold line":"Unfold line"),$}}function bJ(Z={}){let $={...Tq,...Z},J=new J9($,!0),X=new J9($,!1),Y=j0.fromClass(class{constructor(K){this.from=K.viewport.from,this.markers=this.buildMarkers(K)}update(K){if(K.docChanged||K.viewportChanged||K.startState.facet(e1)!=K.state.facet(e1)||K.startState.field(R2,!1)!=K.state.field(R2,!1)||B0(K.startState)!=B0(K.state)||$.foldingChanged(K))this.markers=this.buildMarkers(K.view)}buildMarkers(K){let U=new n0;for(let q of K.viewportLineBlocks){let G=Y9(K.state,q.from,q.to)?X:X9(K.state,q.from,q.to)?J:null;if(G)U.add(q.from,q.from,G)}return U.finish()}}),{domEventHandlers:Q}=$;return[Y,_8({class:"cm-foldGutter",markers(K){var U;return((U=K.plugin(Y))===null||U===void 0?void 0:U.markers)||i.empty},initialSpacer(){return new J9($,!1)},domEventHandlers:{...Q,click:(K,U,q)=>{if(Q.click&&Q.click(K,U,q))return!0;let G=Y9(K.state,U.from,U.to);if(G)return K.dispatch({effects:f3.of(G)}),!0;let W=X9(K.state,U.from,U.to);if(W)return K.dispatch({effects:K9.of(W)}),!0;return!1}}}),CJ()]}var yq=C.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class i2{constructor(Z,$){this.specs=Z;let J;function X(K){let U=R1.newName();return(J||(J=Object.create(null)))["."+U]=K,U}let Y=typeof $.all=="string"?$.all:$.all?X($.all):void 0,Q=$.scope;this.scope=Q instanceof q1?(K)=>K.prop(l2)==Q.data:Q?(K)=>K==Q:void 0,this.style=M8(Z.map((K)=>({tag:K.tag,class:K.class||X(Object.assign({},K,{tag:null}))})),{all:Y}).style,this.module=J?new R1(J):null,this.themeType=$.themeType}static define(Z,$){return new i2(Z,$||{})}}var P8=k.define(),kJ=k.define({combine(Z){return Z.length?[Z[0]]:null}});function B8(Z){let $=Z.facet(P8);return $.length?$:Z.facet(kJ)}function U9(Z,$){let J=[bq],X;if(Z instanceof i2){if(Z.module)J.push(C.styleModule.of(Z.module));X=Z.themeType}if($===null||$===void 0?void 0:$.fallback)J.push(kJ.of(Z));else if(X)J.push(P8.computeN([C.darkTheme],(Y)=>{return Y.facet(C.darkTheme)==(X=="dark")?[Z]:[]}));else J.push(P8.of(Z));return J}class SJ{constructor(Z){this.markCache=Object.create(null),this.tree=B0(Z.state),this.decorations=this.buildDeco(Z,B8(Z.state)),this.decoratedTo=Z.viewport.to}update(Z){let $=B0(Z.state),J=B8(Z.state),X=J!=B8(Z.startState),{viewport:Y}=Z.view,Q=Z.changes.mapPos(this.decoratedTo,1);if($.length<Y.to&&!X&&$.type==this.tree.type&&Q>=Y.to)this.decorations=this.decorations.map(Z.changes),this.decoratedTo=Q;else if($!=this.tree||Z.viewportChanged||X)this.tree=$,this.decorations=this.buildDeco(Z.view,J),this.decoratedTo=Y.to}buildDeco(Z,$){if(!$||!this.tree.length)return m.none;let J=new n0;for(let{from:X,to:Y}of Z.visibleRanges)qJ(this.tree,$,(Q,K,U)=>{J.add(Q,K,this.markCache[U]||(this.markCache[U]=m.mark({class:U})))},X,Y);return J.finish()}}var bq=N1.high(j0.fromClass(SJ,{decorations:(Z)=>Z.decorations})),xJ=i2.define([{tag:I.meta,color:"#404740"},{tag:I.link,textDecoration:"underline"},{tag:I.heading,textDecoration:"underline",fontWeight:"bold"},{tag:I.emphasis,fontStyle:"italic"},{tag:I.strong,fontWeight:"bold"},{tag:I.strikethrough,textDecoration:"line-through"},{tag:I.keyword,color:"#708"},{tag:[I.atom,I.bool,I.url,I.contentSeparator,I.labelName],color:"#219"},{tag:[I.literal,I.inserted],color:"#164"},{tag:[I.string,I.deleted],color:"#a11"},{tag:[I.regexp,I.escape,I.special(I.string)],color:"#e40"},{tag:I.definition(I.variableName),color:"#00f"},{tag:I.local(I.variableName),color:"#30a"},{tag:[I.typeName,I.namespace],color:"#085"},{tag:I.className,color:"#167"},{tag:[I.special(I.variableName),I.macroName],color:"#256"},{tag:I.definition(I.propertyName),color:"#00c"},{tag:I.comment,color:"#940"},{tag:I.invalid,color:"#f00"}]),kq=C.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),wJ=1e4,hJ="()[]{}",vJ=k.define({combine(Z){return h0(Z,{afterCursor:!0,brackets:hJ,maxScanDistance:wJ,renderMatch:wq})}}),Sq=m.mark({class:"cm-matchingBracket"}),xq=m.mark({class:"cm-nonmatchingBracket"});function wq(Z){let $=[],J=Z.matched?Sq:xq;if($.push(J.range(Z.start.from,Z.start.to)),Z.end)$.push(J.range(Z.end.from,Z.end.to));return $}var hq=z0.define({create(){return m.none},update(Z,$){if(!$.docChanged&&!$.selection)return Z;let J=[],X=$.state.facet(vJ);for(let Y of $.state.selection.ranges){if(!Y.empty)continue;let Q=A1($.state,Y.head,-1,X)||Y.head>0&&A1($.state,Y.head-1,1,X)||X.afterCursor&&(A1($.state,Y.head,1,X)||Y.head<$.state.doc.length&&A1($.state,Y.head+1,-1,X));if(Q)J=J.concat(X.renderMatch(Q,$.state))}return m.set(J,!0)},provide:(Z)=>C.decorations.from(Z)}),vq=[hq,kq];function uJ(Z={}){return[vJ.of(Z),vq]}var uq=new a;function C8(Z,$,J){let X=Z.prop($<0?a.openedBy:a.closedBy);if(X)return X;if(Z.name.length==1){let Y=J.indexOf(Z.name);if(Y>-1&&Y%2==($<0?1:0))return[J[Y+$]]}return null}function T8(Z){let $=Z.type.prop(uq);return $?$(Z.node):Z}function A1(Z,$,J,X={}){let Y=X.maxScanDistance||wJ,Q=X.brackets||hJ,K=B0(Z),U=K.resolveInner($,J);for(let q=U;q;q=q.parent){let G=C8(q.type,J,Q);if(G&&q.from<q.to){let W=T8(q);if(W&&(J>0?$>=W.from&&$<W.to:$>W.from&&$<=W.to))return mq(Z,$,J,q,W,G,Q)}}return gq(Z,$,J,K,U.type,Y,Q)}function mq(Z,$,J,X,Y,Q,K){let U=X.parent,q={from:Y.from,to:Y.to},G=0,W=U===null||U===void 0?void 0:U.cursor();if(W&&(J<0?W.childBefore(X.from):W.childAfter(X.to)))do if(J<0?W.to<=X.from:W.from>=X.to){if(G==0&&Q.indexOf(W.type.name)>-1&&W.from<W.to){let j=T8(W);return{start:q,end:j?{from:j.from,to:j.to}:void 0,matched:!0}}else if(C8(W.type,J,K))G++;else if(C8(W.type,-J,K)){if(G==0){let j=T8(W);return{start:q,end:j&&j.from<j.to?{from:j.from,to:j.to}:void 0,matched:!1}}G--}}while(J<0?W.prevSibling():W.nextSibling());return{start:q,matched:!1}}function gq(Z,$,J,X,Y,Q,K){let U=J<0?Z.sliceDoc($-1,$):Z.sliceDoc($,$+1),q=K.indexOf(U);if(q<0||q%2==0!=J>0)return null;let G={from:J<0?$-1:$,to:J>0?$+1:$},W=Z.doc.iterRange($,J>0?Z.doc.length:0),j=0;for(let z=0;!W.next().done&&z<=Q;){let _=W.value;if(J<0)z+=_.length;let V=$+z*J;for(let O=J>0?0:_.length-1,N=J>0?_.length:-1;O!=N;O+=J){let F=K.indexOf(_[O]);if(F<0||X.resolveInner(V+O,1).type!=Y)continue;if(F%2==0==J>0)j++;else if(j==1)return{start:G,end:{from:V+O,to:V+O+1},matched:F>>1==q>>1};else j--}if(J>0)z+=_.length}return W.done?{start:G,matched:!1}:null}function OJ(Z,$,J,X=0,Y=0){if($==null){if($=Z.search(/[^\s\u00a0]/),$==-1)$=Z.length}let Q=Y;for(let K=X;K<$;K++)if(Z.charCodeAt(K)==9)Q+=J-Q%J;else Q++;return Q}class k8{constructor(Z,$,J,X){this.string=Z,this.tabSize=$,this.indentUnit=J,this.overrideIndent=X,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(Z){let $=this.string.charAt(this.pos),J;if(typeof Z=="string")J=$==Z;else J=$&&(Z instanceof RegExp?Z.test($):Z($));if(J)return++this.pos,$}eatWhile(Z){let $=this.pos;while(this.eat(Z));return this.pos>$}eatSpace(){let Z=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>Z}skipToEnd(){this.pos=this.string.length}skipTo(Z){let $=this.string.indexOf(Z,this.pos);if($>-1)return this.pos=$,!0}backUp(Z){this.pos-=Z}column(){if(this.lastColumnPos<this.start)this.lastColumnValue=OJ(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start;return this.lastColumnValue}indentation(){var Z;return(Z=this.overrideIndent)!==null&&Z!==void 0?Z:OJ(this.string,null,this.tabSize)}match(Z,$,J){if(typeof Z=="string"){let X=(Q)=>J?Q.toLowerCase():Q,Y=this.string.substr(this.pos,Z.length);if(X(Y)==X(Z)){if($!==!1)this.pos+=Z.length;return!0}else return null}else{let X=this.string.slice(this.pos).match(Z);if(X&&X.index>0)return null;if(X&&$!==!1)this.pos+=X[0].length;return X}}current(){return this.string.slice(this.start,this.pos)}}function fq(Z){return{name:Z.name||"",token:Z.token,blankLine:Z.blankLine||(()=>{}),startState:Z.startState||(()=>!0),copyState:Z.copyState||pq,indent:Z.indent||(()=>null),languageData:Z.languageData||{},tokenTable:Z.tokenTable||x8,mergeTokens:Z.mergeTokens!==!1}}function pq(Z){if(typeof Z!="object")return Z;let $={};for(let J in Z){let X=Z[J];$[J]=X instanceof Array?X.slice():X}return $}var VJ=new WeakMap;class F2 extends q1{constructor(Z){let $=Uq(Z.languageData),J=fq(Z),X,Y=new class extends o6{createParse(Q,K,U){return new gJ(X,Q,K,U)}};super($,Y,[],Z.name);this.topNode=sq($,this),X=this,this.streamParser=J,this.stateAfter=new a({perNode:!0}),this.tokenTable=Z.tokenTable?new w8(J.tokenTable):cq}static define(Z){return new F2(Z)}getIndent(Z){let $=void 0,{overrideIndentation:J}=Z.options;if(J){if($=VJ.get(Z.state),$!=null&&$<Z.pos-1e4)$=void 0}let X=S8(this,Z.node.tree,Z.node.from,Z.node.from,$!==null&&$!==void 0?$:Z.pos),Y,Q;if(X)Q=X.state,Y=X.pos+1;else Q=this.streamParser.startState(Z.unit),Y=Z.node.from;if(Z.pos-Y>1e4)return null;while(Y<Z.pos){let U=Z.state.doc.lineAt(Y),q=Math.min(Z.pos,U.to);if(U.length){let G=J?J(U.from):-1,W=new k8(U.text,Z.state.tabSize,Z.unit,G<0?void 0:G);while(W.pos<q-U.from)fJ(this.streamParser.token,W,Q)}else this.streamParser.blankLine(Q,Z.unit);if(q==Z.pos)break;Y=U.to+1}let K=Z.lineAt(Z.pos);if(J&&$==null)VJ.set(Z.state,K.from);return this.streamParser.indent(Q,/^\s*(.*)/.exec(K.text)[1],Z)}get allowsNesting(){return!1}}function S8(Z,$,J,X,Y){let Q=J>=X&&J+$.length<=Y&&$.prop(Z.stateAfter);if(Q)return{state:Z.streamParser.copyState(Q),pos:J+$.length};for(let K=$.children.length-1;K>=0;K--){let U=$.children[K],q=J+$.positions[K],G=U instanceof W0&&q<Y&&S8(Z,U,q,X,Y);if(G)return G}return null}function mJ(Z,$,J,X,Y){if(Y&&J<=0&&X>=$.length)return $;if(!Y&&J==0&&$.type==Z.topNode)Y=!0;for(let Q=$.children.length-1;Q>=0;Q--){let K=$.positions[Q],U=$.children[Q],q;if(K<X&&U instanceof W0){if(!(q=mJ(Z,U,J-K,X-K,Y)))break;return!Y?q:new W0($.type,$.children.slice(0,Q).concat(q),$.positions.slice(0,Q+1),K+q.length)}}return null}function lq(Z,$,J,X,Y){for(let Q of $){let K=Q.from+(Q.openStart?25:0),U=Q.to-(Q.openEnd?25:0),q=K<=J&&U>J&&S8(Z,Q.tree,0-Q.offset,J,U),G;if(q&&q.pos<=X&&(G=mJ(Z,Q.tree,J+Q.offset,q.pos+Q.offset,!1)))return{state:q.state,tree:G}}return{state:Z.streamParser.startState(Y?Z2(Y):4),tree:W0.empty}}class gJ{constructor(Z,$,J,X){this.lang=Z,this.input=$,this.fragments=J,this.ranges=X,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=X[X.length-1].to;let Y=d2.get(),Q=X[0].from,{state:K,tree:U}=lq(Z,J,Q,this.to,Y===null||Y===void 0?void 0:Y.state);this.state=K,this.parsedPos=this.chunkStart=Q+U.length;for(let q=0;q<U.children.length;q++)this.chunks.push(U.children[q]),this.chunkPos.push(U.positions[q]);if(Y&&this.parsedPos<Y.viewport.from-1e5&&X.some((q)=>q.from<=Y.viewport.from&&q.to>=Y.viewport.from))this.state=this.lang.streamParser.startState(Z2(Y.state)),Y.skipUntilInView(this.parsedPos,Y.viewport.from),this.parsedPos=Y.viewport.from;this.moveRangeIndex()}advance(){let Z=d2.get(),$=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),J=Math.min($,this.chunkStart+512);if(Z)J=Math.min(J,Z.viewport.to);while(this.parsedPos<J)this.parseLine(Z);if(this.chunkStart<this.parsedPos)this.finishChunk();if(this.parsedPos>=$)return this.finish();if(Z&&this.parsedPos>=Z.viewport.to)return Z.skipUntilInView(this.parsedPos,$),this.finish();return null}stopAt(Z){this.stoppedAt=Z}lineAfter(Z){let $=this.input.chunk(Z);if(!this.input.lineChunks){let J=$.indexOf(`
`);if(J>-1)$=$.slice(0,J)}else if($==`
`)$="";return Z+$.length<=this.to?$:$.slice(0,this.to-Z)}nextLine(){let Z=this.parsedPos,$=this.lineAfter(Z),J=Z+$.length;for(let X=this.rangeIndex;;){let Y=this.ranges[X].to;if(Y>=J)break;if($=$.slice(0,Y-(J-$.length)),X++,X==this.ranges.length)break;let Q=this.ranges[X].from,K=this.lineAfter(Q);$+=K,J=Q+K.length}return{line:$,end:J}}skipGapsTo(Z,$,J){for(;;){let X=this.ranges[this.rangeIndex].to,Y=Z+$;if(J>0?X>Y:X>=Y)break;let Q=this.ranges[++this.rangeIndex].from;$+=Q-X}return $}moveRangeIndex(){while(this.ranges[this.rangeIndex].to<this.parsedPos)this.rangeIndex++}emitToken(Z,$,J,X){let Y=4;if(this.ranges.length>1){X=this.skipGapsTo($,X,1),$+=X;let K=this.chunk.length;X=this.skipGapsTo(J,X,-1),J+=X,Y+=this.chunk.length-K}let Q=this.chunk.length-4;if(this.lang.streamParser.mergeTokens&&Y==4&&Q>=0&&this.chunk[Q]==Z&&this.chunk[Q+2]==$)this.chunk[Q+2]=J;else this.chunk.push(Z,$,J,Y);return X}parseLine(Z){let{line:$,end:J}=this.nextLine(),X=0,{streamParser:Y}=this.lang,Q=new k8($,Z?Z.state.tabSize:4,Z?Z2(Z.state):2);if(Q.eol())Y.blankLine(this.state,Q.indentUnit);else while(!Q.eol()){let K=fJ(Y.token,Q,this.state);if(K)X=this.emitToken(this.lang.tokenTable.resolve(K),this.parsedPos+Q.start,this.parsedPos+Q.pos,X);if(Q.start>1e4)break}if(this.parsedPos=J,this.moveRangeIndex(),this.parsedPos<this.to)this.parsedPos++}finishChunk(){let Z=W0.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:dq,topID:0,maxBufferLength:512,reused:this.chunkReused});Z=new W0(Z.type,Z.children,Z.positions,Z.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(Z),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new W0(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function fJ(Z,$,J){$.start=$.pos;for(let X=0;X<10;X++){let Y=Z($,J);if($.pos>$.start)return Y}throw Error("Stream parser failed to advance stream.")}var x8=Object.create(null),m3=[g0.none],dq=new a6(m3),HJ=[],NJ=Object.create(null),pJ=Object.create(null);for(let[Z,$]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])pJ[Z]=lJ(x8,$);class w8{constructor(Z){this.extra=Z,this.table=Object.assign(Object.create(null),pJ)}resolve(Z){return!Z?0:this.table[Z]||(this.table[Z]=lJ(this.extra,Z))}}var cq=new w8(x8);function E8(Z,$){if(HJ.indexOf(Z)>-1)return;HJ.push(Z),console.warn($)}function lJ(Z,$){let J=[];for(let U of $.split(" ")){let q=[];for(let G of U.split(".")){let W=Z[G]||I[G];if(!W)E8(G,`Unknown highlighting tag ${G}`);else if(typeof W=="function")if(!q.length)E8(G,`Modifier ${G} used at start of tag`);else q=q.map(W);else if(q.length)E8(G,`Tag ${G} used as modifier`);else q=Array.isArray(W)?W:[W]}for(let G of q)J.push(G)}if(!J.length)return 0;let X=$.replace(/ /g,"_"),Y=X+" "+J.map((U)=>U.id),Q=NJ[Y];if(Q)return Q.id;let K=NJ[Y]=g0.define({id:m3.length,name:X,props:[KJ({[X]:J})]});return m3.push(K),K.id}function sq(Z,$){let J=g0.define({id:m3.length,name:"Document",props:[l2.add(()=>Z),IJ.add(()=>(X)=>$.getIndent(X))],top:!0});return m3.push(J),J}var L_={rtl:m.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:Y0.RTL}),ltr:m.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:Y0.LTR}),auto:m.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var nq=(Z)=>{let{state:$}=Z,J=$.doc.lineAt($.selection.main.from),X=p8(Z.state,J.from);return X.line?iq(Z):X.block?aq(Z):!1};function f8(Z,$){return({state:J,dispatch:X})=>{if(J.readOnly)return!1;let Y=Z($,J);if(!Y)return!1;return X(J.update(Y)),!0}}var iq=f8(eq,0);var rq=f8(tJ,0);var aq=f8((Z,$)=>tJ(Z,$,tq($)),0);function p8(Z,$){let J=Z.languageDataAt("commentTokens",$,1);return J.length?J[0]:{}}var p3=50;function oq(Z,{open:$,close:J},X,Y){let Q=Z.sliceDoc(X-p3,X),K=Z.sliceDoc(Y,Y+p3),U=/\s*$/.exec(Q)[0].length,q=/^\s*/.exec(K)[0].length,G=Q.length-U;if(Q.slice(G-$.length,G)==$&&K.slice(q,q+J.length)==J)return{open:{pos:X-U,margin:U&&1},close:{pos:Y+q,margin:q&&1}};let W,j;if(Y-X<=2*p3)W=j=Z.sliceDoc(X,Y);else W=Z.sliceDoc(X,X+p3),j=Z.sliceDoc(Y-p3,Y);let z=/^\s*/.exec(W)[0].length,_=/\s*$/.exec(j)[0].length,V=j.length-_-J.length;if(W.slice(z,z+$.length)==$&&j.slice(V,V+J.length)==J)return{open:{pos:X+z+$.length,margin:/\s/.test(W.charAt(z+$.length))?1:0},close:{pos:Y-_-J.length,margin:/\s/.test(j.charAt(V-1))?1:0}};return null}function tq(Z){let $=[];for(let J of Z.selection.ranges){let X=Z.doc.lineAt(J.from),Y=J.to<=X.to?X:Z.doc.lineAt(J.to);if(Y.from>X.from&&Y.from==J.to)Y=J.to==X.to+1?X:Z.doc.lineAt(J.to-1);let Q=$.length-1;if(Q>=0&&$[Q].to>X.from)$[Q].to=Y.to;else $.push({from:X.from+/^\s*/.exec(X.text)[0].length,to:Y.to})}return $}function tJ(Z,$,J=$.selection.ranges){let X=J.map((Q)=>p8($,Q.from).block);if(!X.every((Q)=>Q))return null;let Y=J.map((Q,K)=>oq($,X[K],Q.from,Q.to));if(Z!=2&&!Y.every((Q)=>Q))return{changes:$.changes(J.map((Q,K)=>{if(Y[K])return[];return[{from:Q.from,insert:X[K].open+" "},{from:Q.to,insert:" "+X[K].close}]}))};else if(Z!=1&&Y.some((Q)=>Q)){let Q=[];for(let K=0,U;K<Y.length;K++)if(U=Y[K]){let q=X[K],{open:G,close:W}=U;Q.push({from:G.pos-q.open.length,to:G.pos+G.margin},{from:W.pos-W.margin,to:W.pos+q.close.length})}return{changes:Q}}return null}function eq(Z,$,J=$.selection.ranges){let X=[],Y=-1;for(let{from:Q,to:K}of J){let U=X.length,q=1e9,G=p8($,Q).line;if(!G)continue;for(let W=Q;W<=K;){let j=$.doc.lineAt(W);if(j.from>Y&&(Q==K||K>j.from)){Y=j.from;let z=/^\s*/.exec(j.text)[0].length,_=z==j.length,V=j.text.slice(z,z+G.length)==G?z:-1;if(z<j.text.length&&z<q)q=z;X.push({line:j,comment:V,token:G,indent:z,empty:_,single:!1})}W=j.to+1}if(q<1e9){for(let W=U;W<X.length;W++)if(X[W].indent<X[W].line.text.length)X[W].indent=q}if(X.length==U+1)X[U].single=!0}if(Z!=2&&X.some((Q)=>Q.comment<0&&(!Q.empty||Q.single))){let Q=[];for(let{line:U,token:q,indent:G,empty:W,single:j}of X)if(j||!W)Q.push({from:U.from+G,insert:q+" "});let K=$.changes(Q);return{changes:K,selection:$.selection.map(K,1)}}else if(Z!=1&&X.some((Q)=>Q.comment>=0)){let Q=[];for(let{line:K,comment:U,token:q}of X)if(U>=0){let G=K.from+U,W=G+q.length;if(K.text[W-K.from]==" ")W++;Q.push({from:G,to:W})}return{changes:Q}}return null}var v8=r0.define(),ZG=r0.define(),$G=k.define(),eJ=k.define({combine(Z){return h0(Z,{minDepth:100,newGroupDelay:500,joinToEvent:($,J)=>J},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:($,J)=>(X,Y)=>$(X,Y)||J(X,Y)})}}),ZX=z0.define({create(){return w1.empty},update(Z,$){let J=$.state.facet(eJ),X=$.annotation(v8);if(X){let q=d0.fromTransaction($,X.selection),G=X.side,W=G==0?Z.undone:Z.done;if(q)W=G9(W,W.length,J.minDepth,q);else W=YX(W,$.startState.selection);return new w1(G==0?X.rest:W,G==0?W:X.rest)}let Y=$.annotation(ZG);if(Y=="full"||Y=="before")Z=Z.isolate();if($.annotation(H0.addToHistory)===!1)return!$.changes.empty?Z.addMapping($.changes.desc):Z;let Q=d0.fromTransaction($),K=$.annotation(H0.time),U=$.annotation(H0.userEvent);if(Q)Z=Z.addChanges(Q,K,U,J,$);else if($.selection)Z=Z.addSelection($.startState.selection,K,U,J.newGroupDelay);if(Y=="full"||Y=="after")Z=Z.isolate();return Z},toJSON(Z){return{done:Z.done.map(($)=>$.toJSON()),undone:Z.undone.map(($)=>$.toJSON())}},fromJSON(Z){return new w1(Z.done.map(d0.fromJSON),Z.undone.map(d0.fromJSON))}});function $X(Z={}){return[ZX,eJ.of(Z),C.domEventHandlers({beforeinput($,J){let X=$.inputType=="historyUndo"?JX:$.inputType=="historyRedo"?u8:null;if(!X)return!1;return $.preventDefault(),X(J)}})]}function W9(Z,$){return function({state:J,dispatch:X}){if(!$&&J.readOnly)return!1;let Y=J.field(ZX,!1);if(!Y)return!1;let Q=Y.pop(Z,J,$);if(!Q)return!1;return X(Q),!0}}var JX=W9(0,!1),u8=W9(1,!1),JG=W9(0,!0),XG=W9(1,!0);class d0{constructor(Z,$,J,X,Y){this.changes=Z,this.effects=$,this.mapped=J,this.startSelection=X,this.selectionsAfter=Y}setSelAfter(Z){return new d0(this.changes,this.effects,this.mapped,this.startSelection,Z)}toJSON(){var Z,$,J;return{changes:(Z=this.changes)===null||Z===void 0?void 0:Z.toJSON(),mapped:($=this.mapped)===null||$===void 0?void 0:$.toJSON(),startSelection:(J=this.startSelection)===null||J===void 0?void 0:J.toJSON(),selectionsAfter:this.selectionsAfter.map((X)=>X.toJSON())}}static fromJSON(Z){return new d0(Z.changes&&D0.fromJSON(Z.changes),[],Z.mapped&&V1.fromJSON(Z.mapped),Z.startSelection&&M.fromJSON(Z.startSelection),Z.selectionsAfter.map(M.fromJSON))}static fromTransaction(Z,$){let J=G1;for(let X of Z.startState.facet($G)){let Y=X(Z);if(Y.length)J=J.concat(Y)}if(!J.length&&Z.changes.empty)return null;return new d0(Z.changes.invert(Z.startState.doc),J,void 0,$||Z.startState.selection,G1)}static selection(Z){return new d0(void 0,G1,void 0,void 0,Z)}}function G9(Z,$,J,X){let Y=$+1>J+20?$-J-1:0,Q=Z.slice(Y,$);return Q.push(X),Q}function YG(Z,$){let J=[],X=!1;return Z.iterChangedRanges((Y,Q)=>J.push(Y,Q)),$.iterChangedRanges((Y,Q,K,U)=>{for(let q=0;q<J.length;){let G=J[q++],W=J[q++];if(U>=G&&K<=W)X=!0}}),X}function QG(Z,$){return Z.ranges.length==$.ranges.length&&Z.ranges.filter((J,X)=>J.empty!=$.ranges[X].empty).length===0}function XX(Z,$){return!Z.length?$:!$.length?Z:Z.concat($)}var G1=[],KG=200;function YX(Z,$){if(!Z.length)return[d0.selection([$])];else{let J=Z[Z.length-1],X=J.selectionsAfter.slice(Math.max(0,J.selectionsAfter.length-KG));if(X.length&&X[X.length-1].eq($))return Z;return X.push($),G9(Z,Z.length-1,1e9,J.setSelAfter(X))}}function UG(Z){let $=Z[Z.length-1],J=Z.slice();return J[Z.length-1]=$.setSelAfter($.selectionsAfter.slice(0,$.selectionsAfter.length-1)),J}function h8(Z,$){if(!Z.length)return Z;let J=Z.length,X=G1;while(J){let Y=qG(Z[J-1],$,X);if(Y.changes&&!Y.changes.empty||Y.effects.length){let Q=Z.slice(0,J);return Q[J-1]=Y,Q}else $=Y.mapped,J--,X=Y.selectionsAfter}return X.length?[d0.selection(X)]:G1}function qG(Z,$,J){let X=XX(Z.selectionsAfter.length?Z.selectionsAfter.map((U)=>U.map($)):G1,J);if(!Z.changes)return d0.selection(X);let Y=Z.changes.map($),Q=$.mapDesc(Z.changes,!0),K=Z.mapped?Z.mapped.composeDesc(Q):Q;return new d0(Y,p.mapEffects(Z.effects,$),K,Z.startSelection.map(Q),X)}var GG=/^(input\.type|delete)($|\.)/;class w1{constructor(Z,$,J=0,X=void 0){this.done=Z,this.undone=$,this.prevTime=J,this.prevUserEvent=X}isolate(){return this.prevTime?new w1(this.done,this.undone):this}addChanges(Z,$,J,X,Y){let Q=this.done,K=Q[Q.length-1];if(K&&K.changes&&!K.changes.empty&&Z.changes&&(!J||GG.test(J))&&(!K.selectionsAfter.length&&$-this.prevTime<X.newGroupDelay&&X.joinToEvent(Y,YG(K.changes,Z.changes))||J=="input.type.compose"))Q=G9(Q,Q.length-1,X.minDepth,new d0(Z.changes.compose(K.changes),XX(p.mapEffects(Z.effects,K.changes),K.effects),K.mapped,K.startSelection,G1));else Q=G9(Q,Q.length,X.minDepth,Z);return new w1(Q,G1,$,J)}addSelection(Z,$,J,X){let Y=this.done.length?this.done[this.done.length-1].selectionsAfter:G1;if(Y.length>0&&$-this.prevTime<X&&J==this.prevUserEvent&&J&&/^select($|\.)/.test(J)&&QG(Y[Y.length-1],Z))return this;return new w1(YX(this.done,Z),this.undone,$,J)}addMapping(Z){return new w1(h8(this.done,Z),h8(this.undone,Z),this.prevTime,this.prevUserEvent)}pop(Z,$,J){let X=Z==0?this.done:this.undone;if(X.length==0)return null;let Y=X[X.length-1],Q=Y.selectionsAfter[0]||$.selection;if(J&&Y.selectionsAfter.length)return $.update({selection:Y.selectionsAfter[Y.selectionsAfter.length-1],annotations:v8.of({side:Z,rest:UG(X),selection:Q}),userEvent:Z==0?"select.undo":"select.redo",scrollIntoView:!0});else if(!Y.changes)return null;else{let K=X.length==1?G1:X.slice(0,X.length-1);if(Y.mapped)K=h8(K,Y.mapped);return $.update({changes:Y.changes,selection:Y.startSelection,effects:Y.effects,annotations:v8.of({side:Z,rest:K,selection:Q}),filter:!1,userEvent:Z==0?"undo":"redo",scrollIntoView:!0})}}}w1.empty=new w1(G1,G1);var QX=[{key:"Mod-z",run:JX,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:u8,preventDefault:!0},{linux:"Ctrl-Shift-z",run:u8,preventDefault:!0},{key:"Mod-u",run:JG,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:XG,preventDefault:!0}];function r2(Z,$){return M.create(Z.ranges.map($),Z.mainIndex)}function L1(Z,$){return Z.update({selection:$,scrollIntoView:!0,userEvent:"select"})}function B1({state:Z,dispatch:$},J){let X=r2(Z.selection,J);if(X.eq(Z.selection,!0))return!1;return $(L1(Z,X)),!0}function j9(Z,$){return M.cursor($?Z.to:Z.from)}function KX(Z,$){return B1(Z,(J)=>J.empty?Z.moveByChar(J,$):j9(J,$))}function v0(Z){return Z.textDirectionAt(Z.state.selection.main.head)==Y0.LTR}var UX=(Z)=>KX(Z,!v0(Z)),qX=(Z)=>KX(Z,v0(Z));function GX(Z,$){return B1(Z,(J)=>J.empty?Z.moveByGroup(J,$):j9(J,$))}var WG=(Z)=>GX(Z,!v0(Z)),jG=(Z)=>GX(Z,v0(Z));var x_=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function zG(Z,$,J){if($.type.prop(J))return!0;let X=$.to-$.from;return X&&(X>2||/[^\s,.;:]/.test(Z.sliceDoc($.from,$.to)))||$.firstChild}function z9(Z,$,J){let X=B0(Z).resolveInner($.head),Y=J?a.closedBy:a.openedBy;for(let q=$.head;;){let G=J?X.childAfter(q):X.childBefore(q);if(!G)break;if(zG(Z,G,Y))X=G;else q=J?G.to:G.from}let Q=X.type.prop(Y),K,U;if(Q&&(K=J?A1(Z,X.from,1):A1(Z,X.to,-1))&&K.matched)U=J?K.end.to:K.end.from;else U=J?X.to:X.from;return M.cursor(U,J?-1:1)}var _G=(Z)=>B1(Z,($)=>z9(Z.state,$,!v0(Z))),OG=(Z)=>B1(Z,($)=>z9(Z.state,$,v0(Z)));function WX(Z,$){return B1(Z,(J)=>{if(!J.empty)return j9(J,$);let X=Z.moveVertically(J,$);return X.head!=J.head?X:Z.moveToLineBoundary(J,$)})}var jX=(Z)=>WX(Z,!1),zX=(Z)=>WX(Z,!0);function _X(Z){let $=Z.scrollDOM.clientHeight<Z.scrollDOM.scrollHeight-2,J=0,X=0,Y;if($){for(let Q of Z.state.facet(C.scrollMargins)){let K=Q(Z);if(K===null||K===void 0?void 0:K.top)J=Math.max(K===null||K===void 0?void 0:K.top,J);if(K===null||K===void 0?void 0:K.bottom)X=Math.max(K===null||K===void 0?void 0:K.bottom,X)}Y=Z.scrollDOM.clientHeight-J-X}else Y=(Z.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:J,marginBottom:X,selfScroll:$,height:Math.max(Z.defaultLineHeight,Y-5)}}function OX(Z,$){let J=_X(Z),{state:X}=Z,Y=r2(X.selection,(K)=>{return K.empty?Z.moveVertically(K,$,J.height):j9(K,$)});if(Y.eq(X.selection))return!1;let Q;if(J.selfScroll){let K=Z.coordsAtPos(X.selection.main.head),U=Z.scrollDOM.getBoundingClientRect(),q=U.top+J.marginTop,G=U.bottom-J.marginBottom;if(K&&K.top>q&&K.bottom<G)Q=C.scrollIntoView(Y.main.head,{y:"start",yMargin:K.top-q})}return Z.dispatch(L1(X,Y),{effects:Q}),!0}var dJ=(Z)=>OX(Z,!1),m8=(Z)=>OX(Z,!0);function $2(Z,$,J){let X=Z.lineBlockAt($.head),Y=Z.moveToLineBoundary($,J);if(Y.head==$.head&&Y.head!=(J?X.to:X.from))Y=Z.moveToLineBoundary($,J,!1);if(!J&&Y.head==X.from&&X.length){let Q=/^\s*/.exec(Z.state.sliceDoc(X.from,Math.min(X.from+100,X.to)))[0].length;if(Q&&$.head!=X.from+Q)Y=M.cursor(X.from+Q)}return Y}var VG=(Z)=>B1(Z,($)=>$2(Z,$,!0)),HG=(Z)=>B1(Z,($)=>$2(Z,$,!1)),NG=(Z)=>B1(Z,($)=>$2(Z,$,!v0(Z))),RG=(Z)=>B1(Z,($)=>$2(Z,$,v0(Z))),FG=(Z)=>B1(Z,($)=>M.cursor(Z.lineBlockAt($.head).from,1)),IG=(Z)=>B1(Z,($)=>M.cursor(Z.lineBlockAt($.head).to,-1));function DG(Z,$,J){let X=!1,Y=r2(Z.selection,(Q)=>{let K=A1(Z,Q.head,-1)||A1(Z,Q.head,1)||Q.head>0&&A1(Z,Q.head-1,1)||Q.head<Z.doc.length&&A1(Z,Q.head+1,-1);if(!K||!K.end)return Q;X=!0;let U=K.start.from==Q.head?K.end.to:K.end.from;return J?M.range(Q.anchor,U):M.cursor(U)});if(!X)return!1;return $(L1(Z,Y)),!0}var MG=({state:Z,dispatch:$})=>DG(Z,$,!1);function W1(Z,$){let J=r2(Z.state.selection,(X)=>{let Y=$(X);return M.range(X.anchor,Y.head,Y.goalColumn,Y.bidiLevel||void 0)});if(J.eq(Z.state.selection))return!1;return Z.dispatch(L1(Z.state,J)),!0}function VX(Z,$){return W1(Z,(J)=>Z.moveByChar(J,$))}var HX=(Z)=>VX(Z,!v0(Z)),NX=(Z)=>VX(Z,v0(Z));function RX(Z,$){return W1(Z,(J)=>Z.moveByGroup(J,$))}var AG=(Z)=>RX(Z,!v0(Z)),LG=(Z)=>RX(Z,v0(Z));var BG=(Z)=>W1(Z,($)=>z9(Z.state,$,!v0(Z))),EG=(Z)=>W1(Z,($)=>z9(Z.state,$,v0(Z)));function FX(Z,$){return W1(Z,(J)=>Z.moveVertically(J,$))}var IX=(Z)=>FX(Z,!1),DX=(Z)=>FX(Z,!0);function MX(Z,$){return W1(Z,(J)=>Z.moveVertically(J,$,_X(Z).height))}var cJ=(Z)=>MX(Z,!1),sJ=(Z)=>MX(Z,!0),PG=(Z)=>W1(Z,($)=>$2(Z,$,!0)),CG=(Z)=>W1(Z,($)=>$2(Z,$,!1)),TG=(Z)=>W1(Z,($)=>$2(Z,$,!v0(Z))),yG=(Z)=>W1(Z,($)=>$2(Z,$,v0(Z))),bG=(Z)=>W1(Z,($)=>M.cursor(Z.lineBlockAt($.head).from)),kG=(Z)=>W1(Z,($)=>M.cursor(Z.lineBlockAt($.head).to)),nJ=({state:Z,dispatch:$})=>{return $(L1(Z,{anchor:0})),!0},iJ=({state:Z,dispatch:$})=>{return $(L1(Z,{anchor:Z.doc.length})),!0},rJ=({state:Z,dispatch:$})=>{return $(L1(Z,{anchor:Z.selection.main.anchor,head:0})),!0},aJ=({state:Z,dispatch:$})=>{return $(L1(Z,{anchor:Z.selection.main.anchor,head:Z.doc.length})),!0},SG=({state:Z,dispatch:$})=>{return $(Z.update({selection:{anchor:0,head:Z.doc.length},userEvent:"select"})),!0},xG=({state:Z,dispatch:$})=>{let J=_9(Z).map(({from:X,to:Y})=>M.range(X,Math.min(Y+1,Z.doc.length)));return $(Z.update({selection:M.create(J),userEvent:"select"})),!0},wG=({state:Z,dispatch:$})=>{let J=r2(Z.selection,(X)=>{let Y=B0(Z),Q=Y.resolveStack(X.from,1);if(X.empty){let K=Y.resolveStack(X.from,-1);if(K.node.from>=Q.node.from&&K.node.to<=Q.node.to)Q=K}for(let K=Q;K;K=K.next){let{node:U}=K;if((U.from<X.from&&U.to>=X.to||U.to>X.to&&U.from<=X.from)&&K.next)return M.range(U.to,U.from)}return X});if(J.eq(Z.selection))return!1;return $(L1(Z,J)),!0};function AX(Z,$){let{state:J}=Z,X=J.selection,Y=J.selection.ranges.slice();for(let Q of J.selection.ranges){let K=J.doc.lineAt(Q.head);if($?K.to<Z.state.doc.length:K.from>0)for(let U=Q;;){let q=Z.moveVertically(U,$);if(q.head<K.from||q.head>K.to){if(!Y.some((G)=>G.head==q.head))Y.push(q);break}else if(q.head==U.head)break;else U=q}}if(Y.length==X.ranges.length)return!1;return Z.dispatch(L1(J,M.create(Y,Y.length-1))),!0}var hG=(Z)=>AX(Z,!1),vG=(Z)=>AX(Z,!0),uG=({state:Z,dispatch:$})=>{let J=Z.selection,X=null;if(J.ranges.length>1)X=M.create([J.main]);else if(!J.main.empty)X=M.create([M.cursor(J.main.head)]);if(!X)return!1;return $(L1(Z,X)),!0};function l3(Z,$){if(Z.state.readOnly)return!1;let J="delete.selection",{state:X}=Z,Y=X.changeByRange((Q)=>{let{from:K,to:U}=Q;if(K==U){let q=$(Q);if(q<K)J="delete.backward",q=q9(Z,q,!1);else if(q>K)J="delete.forward",q=q9(Z,q,!0);K=Math.min(K,q),U=Math.max(U,q)}else K=q9(Z,K,!1),U=q9(Z,U,!0);return K==U?{range:Q}:{changes:{from:K,to:U},range:M.cursor(K,K<Q.head?-1:1)}});if(Y.changes.empty)return!1;return Z.dispatch(X.update(Y,{scrollIntoView:!0,userEvent:J,effects:J=="delete.selection"?C.announce.of(X.phrase("Selection deleted")):void 0})),!0}function q9(Z,$,J){if(Z instanceof C)for(let X of Z.state.facet(C.atomicRanges).map((Y)=>Y(Z)))X.between($,$,(Y,Q)=>{if(Y<$&&Q>$)$=J?Q:Y});return $}var LX=(Z,$,J)=>l3(Z,(X)=>{let Y=X.from,{state:Q}=Z,K=Q.doc.lineAt(Y),U,q;if(J&&!$&&Y>K.from&&Y<K.from+200&&!/[^ \t]/.test(U=K.text.slice(0,Y-K.from))){if(U[U.length-1]=="\t")return Y-1;let G=v1(U,Q.tabSize),W=G%Z2(Q)||Z2(Q);for(let j=0;j<W&&U[U.length-1-j]==" ";j++)Y--;q=Y}else if(q=N0(K.text,Y-K.from,$,$)+K.from,q==Y&&K.number!=($?Q.doc.lines:1))q+=$?1:-1;else if(!$&&/[\ufe00-\ufe0f]/.test(K.text.slice(q-K.from,Y-K.from)))q=N0(K.text,q-K.from,!1,!1)+K.from;return q}),g8=(Z)=>LX(Z,!1,!0);var BX=(Z)=>LX(Z,!0,!1),EX=(Z,$)=>l3(Z,(J)=>{let X=J.head,{state:Y}=Z,Q=Y.doc.lineAt(X),K=Y.charCategorizer(X);for(let U=null;;){if(X==($?Q.to:Q.from)){if(X==J.head&&Q.number!=($?Y.doc.lines:1))X+=$?1:-1;break}let q=N0(Q.text,X-Q.from,$)+Q.from,G=Q.text.slice(Math.min(X,q)-Q.from,Math.max(X,q)-Q.from),W=K(G);if(U!=null&&W!=U)break;if(G!=" "||X!=J.head)U=W;X=q}return X}),PX=(Z)=>EX(Z,!1),mG=(Z)=>EX(Z,!0);var gG=(Z)=>l3(Z,($)=>{let J=Z.lineBlockAt($.head).to;return $.head<J?J:Math.min(Z.state.doc.length,$.head+1)});var fG=(Z)=>l3(Z,($)=>{let J=Z.moveToLineBoundary($,!1).head;return $.head>J?J:Math.max(0,$.head-1)}),pG=(Z)=>l3(Z,($)=>{let J=Z.moveToLineBoundary($,!0).head;return $.head<J?J:Math.min(Z.state.doc.length,$.head+1)});var lG=({state:Z,dispatch:$})=>{if(Z.readOnly)return!1;let J=Z.changeByRange((X)=>{return{changes:{from:X.from,to:X.to,insert:e.of(["",""])},range:M.cursor(X.from)}});return $(Z.update(J,{scrollIntoView:!0,userEvent:"input"})),!0},dG=({state:Z,dispatch:$})=>{if(Z.readOnly)return!1;let J=Z.changeByRange((X)=>{if(!X.empty||X.from==0||X.from==Z.doc.length)return{range:X};let Y=X.from,Q=Z.doc.lineAt(Y),K=Y==Q.from?Y-1:N0(Q.text,Y-Q.from,!1)+Q.from,U=Y==Q.to?Y+1:N0(Q.text,Y-Q.from,!0)+Q.from;return{changes:{from:K,to:U,insert:Z.doc.slice(Y,U).append(Z.doc.slice(K,Y))},range:M.cursor(U)}});if(J.changes.empty)return!1;return $(Z.update(J,{scrollIntoView:!0,userEvent:"move.character"})),!0};function _9(Z){let $=[],J=-1;for(let X of Z.selection.ranges){let Y=Z.doc.lineAt(X.from),Q=Z.doc.lineAt(X.to);if(!X.empty&&X.to==Q.from)Q=Z.doc.lineAt(X.to-1);if(J>=Y.number){let K=$[$.length-1];K.to=Q.to,K.ranges.push(X)}else $.push({from:Y.from,to:Q.to,ranges:[X]});J=Q.number+1}return $}function CX(Z,$,J){if(Z.readOnly)return!1;let X=[],Y=[];for(let Q of _9(Z)){if(J?Q.to==Z.doc.length:Q.from==0)continue;let K=Z.doc.lineAt(J?Q.to+1:Q.from-1),U=K.length+1;if(J){X.push({from:Q.to,to:K.to},{from:Q.from,insert:K.text+Z.lineBreak});for(let q of Q.ranges)Y.push(M.range(Math.min(Z.doc.length,q.anchor+U),Math.min(Z.doc.length,q.head+U)))}else{X.push({from:K.from,to:Q.from},{from:Q.to,insert:Z.lineBreak+K.text});for(let q of Q.ranges)Y.push(M.range(q.anchor-U,q.head-U))}}if(!X.length)return!1;return $(Z.update({changes:X,scrollIntoView:!0,selection:M.create(Y,Z.selection.mainIndex),userEvent:"move.line"})),!0}var cG=({state:Z,dispatch:$})=>CX(Z,$,!1),sG=({state:Z,dispatch:$})=>CX(Z,$,!0);function TX(Z,$,J){if(Z.readOnly)return!1;let X=[];for(let Q of _9(Z))if(J)X.push({from:Q.from,insert:Z.doc.slice(Q.from,Q.to)+Z.lineBreak});else X.push({from:Q.to,insert:Z.lineBreak+Z.doc.slice(Q.from,Q.to)});let Y=Z.changes(X);return $(Z.update({changes:Y,selection:Z.selection.map(Y,J?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}var nG=({state:Z,dispatch:$})=>TX(Z,$,!1),iG=({state:Z,dispatch:$})=>TX(Z,$,!0),rG=(Z)=>{if(Z.state.readOnly)return!1;let{state:$}=Z,J=$.changes(_9($).map(({from:Y,to:Q})=>{if(Y>0)Y--;else if(Q<$.doc.length)Q++;return{from:Y,to:Q}})),X=r2($.selection,(Y)=>{let Q=void 0;if(Z.lineWrapping){let K=Z.lineBlockAt(Y.head),U=Z.coordsAtPos(Y.head,Y.assoc||1);if(U)Q=K.bottom+Z.documentTop-U.bottom+Z.defaultLineHeight/2}return Z.moveVertically(Y,!0,Q)}).map(J);return Z.dispatch({changes:J,selection:X,scrollIntoView:!0,userEvent:"delete.line"}),!0};function aG(Z,$){if(/\(\)|\[\]|\{\}/.test(Z.sliceDoc($-1,$+1)))return{from:$,to:$};let J=B0(Z).resolveInner($),X=J.childBefore($),Y=J.childAfter($),Q;if(X&&Y&&X.to<=$&&Y.from>=$&&(Q=X.type.prop(a.closedBy))&&Q.indexOf(Y.name)>-1&&Z.doc.lineAt(X.to).from==Z.doc.lineAt(Y.from).from&&!/\S/.test(Z.sliceDoc(X.to,Y.from)))return{from:X.to,to:Y.from};return null}var oJ=yX(!1),oG=yX(!0);function yX(Z){return({state:$,dispatch:J})=>{if($.readOnly)return!1;let X=$.changeByRange((Y)=>{let{from:Q,to:K}=Y,U=$.doc.lineAt(Q),q=!Z&&Q==K&&aG($,Q);if(Z)Q=K=(K<=U.to?U:$.doc.lineAt(K)).to;let G=new n2($,{simulateBreak:Q,simulateDoubleBreak:!!q}),W=Q9(G,Q);if(W==null)W=v1(/^\s*/.exec($.doc.lineAt(Q).text)[0],$.tabSize);while(K<U.to&&/\s/.test(U.text[K-U.from]))K++;if(q)({from:Q,to:K}=q);else if(Q>U.from&&Q<U.from+100&&!/\S/.test(U.text.slice(0,Q)))Q=U.from;let j=["",s2($,W)];if(q)j.push(s2($,G.lineIndent(U.from,-1)));return{changes:{from:Q,to:K,insert:e.of(j)},range:M.cursor(Q+1+j[1].length)}});return J($.update(X,{scrollIntoView:!0,userEvent:"input"})),!0}}function l8(Z,$){let J=-1;return Z.changeByRange((X)=>{let Y=[];for(let K=X.from;K<=X.to;){let U=Z.doc.lineAt(K);if(U.number>J&&(X.empty||X.to>U.from))$(U,Y,X),J=U.number;K=U.to+1}let Q=Z.changes(Y);return{changes:Y,range:M.range(Q.mapPos(X.anchor,1),Q.mapPos(X.head,1))}})}var tG=({state:Z,dispatch:$})=>{if(Z.readOnly)return!1;let J=Object.create(null),X=new n2(Z,{overrideIndentation:(Q)=>{let K=J[Q];return K==null?-1:K}}),Y=l8(Z,(Q,K,U)=>{let q=Q9(X,Q.from);if(q==null)return;if(!/\S/.test(Q.text))q=0;let G=/^\s*/.exec(Q.text)[0],W=s2(Z,q);if(G!=W||U.from<Q.from+G.length)J[Q.from]=q,K.push({from:Q.from,to:Q.from+G.length,insert:W})});if(!Y.changes.empty)$(Z.update(Y,{userEvent:"indent"}));return!0},eG=({state:Z,dispatch:$})=>{if(Z.readOnly)return!1;return $(Z.update(l8(Z,(J,X)=>{X.push({from:J.from,insert:Z.facet(g3)})}),{userEvent:"input.indent"})),!0},ZW=({state:Z,dispatch:$})=>{if(Z.readOnly)return!1;return $(Z.update(l8(Z,(J,X)=>{let Y=/^\s*/.exec(J.text)[0];if(!Y)return;let Q=v1(Y,Z.tabSize),K=0,U=s2(Z,Math.max(0,Q-Z2(Z)));while(K<Y.length&&K<U.length&&Y.charCodeAt(K)==U.charCodeAt(K))K++;X.push({from:J.from+K,to:J.from+Y.length,insert:U.slice(K)})}),{userEvent:"delete.dedent"})),!0},$W=(Z)=>{return Z.setTabFocusMode(),!0};var JW=[{key:"Ctrl-b",run:UX,shift:HX,preventDefault:!0},{key:"Ctrl-f",run:qX,shift:NX},{key:"Ctrl-p",run:jX,shift:IX},{key:"Ctrl-n",run:zX,shift:DX},{key:"Ctrl-a",run:FG,shift:bG},{key:"Ctrl-e",run:IG,shift:kG},{key:"Ctrl-d",run:BX},{key:"Ctrl-h",run:g8},{key:"Ctrl-k",run:gG},{key:"Ctrl-Alt-h",run:PX},{key:"Ctrl-o",run:lG},{key:"Ctrl-t",run:dG},{key:"Ctrl-v",run:m8}],XW=[{key:"ArrowLeft",run:UX,shift:HX,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:WG,shift:AG,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:NG,shift:TG,preventDefault:!0},{key:"ArrowRight",run:qX,shift:NX,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:jG,shift:LG,preventDefault:!0},{mac:"Cmd-ArrowRight",run:RG,shift:yG,preventDefault:!0},{key:"ArrowUp",run:jX,shift:IX,preventDefault:!0},{mac:"Cmd-ArrowUp",run:nJ,shift:rJ},{mac:"Ctrl-ArrowUp",run:dJ,shift:cJ},{key:"ArrowDown",run:zX,shift:DX,preventDefault:!0},{mac:"Cmd-ArrowDown",run:iJ,shift:aJ},{mac:"Ctrl-ArrowDown",run:m8,shift:sJ},{key:"PageUp",run:dJ,shift:cJ},{key:"PageDown",run:m8,shift:sJ},{key:"Home",run:HG,shift:CG,preventDefault:!0},{key:"Mod-Home",run:nJ,shift:rJ},{key:"End",run:VG,shift:PG,preventDefault:!0},{key:"Mod-End",run:iJ,shift:aJ},{key:"Enter",run:oJ,shift:oJ},{key:"Mod-a",run:SG},{key:"Backspace",run:g8,shift:g8,preventDefault:!0},{key:"Delete",run:BX,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:PX,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:mG,preventDefault:!0},{mac:"Mod-Backspace",run:fG,preventDefault:!0},{mac:"Mod-Delete",run:pG,preventDefault:!0}].concat(JW.map((Z)=>({mac:Z.key,run:Z.run,shift:Z.shift}))),bX=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:_G,shift:BG},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:OG,shift:EG},{key:"Alt-ArrowUp",run:cG},{key:"Shift-Alt-ArrowUp",run:nG},{key:"Alt-ArrowDown",run:sG},{key:"Shift-Alt-ArrowDown",run:iG},{key:"Mod-Alt-ArrowUp",run:hG},{key:"Mod-Alt-ArrowDown",run:vG},{key:"Escape",run:uG},{key:"Mod-Enter",run:oG},{key:"Alt-l",mac:"Ctrl-l",run:xG},{key:"Mod-i",run:wG,preventDefault:!0},{key:"Mod-[",run:ZW},{key:"Mod-]",run:eG},{key:"Mod-Alt-\\",run:tG},{key:"Shift-Mod-k",run:rG},{key:"Shift-Mod-\\",run:MG},{key:"Mod-/",run:nq},{key:"Alt-A",run:rq},{key:"Ctrl-m",mac:"Shift-Alt-m",run:$W}].concat(XW);var kX=typeof String.prototype.normalize=="function"?(Z)=>Z.normalize("NFKD"):(Z)=>Z;class I2{constructor(Z,$,J=0,X=Z.length,Y,Q){this.test=Q,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=Z.iterRange(J,X),this.bufferStart=J,this.normalize=Y?(K)=>Y(kX(K)):kX,this.query=this.normalize($)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return y0(this.buffer,this.bufferPos)}next(){while(this.matches.length)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let Z=this.peek();if(Z<0)return this.done=!0,this;let $=j3(Z),J=this.bufferStart+this.bufferPos;this.bufferPos+=i0(Z);let X=this.normalize($);if(X.length)for(let Y=0,Q=J;;Y++){let K=X.charCodeAt(Y),U=this.match(K,Q,this.bufferPos+this.bufferStart);if(Y==X.length-1){if(U)return this.value=U,this;break}if(Q==J&&Y<$.length&&$.charCodeAt(Y)==K)Q++}}}match(Z,$,J){let X=null;for(let Y=0;Y<this.matches.length;Y+=2){let Q=this.matches[Y],K=!1;if(this.query.charCodeAt(Q)==Z)if(Q==this.query.length-1)X={from:this.matches[Y+1],to:J};else this.matches[Y]++,K=!0;if(!K)this.matches.splice(Y,2),Y-=2}if(this.query.charCodeAt(0)==Z)if(this.query.length==1)X={from:$,to:J};else this.matches.push(1,$);if(X&&this.test&&!this.test(X.from,X.to,this.buffer,this.bufferStart))X=null;return X}}if(typeof Symbol<"u")I2.prototype[Symbol.iterator]=function(){return this};var wX={from:-1,to:-1,match:/.*/.exec("")},s8="gm"+(/x/.unicode==null?"":"u");class n8{constructor(Z,$,J,X=0,Y=Z.length){if(this.text=Z,this.to=Y,this.curLine="",this.done=!1,this.value=wX,/\\[sWDnr]|\n|\r|\[\^/.test($))return new i8(Z,$,J,X,Y);this.re=new RegExp($,s8+((J===null||J===void 0?void 0:J.ignoreCase)?"i":"")),this.test=J===null||J===void 0?void 0:J.test,this.iter=Z.iter();let Q=Z.lineAt(X);this.curLineStart=Q.from,this.matchPos=N9(Z,X),this.getLine(this.curLineStart)}getLine(Z){if(this.iter.next(Z),this.iter.lineBreak)this.curLine="";else{if(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to)this.curLine=this.curLine.slice(0,this.to-this.curLineStart);this.iter.next()}}nextLine(){if(this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to)this.curLine="";else this.getLine(0)}next(){for(let Z=this.matchPos-this.curLineStart;;){this.re.lastIndex=Z;let $=this.matchPos<=this.to&&this.re.exec(this.curLine);if($){let J=this.curLineStart+$.index,X=J+$[0].length;if(this.matchPos=N9(this.text,X+(J==X?1:0)),J==this.curLineStart+this.curLine.length)this.nextLine();if((J<X||J>this.value.to)&&(!this.test||this.test(J,X,$)))return this.value={from:J,to:X,match:$},this;Z=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),Z=0;else return this.done=!0,this}}}var d8=new WeakMap;class t2{constructor(Z,$){this.from=Z,this.text=$}get to(){return this.from+this.text.length}static get(Z,$,J){let X=d8.get(Z);if(!X||X.from>=J||X.to<=$){let K=new t2($,Z.sliceString($,J));return d8.set(Z,K),K}if(X.from==$&&X.to==J)return X;let{text:Y,from:Q}=X;if(Q>$)Y=Z.sliceString($,Q)+Y,Q=$;if(X.to<J)Y+=Z.sliceString(X.to,J);return d8.set(Z,new t2(Q,Y)),new t2($,Y.slice($-Q,J-Q))}}class i8{constructor(Z,$,J,X,Y){this.text=Z,this.to=Y,this.done=!1,this.value=wX,this.matchPos=N9(Z,X),this.re=new RegExp($,s8+((J===null||J===void 0?void 0:J.ignoreCase)?"i":"")),this.test=J===null||J===void 0?void 0:J.test,this.flat=t2.get(Z,X,this.chunkEnd(X+5000))}chunkEnd(Z){return Z>=this.to?this.to:this.text.lineAt(Z).to}next(){for(;;){let Z=this.re.lastIndex=this.matchPos-this.flat.from,$=this.re.exec(this.flat.text);if($&&!$[0]&&$.index==Z)this.re.lastIndex=Z+1,$=this.re.exec(this.flat.text);if($){let J=this.flat.from+$.index,X=J+$[0].length;if((this.flat.to>=this.to||$.index+$[0].length<=this.flat.text.length-10)&&(!this.test||this.test(J,X,$)))return this.value={from:J,to:X,match:$},this.matchPos=N9(this.text,X+(J==X?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=t2.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}if(typeof Symbol<"u")n8.prototype[Symbol.iterator]=i8.prototype[Symbol.iterator]=function(){return this};function YW(Z){try{return new RegExp(Z,s8),!0}catch($){return!1}}function N9(Z,$){if($>=Z.length)return $;let J=Z.lineAt($),X;while($<J.to&&(X=J.text.charCodeAt($-J.from))>=56320&&X<57344)$++;return $}var QW=(Z)=>{let{state:$}=Z,J=String($.doc.lineAt(Z.state.selection.main.head).number),{close:X,result:Y}=l$(Z,{label:$.phrase("Go to line"),input:{type:"text",name:"line",value:J},focus:!0,submitLabel:$.phrase("go")});return Y.then((Q)=>{let K=Q&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(Q.elements.line.value);if(!K){Z.dispatch({effects:X});return}let U=$.doc.lineAt($.selection.main.head),[,q,G,W,j]=K,z=W?+W.slice(1):0,_=G?+G:U.number;if(G&&j){let N=_/100;if(q)N=N*(q=="-"?-1:1)+U.number/$.doc.lines;_=Math.round($.doc.lines*N)}else if(G&&q)_=_*(q=="-"?-1:1)+U.number;let V=$.doc.line(Math.max(1,Math.min($.doc.lines,_))),O=M.cursor(V.from+Math.max(0,Math.min(z,V.length)));Z.dispatch({effects:[X,C.scrollIntoView(O.from,{y:"center"})],selection:O})}),!0},KW={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},hX=k.define({combine(Z){return h0(Z,KW,{highlightWordAroundCursor:($,J)=>$||J,minSelectionLength:Math.min,maxMatches:Math.min})}});function vX(Z){let $=[jW,WW];if(Z)$.push(hX.of(Z));return $}var UW=m.mark({class:"cm-selectionMatch"}),qW=m.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function SX(Z,$,J,X){return(J==0||Z($.sliceDoc(J-1,J))!=Q0.Word)&&(X==$.doc.length||Z($.sliceDoc(X,X+1))!=Q0.Word)}function GW(Z,$,J,X){return Z($.sliceDoc(J,J+1))==Q0.Word&&Z($.sliceDoc(X-1,X))==Q0.Word}var WW=j0.fromClass(class{constructor(Z){this.decorations=this.getDeco(Z)}update(Z){if(Z.selectionSet||Z.docChanged||Z.viewportChanged)this.decorations=this.getDeco(Z.view)}getDeco(Z){let $=Z.state.facet(hX),{state:J}=Z,X=J.selection;if(X.ranges.length>1)return m.none;let Y=X.main,Q,K=null;if(Y.empty){if(!$.highlightWordAroundCursor)return m.none;let q=J.wordAt(Y.head);if(!q)return m.none;K=J.charCategorizer(Y.head),Q=J.sliceDoc(q.from,q.to)}else{let q=Y.to-Y.from;if(q<$.minSelectionLength||q>200)return m.none;if($.wholeWords){if(Q=J.sliceDoc(Y.from,Y.to),K=J.charCategorizer(Y.head),!(SX(K,J,Y.from,Y.to)&&GW(K,J,Y.from,Y.to)))return m.none}else if(Q=J.sliceDoc(Y.from,Y.to),!Q)return m.none}let U=[];for(let q of Z.visibleRanges){let G=new I2(J.doc,Q,q.from,q.to);while(!G.next().done){let{from:W,to:j}=G.value;if(!K||SX(K,J,W,j)){if(Y.empty&&W<=Y.from&&j>=Y.to)U.push(qW.range(W,j));else if(W>=Y.to||j<=Y.from)U.push(UW.range(W,j));if(U.length>$.maxMatches)return m.none}}}return m.set(U)}},{decorations:(Z)=>Z.decorations}),jW=C.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),zW=({state:Z,dispatch:$})=>{let{selection:J}=Z,X=M.create(J.ranges.map((Y)=>Z.wordAt(Y.head)||M.cursor(Y.head)),J.mainIndex);if(X.eq(J))return!1;return $(Z.update({selection:X})),!0};function _W(Z,$){let{main:J,ranges:X}=Z.selection,Y=Z.wordAt(J.head),Q=Y&&Y.from==J.from&&Y.to==J.to;for(let K=!1,U=new I2(Z.doc,$,X[X.length-1].to);;)if(U.next(),U.done){if(K)return null;U=new I2(Z.doc,$,0,Math.max(0,X[X.length-1].from-1)),K=!0}else{if(K&&X.some((q)=>q.from==U.value.from))continue;if(Q){let q=Z.wordAt(U.value.from);if(!q||q.from!=U.value.from||q.to!=U.value.to)continue}return U.value}}var OW=({state:Z,dispatch:$})=>{let{ranges:J}=Z.selection;if(J.some((Q)=>Q.from===Q.to))return zW({state:Z,dispatch:$});let X=Z.sliceDoc(J[0].from,J[0].to);if(Z.selection.ranges.some((Q)=>Z.sliceDoc(Q.from,Q.to)!=X))return!1;let Y=_W(Z,X);if(!Y)return!1;return $(Z.update({selection:Z.selection.addRange(M.range(Y.from,Y.to),!1),effects:C.scrollIntoView(Y.to)})),!0},e2=k.define({combine(Z){return h0(Z,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:($)=>new cX($),scrollToMatch:($)=>C.scrollIntoView($)})}});class r8{constructor(Z){this.search=Z.search,this.caseSensitive=!!Z.caseSensitive,this.literal=!!Z.literal,this.regexp=!!Z.regexp,this.replace=Z.replace||"",this.valid=!!this.search&&(!this.regexp||YW(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!Z.wholeWord,this.test=Z.test}unquote(Z){return this.literal?Z:Z.replace(/\\([nrt\\])/g,($,J)=>J=="n"?`
`:J=="r"?"\r":J=="t"?"\t":"\\")}eq(Z){return this.search==Z.search&&this.replace==Z.replace&&this.caseSensitive==Z.caseSensitive&&this.regexp==Z.regexp&&this.wholeWord==Z.wholeWord&&this.test==Z.test}create(){return this.regexp?new mX(this):new uX(this)}getCursor(Z,$=0,J){let X=Z.doc?Z:n.create({doc:Z});if(J==null)J=X.doc.length;return this.regexp?o2(this,X,$,J):a2(this,X,$,J)}}class a8{constructor(Z){this.spec=Z}}function VW(Z,$,J){return(X,Y,Q,K)=>{if(J&&!J(X,Y,Q,K))return!1;let U=X>=K&&Y<=K+Q.length?Q.slice(X-K,Y-K):$.doc.sliceString(X,Y);return Z(U,$,X,Y)}}function a2(Z,$,J,X){let Y;if(Z.wholeWord)Y=HW($.doc,$.charCategorizer($.selection.main.head));if(Z.test)Y=VW(Z.test,$,Y);return new I2($.doc,Z.unquoted,J,X,Z.caseSensitive?void 0:(Q)=>Q.toLowerCase(),Y)}function HW(Z,$){return(J,X,Y,Q)=>{if(Q>J||Q+Y.length<X)Q=Math.max(0,J-2),Y=Z.sliceString(Q,Math.min(Z.length,X+2));return($(R9(Y,J-Q))!=Q0.Word||$(F9(Y,J-Q))!=Q0.Word)&&($(F9(Y,X-Q))!=Q0.Word||$(R9(Y,X-Q))!=Q0.Word)}}class uX extends a8{constructor(Z){super(Z)}nextMatch(Z,$,J){let X=a2(this.spec,Z,J,Z.doc.length).nextOverlapping();if(X.done){let Y=Math.min(Z.doc.length,$+this.spec.unquoted.length);X=a2(this.spec,Z,0,Y).nextOverlapping()}return X.done||X.value.from==$&&X.value.to==J?null:X.value}prevMatchInRange(Z,$,J){for(let X=J;;){let Y=Math.max($,X-1e4-this.spec.unquoted.length),Q=a2(this.spec,Z,Y,X),K=null;while(!Q.nextOverlapping().done)K=Q.value;if(K)return K;if(Y==$)return null;X-=1e4}}prevMatch(Z,$,J){let X=this.prevMatchInRange(Z,0,$);if(!X)X=this.prevMatchInRange(Z,Math.max(0,J-this.spec.unquoted.length),Z.doc.length);return X&&(X.from!=$||X.to!=J)?X:null}getReplacement(Z){return this.spec.unquote(this.spec.replace)}matchAll(Z,$){let J=a2(this.spec,Z,0,Z.doc.length),X=[];while(!J.next().done){if(X.length>=$)return null;X.push(J.value)}return X}highlight(Z,$,J,X){let Y=a2(this.spec,Z,Math.max(0,$-this.spec.unquoted.length),Math.min(J+this.spec.unquoted.length,Z.doc.length));while(!Y.next().done)X(Y.value.from,Y.value.to)}}function NW(Z,$,J){return(X,Y,Q)=>{return(!J||J(X,Y,Q))&&Z(Q[0],$,X,Y)}}function o2(Z,$,J,X){let Y;if(Z.wholeWord)Y=RW($.charCategorizer($.selection.main.head));if(Z.test)Y=NW(Z.test,$,Y);return new n8($.doc,Z.search,{ignoreCase:!Z.caseSensitive,test:Y},J,X)}function R9(Z,$){return Z.slice(N0(Z,$,!1),$)}function F9(Z,$){return Z.slice($,N0(Z,$))}function RW(Z){return($,J,X)=>!X[0].length||(Z(R9(X.input,X.index))!=Q0.Word||Z(F9(X.input,X.index))!=Q0.Word)&&(Z(F9(X.input,X.index+X[0].length))!=Q0.Word||Z(R9(X.input,X.index+X[0].length))!=Q0.Word)}class mX extends a8{nextMatch(Z,$,J){let X=o2(this.spec,Z,J,Z.doc.length).next();if(X.done)X=o2(this.spec,Z,0,$).next();return X.done?null:X.value}prevMatchInRange(Z,$,J){for(let X=1;;X++){let Y=Math.max($,J-X*1e4),Q=o2(this.spec,Z,Y,J),K=null;while(!Q.next().done)K=Q.value;if(K&&(Y==$||K.from>Y+10))return K;if(Y==$)return null}}prevMatch(Z,$,J){return this.prevMatchInRange(Z,0,$)||this.prevMatchInRange(Z,J,Z.doc.length)}getReplacement(Z){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,($,J)=>{if(J=="&")return Z.match[0];if(J=="$")return"$";for(let X=J.length;X>0;X--){let Y=+J.slice(0,X);if(Y>0&&Y<Z.match.length)return Z.match[Y]+J.slice(X)}return $})}matchAll(Z,$){let J=o2(this.spec,Z,0,Z.doc.length),X=[];while(!J.next().done){if(X.length>=$)return null;X.push(J.value)}return X}highlight(Z,$,J,X){let Y=o2(this.spec,Z,Math.max(0,$-250),Math.min(J+250,Z.doc.length));while(!Y.next().done)X(Y.value.from,Y.value.to)}}var d3=p.define(),o8=p.define(),J2=z0.define({create(Z){return new H9(c8(Z).create(),null)},update(Z,$){for(let J of $.effects)if(J.is(d3))Z=new H9(J.value.create(),Z.panel);else if(J.is(o8))Z=new H9(Z.query,J.value?t8:null);return Z},provide:(Z)=>H2.from(Z,($)=>$.panel)});class H9{constructor(Z,$){this.query=Z,this.panel=$}}var FW=m.mark({class:"cm-searchMatch"}),IW=m.mark({class:"cm-searchMatch cm-searchMatch-selected"}),DW=j0.fromClass(class{constructor(Z){this.view=Z,this.decorations=this.highlight(Z.state.field(J2))}update(Z){let $=Z.state.field(J2);if($!=Z.startState.field(J2)||Z.docChanged||Z.selectionSet||Z.viewportChanged)this.decorations=this.highlight($)}highlight({query:Z,panel:$}){if(!$||!Z.spec.valid)return m.none;let{view:J}=this,X=new n0;for(let Y=0,Q=J.visibleRanges,K=Q.length;Y<K;Y++){let{from:U,to:q}=Q[Y];while(Y<K-1&&q>Q[Y+1].from-500)q=Q[++Y].to;Z.highlight(J.state,U,q,(G,W)=>{let j=J.state.selection.ranges.some((z)=>z.from==G&&z.to==W);X.add(G,W,j?IW:FW)})}return X.finish()}},{decorations:(Z)=>Z.decorations});function c3(Z){return($)=>{let J=$.state.field(J2,!1);return J&&J.query.spec.valid?Z($,J):pX($)}}var I9=c3((Z,{query:$})=>{let{to:J}=Z.state.selection.main,X=$.nextMatch(Z.state,J,J);if(!X)return!1;let Y=M.single(X.from,X.to),Q=Z.state.facet(e2);return Z.dispatch({selection:Y,effects:[e8(Z,X),Q.scrollToMatch(Y.main,Z)],userEvent:"select.search"}),fX(Z),!0}),D9=c3((Z,{query:$})=>{let{state:J}=Z,{from:X}=J.selection.main,Y=$.prevMatch(J,X,X);if(!Y)return!1;let Q=M.single(Y.from,Y.to),K=Z.state.facet(e2);return Z.dispatch({selection:Q,effects:[e8(Z,Y),K.scrollToMatch(Q.main,Z)],userEvent:"select.search"}),fX(Z),!0}),MW=c3((Z,{query:$})=>{let J=$.matchAll(Z.state,1000);if(!J||!J.length)return!1;return Z.dispatch({selection:M.create(J.map((X)=>M.range(X.from,X.to))),userEvent:"select.search.matches"}),!0}),AW=({state:Z,dispatch:$})=>{let J=Z.selection;if(J.ranges.length>1||J.main.empty)return!1;let{from:X,to:Y}=J.main,Q=[],K=0;for(let U=new I2(Z.doc,Z.sliceDoc(X,Y));!U.next().done;){if(Q.length>1000)return!1;if(U.value.from==X)K=Q.length;Q.push(M.range(U.value.from,U.value.to))}return $(Z.update({selection:M.create(Q,K),userEvent:"select.search.matches"})),!0},xX=c3((Z,{query:$})=>{let{state:J}=Z,{from:X,to:Y}=J.selection.main;if(J.readOnly)return!1;let Q=$.nextMatch(J,X,X);if(!Q)return!1;let K=Q,U=[],q,G,W=[];if(K.from==X&&K.to==Y)G=J.toText($.getReplacement(K)),U.push({from:K.from,to:K.to,insert:G}),K=$.nextMatch(J,K.from,K.to),W.push(C.announce.of(J.phrase("replaced match on line $",J.doc.lineAt(X).number)+"."));let j=Z.state.changes(U);if(K)q=M.single(K.from,K.to).map(j),W.push(e8(Z,K)),W.push(J.facet(e2).scrollToMatch(q.main,Z));return Z.dispatch({changes:j,selection:q,effects:W,userEvent:"input.replace"}),!0}),LW=c3((Z,{query:$})=>{if(Z.state.readOnly)return!1;let J=$.matchAll(Z.state,1e9).map((Y)=>{let{from:Q,to:K}=Y;return{from:Q,to:K,insert:$.getReplacement(Y)}});if(!J.length)return!1;let X=Z.state.phrase("replaced $ matches",J.length)+".";return Z.dispatch({changes:J,effects:C.announce.of(X),userEvent:"input.replace.all"}),!0});function t8(Z){return Z.state.facet(e2).createPanel(Z)}function c8(Z,$){var J,X,Y,Q,K;let U=Z.selection.main,q=U.empty||U.to>U.from+100?"":Z.sliceDoc(U.from,U.to);if($&&!q)return $;let G=Z.facet(e2);return new r8({search:((J=$===null||$===void 0?void 0:$.literal)!==null&&J!==void 0?J:G.literal)?q:q.replace(/\n/g,"\\n"),caseSensitive:(X=$===null||$===void 0?void 0:$.caseSensitive)!==null&&X!==void 0?X:G.caseSensitive,literal:(Y=$===null||$===void 0?void 0:$.literal)!==null&&Y!==void 0?Y:G.literal,regexp:(Q=$===null||$===void 0?void 0:$.regexp)!==null&&Q!==void 0?Q:G.regexp,wholeWord:(K=$===null||$===void 0?void 0:$.wholeWord)!==null&&K!==void 0?K:G.wholeWord})}function gX(Z){let $=w3(Z,t8);return $&&$.dom.querySelector("[main-field]")}function fX(Z){let $=gX(Z);if($&&$==Z.root.activeElement)$.select()}var pX=(Z)=>{let $=Z.state.field(J2,!1);if($&&$.panel){let J=gX(Z);if(J&&J!=Z.root.activeElement){let X=c8(Z.state,$.query.spec);if(X.valid)Z.dispatch({effects:d3.of(X)});J.focus(),J.select()}}else Z.dispatch({effects:[o8.of(!0),$?d3.of(c8(Z.state,$.query.spec)):p.appendConfig.of(EW)]});return!0},lX=(Z)=>{let $=Z.state.field(J2,!1);if(!$||!$.panel)return!1;let J=w3(Z,t8);if(J&&J.dom.contains(Z.root.activeElement))Z.focus();return Z.dispatch({effects:o8.of(!1)}),!0},dX=[{key:"Mod-f",run:pX,scope:"editor search-panel"},{key:"F3",run:I9,shift:D9,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:I9,shift:D9,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:lX,scope:"editor search-panel"},{key:"Mod-Shift-l",run:AW},{key:"Mod-Alt-g",run:QW},{key:"Mod-d",run:OW,preventDefault:!0}];class cX{constructor(Z){this.view=Z;let $=this.query=Z.state.field(J2).query.spec;this.commit=this.commit.bind(this),this.searchField=$0("input",{value:$.search,placeholder:t0(Z,"Find"),"aria-label":t0(Z,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=$0("input",{value:$.replace,placeholder:t0(Z,"Replace"),"aria-label":t0(Z,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=$0("input",{type:"checkbox",name:"case",form:"",checked:$.caseSensitive,onchange:this.commit}),this.reField=$0("input",{type:"checkbox",name:"re",form:"",checked:$.regexp,onchange:this.commit}),this.wordField=$0("input",{type:"checkbox",name:"word",form:"",checked:$.wholeWord,onchange:this.commit});function J(X,Y,Q){return $0("button",{class:"cm-button",name:X,onclick:Y,type:"button"},Q)}this.dom=$0("div",{onkeydown:(X)=>this.keydown(X),class:"cm-search"},[this.searchField,J("next",()=>I9(Z),[t0(Z,"next")]),J("prev",()=>D9(Z),[t0(Z,"previous")]),J("select",()=>MW(Z),[t0(Z,"all")]),$0("label",null,[this.caseField,t0(Z,"match case")]),$0("label",null,[this.reField,t0(Z,"regexp")]),$0("label",null,[this.wordField,t0(Z,"by word")]),...Z.state.readOnly?[]:[$0("br"),this.replaceField,J("replace",()=>xX(Z),[t0(Z,"replace")]),J("replaceAll",()=>LW(Z),[t0(Z,"replace all")])],$0("button",{name:"close",onclick:()=>lX(Z),"aria-label":t0(Z,"close"),type:"button"},["Ã—"])])}commit(){let Z=new r8({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});if(!Z.eq(this.query))this.query=Z,this.view.dispatch({effects:d3.of(Z)})}keydown(Z){if(L$(this.view,Z,"search-panel"))Z.preventDefault();else if(Z.keyCode==13&&Z.target==this.searchField)Z.preventDefault(),(Z.shiftKey?D9:I9)(this.view);else if(Z.keyCode==13&&Z.target==this.replaceField)Z.preventDefault(),xX(this.view)}update(Z){for(let $ of Z.transactions)for(let J of $.effects)if(J.is(d3)&&!J.value.eq(this.query))this.setQuery(J.value)}setQuery(Z){this.query=Z,this.searchField.value=Z.search,this.replaceField.value=Z.replace,this.caseField.checked=Z.caseSensitive,this.reField.checked=Z.regexp,this.wordField.checked=Z.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(e2).top}}function t0(Z,$){return Z.state.phrase($)}var O9=30,V9=/[\s\.,:;?!]/;function e8(Z,{from:$,to:J}){let X=Z.state.doc.lineAt($),Y=Z.state.doc.lineAt(J).to,Q=Math.max(X.from,$-O9),K=Math.min(Y,J+O9),U=Z.state.sliceDoc(Q,K);if(Q!=X.from){for(let q=0;q<O9;q++)if(!V9.test(U[q+1])&&V9.test(U[q])){U=U.slice(q);break}}if(K!=Y){for(let q=U.length-1;q>U.length-O9;q--)if(!V9.test(U[q-1])&&V9.test(U[q])){U=U.slice(0,q);break}}return C.announce.of(`${Z.state.phrase("current match")}. ${U} ${Z.state.phrase("on line")} ${X.number}.`)}var BW=C.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),EW=[J2,N1.low(DW),BW];class Y4{constructor(Z,$,J,X){this.state=Z,this.pos=$,this.explicit=J,this.view=X,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(Z){let $=B0(this.state).resolveInner(this.pos,-1);while($&&Z.indexOf($.name)<0)$=$.parent;return $?{from:$.from,to:this.pos,text:this.state.sliceDoc($.from,this.pos),type:$.type}:null}matchBefore(Z){let $=this.state.doc.lineAt(this.pos),J=Math.max($.from,this.pos-250),X=$.text.slice(J-$.from,this.pos-$.from),Y=X.search(eX(Z,!1));return Y<0?null:{from:J+Y,to:this.pos,text:X.slice(Y)}}get aborted(){return this.abortListeners==null}addEventListener(Z,$,J){if(Z=="abort"&&this.abortListeners){if(this.abortListeners.push($),J&&J.onDocChange)this.abortOnDocChange=!0}}}function sX(Z){let $=Object.keys(Z).join(""),J=/\w/.test($);if(J)$=$.replace(/\w/g,"");return`[${J?"\\w":""}${$.replace(/[^\w\s]/g,"\\$&")}]`}function PW(Z){let $=Object.create(null),J=Object.create(null);for(let{label:Y}of Z){$[Y[0]]=!0;for(let Q=1;Q<Y.length;Q++)J[Y[Q]]=!0}let X=sX($)+sX(J)+"*$";return[new RegExp("^"+X),new RegExp(X)]}function CW(Z){let $=Z.map((Y)=>typeof Y=="string"?{label:Y}:Y),[J,X]=$.every((Y)=>/^\w+$/.test(Y.label))?[/\w*$/,/\w+$/]:PW($);return(Y)=>{let Q=Y.matchBefore(X);return Q||Y.explicit?{from:Q?Q.from:Y.pos,options:$,validFor:J}:null}}class X4{constructor(Z,$,J,X){this.completion=Z,this.source=$,this.match=J,this.score=X}}function M2(Z){return Z.selection.main.from}function eX(Z,$){var J;let{source:X}=Z,Y=$&&X[0]!="^",Q=X[X.length-1]!="$";if(!Y&&!Q)return Z;return new RegExp(`${Y?"^":""}(?:${X})${Q?"$":""}`,(J=Z.flags)!==null&&J!==void 0?J:Z.ignoreCase?"i":"")}var ZY=r0.define();function TW(Z,$,J,X){let{main:Y}=Z.selection,Q=J-Y.from,K=X-Y.from;return{...Z.changeByRange((U)=>{if(U!=Y&&J!=X&&Z.sliceDoc(U.from+Q,U.from+K)!=Z.sliceDoc(J,X))return{range:U};let q=Z.toText($);return{changes:{from:U.from+Q,to:X==Y.from?U.to:U.from+K,insert:q},range:M.cursor(U.from+Q+q.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}var nX=new WeakMap;function yW(Z){if(!Array.isArray(Z))return Z;let $=nX.get(Z);if(!$)nX.set(Z,$=CW(Z));return $}var A9=p.define(),s3=p.define();class $Y{constructor(Z){this.pattern=Z,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let $=0;$<Z.length;){let J=y0(Z,$),X=i0(J);this.chars.push(J);let Y=Z.slice($,$+X),Q=Y.toUpperCase();this.folded.push(y0(Q==Y?Y.toLowerCase():Q,0)),$+=X}this.astral=Z.length!=this.chars.length}ret(Z,$){return this.score=Z,this.matched=$,this}match(Z){if(this.pattern.length==0)return this.ret(-100,[]);if(Z.length<this.pattern.length)return null;let{chars:$,folded:J,any:X,precise:Y,byWord:Q}=this;if($.length==1){let F=y0(Z,0),D=i0(F),A=D==Z.length?0:-100;if(F==$[0]);else if(F==J[0])A+=-200;else return null;return this.ret(A,[0,D])}let K=Z.indexOf(this.pattern);if(K==0)return this.ret(Z.length==this.pattern.length?0:-100,[0,this.pattern.length]);let U=$.length,q=0;if(K<0){for(let F=0,D=Math.min(Z.length,200);F<D&&q<U;){let A=y0(Z,F);if(A==$[q]||A==J[q])X[q++]=F;F+=i0(A)}if(q<U)return null}let G=0,W=0,j=!1,z=0,_=-1,V=-1,O=/[a-z]/.test(Z),N=!0;for(let F=0,D=Math.min(Z.length,200),A=0;F<D&&W<U;){let L=y0(Z,F);if(K<0){if(G<U&&L==$[G])Y[G++]=F;if(z<U)if(L==$[z]||L==J[z]){if(z==0)_=F;V=F+1,z++}else z=0}let B,w=L<255?L>=48&&L<=57||L>=97&&L<=122?2:L>=65&&L<=90?1:0:(B=j3(L))!=B.toLowerCase()?1:B!=B.toUpperCase()?2:0;if(!F||w==1&&O||A==0&&w!=0){if($[W]==L||J[W]==L&&(j=!0))Q[W++]=F;else if(Q.length)N=!1}A=w,F+=i0(L)}if(W==U&&Q[0]==0&&N)return this.result(-100+(j?-200:0),Q,Z);if(z==U&&_==0)return this.ret(-200-Z.length+(V==Z.length?0:-100),[0,V]);if(K>-1)return this.ret(-700-Z.length,[K,K+this.pattern.length]);if(z==U)return this.ret(-900-Z.length,[_,V]);if(W==U)return this.result(-100+(j?-200:0)+-700+(N?0:-1100),Q,Z);return $.length==2?null:this.result((X[0]?-700:0)+-200+-1100,X,Z)}result(Z,$,J){let X=[],Y=0;for(let Q of $){let K=Q+(this.astral?i0(y0(J,Q)):1);if(Y&&X[Y-1]==Q)X[Y-1]=K;else X[Y++]=Q,X[Y++]=K}return this.ret(Z-J.length,X)}}class JY{constructor(Z){this.pattern=Z,this.matched=[],this.score=0,this.folded=Z.toLowerCase()}match(Z){if(Z.length<this.pattern.length)return null;let $=Z.slice(0,this.pattern.length),J=$==this.pattern?0:$.toLowerCase()==this.folded?-200:null;if(J==null)return null;return this.matched=[0,$.length],this.score=J+(Z.length==this.pattern.length?0:-100),this}}var E0=k.define({combine(Z){return h0(Z,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:bW,filterStrict:!1,compareCompletions:($,J)=>($.sortText||$.label).localeCompare(J.sortText||J.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:($,J)=>$&&J,closeOnBlur:($,J)=>$&&J,icons:($,J)=>$&&J,tooltipClass:($,J)=>(X)=>iX($(X),J(X)),optionClass:($,J)=>(X)=>iX($(X),J(X)),addToOptions:($,J)=>$.concat(J),filterStrict:($,J)=>$||J})}});function iX(Z,$){return Z?$?Z+" "+$:Z:$}function bW(Z,$,J,X,Y,Q){let K=Z.textDirection==Y0.RTL,U=K,q=!1,G="top",W,j,z=$.left-Y.left,_=Y.right-$.right,V=X.right-X.left,O=X.bottom-X.top;if(U&&z<Math.min(V,_))U=!1;else if(!U&&_<Math.min(V,z))U=!0;if(V<=(U?z:_))W=Math.max(Y.top,Math.min(J.top,Y.bottom-O))-$.top,j=Math.min(400,U?z:_);else{q=!0,j=Math.min(400,(K?$.right:Y.right-$.left)-30);let D=Y.bottom-$.bottom;if(D>=O||D>$.top)W=J.bottom-$.top;else G="bottom",W=$.bottom-J.top}let N=($.bottom-$.top)/Q.offsetHeight,F=($.right-$.left)/Q.offsetWidth;return{style:`${G}: ${W/N}px; max-width: ${j/F}px`,class:"cm-completionInfo-"+(q?K?"left-narrow":"right-narrow":U?"left":"right")}}function kW(Z){let $=Z.addToOptions.slice();if(Z.icons)$.push({render(J){let X=document.createElement("div");if(X.classList.add("cm-completionIcon"),J.type)X.classList.add(...J.type.split(/\s+/g).map((Y)=>"cm-completionIcon-"+Y));return X.setAttribute("aria-hidden","true"),X},position:20});return $.push({render(J,X,Y,Q){let K=document.createElement("span");K.className="cm-completionLabel";let U=J.displayLabel||J.label,q=0;for(let G=0;G<Q.length;){let W=Q[G++],j=Q[G++];if(W>q)K.appendChild(document.createTextNode(U.slice(q,W)));let z=K.appendChild(document.createElement("span"));z.appendChild(document.createTextNode(U.slice(W,j))),z.className="cm-completionMatchedText",q=j}if(q<U.length)K.appendChild(document.createTextNode(U.slice(q)));return K},position:50},{render(J){if(!J.detail)return null;let X=document.createElement("span");return X.className="cm-completionDetail",X.textContent=J.detail,X},position:80}),$.sort((J,X)=>J.position-X.position).map((J)=>J.render)}function Z4(Z,$,J){if(Z<=J)return{from:0,to:Z};if($<0)$=0;if($<=Z>>1){let Y=Math.floor($/J);return{from:Y*J,to:(Y+1)*J}}let X=Math.floor((Z-$)/J);return{from:Z-(X+1)*J,to:Z-X*J}}class XY{constructor(Z,$,J){this.view=Z,this.stateField=$,this.applyCompletion=J,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:(U)=>this.placeInfo(U),key:this},this.space=null,this.currentClass="";let X=Z.state.field($),{options:Y,selected:Q}=X.open,K=Z.state.facet(E0);this.optionContent=kW(K),this.optionClass=K.optionClass,this.tooltipClass=K.tooltipClass,this.range=Z4(Y.length,Q,K.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(Z.state),this.dom.addEventListener("mousedown",(U)=>{let{options:q}=Z.state.field($).open;for(let G=U.target,W;G&&G!=this.dom;G=G.parentNode)if(G.nodeName=="LI"&&(W=/-(\d+)$/.exec(G.id))&&+W[1]<q.length){this.applyCompletion(Z,q[+W[1]]),U.preventDefault();return}}),this.dom.addEventListener("focusout",(U)=>{let q=Z.state.field(this.stateField,!1);if(q&&q.tooltip&&Z.state.facet(E0).closeOnBlur&&U.relatedTarget!=Z.contentDOM)Z.dispatch({effects:s3.of(null)})}),this.showOptions(Y,X.id)}mount(){this.updateSel()}showOptions(Z,$){if(this.list)this.list.remove();this.list=this.dom.appendChild(this.createListBox(Z,$,this.range)),this.list.addEventListener("scroll",()=>{if(this.info)this.view.requestMeasure(this.placeInfoReq)})}update(Z){var $;let J=Z.state.field(this.stateField),X=Z.startState.field(this.stateField);if(this.updateTooltipClass(Z.state),J!=X){let{options:Y,selected:Q,disabled:K}=J.open;if(!X.open||X.open.options!=Y)this.range=Z4(Y.length,Q,Z.state.facet(E0).maxRenderedOptions),this.showOptions(Y,J.id);if(this.updateSel(),K!=(($=X.open)===null||$===void 0?void 0:$.disabled))this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!K)}}updateTooltipClass(Z){let $=this.tooltipClass(Z);if($!=this.currentClass){for(let J of this.currentClass.split(" "))if(J)this.dom.classList.remove(J);for(let J of $.split(" "))if(J)this.dom.classList.add(J);this.currentClass=$}}positioned(Z){if(this.space=Z,this.info)this.view.requestMeasure(this.placeInfoReq)}updateSel(){let Z=this.view.state.field(this.stateField),$=Z.open;if($.selected>-1&&$.selected<this.range.from||$.selected>=this.range.to)this.range=Z4($.options.length,$.selected,this.view.state.facet(E0).maxRenderedOptions),this.showOptions($.options,Z.id);let J=this.updateSelectedOption($.selected);if(J){this.destroyInfo();let{completion:X}=$.options[$.selected],{info:Y}=X;if(!Y)return;let Q=typeof Y==="string"?document.createTextNode(Y):Y(X);if(!Q)return;if("then"in Q)Q.then((K)=>{if(K&&this.view.state.field(this.stateField,!1)==Z)this.addInfoPane(K,X)}).catch((K)=>k0(this.view.state,K,"completion info"));else this.addInfoPane(Q,X),J.setAttribute("aria-describedby",this.info.id)}}addInfoPane(Z,$){this.destroyInfo();let J=this.info=document.createElement("div");if(J.className="cm-tooltip cm-completionInfo",J.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),Z.nodeType!=null)J.appendChild(Z),this.infoDestroy=null;else{let{dom:X,destroy:Y}=Z;J.appendChild(X),this.infoDestroy=Y||null}this.dom.appendChild(J),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(Z){let $=null;for(let J=this.list.firstChild,X=this.range.from;J;J=J.nextSibling,X++)if(J.nodeName!="LI"||!J.id)X--;else if(X==Z){if(!J.hasAttribute("aria-selected"))J.setAttribute("aria-selected","true"),$=J}else if(J.hasAttribute("aria-selected"))J.removeAttribute("aria-selected"),J.removeAttribute("aria-describedby");if($)xW(this.list,$);return $}measureInfo(){let Z=this.dom.querySelector("[aria-selected]");if(!Z||!this.info)return null;let $=this.dom.getBoundingClientRect(),J=this.info.getBoundingClientRect(),X=Z.getBoundingClientRect(),Y=this.space;if(!Y){let Q=this.dom.ownerDocument.documentElement;Y={left:0,top:0,right:Q.clientWidth,bottom:Q.clientHeight}}if(X.top>Math.min(Y.bottom,$.bottom)-10||X.bottom<Math.max(Y.top,$.top)+10)return null;return this.view.state.facet(E0).positionInfo(this.view,$,X,J,Y,this.dom)}placeInfo(Z){if(this.info)if(Z){if(Z.style)this.info.style.cssText=Z.style;this.info.className="cm-tooltip cm-completionInfo "+(Z.class||"")}else this.info.style.cssText="top: -1e6px"}createListBox(Z,$,J){let X=document.createElement("ul");X.id=$,X.setAttribute("role","listbox"),X.setAttribute("aria-expanded","true"),X.setAttribute("aria-label",this.view.state.phrase("Completions")),X.addEventListener("mousedown",(Q)=>{if(Q.target==X)Q.preventDefault()});let Y=null;for(let Q=J.from;Q<J.to;Q++){let{completion:K,match:U}=Z[Q],{section:q}=K;if(q){let j=typeof q=="string"?q:q.name;if(j!=Y&&(Q>J.from||J.from==0))if(Y=j,typeof q!="string"&&q.header)X.appendChild(q.header(q));else{let z=X.appendChild(document.createElement("completion-section"));z.textContent=j}}let G=X.appendChild(document.createElement("li"));G.id=$+"-"+Q,G.setAttribute("role","option");let W=this.optionClass(K);if(W)G.className=W;for(let j of this.optionContent){let z=j(K,this.view.state,this.view,U);if(z)G.appendChild(z)}}if(J.from)X.classList.add("cm-completionListIncompleteTop");if(J.to<Z.length)X.classList.add("cm-completionListIncompleteBottom");return X}destroyInfo(){if(this.info){if(this.infoDestroy)this.infoDestroy();this.info.remove(),this.info=null}}destroy(){this.destroyInfo()}}function SW(Z,$){return(J)=>new XY(J,Z,$)}function xW(Z,$){let J=Z.getBoundingClientRect(),X=$.getBoundingClientRect(),Y=J.height/Z.offsetHeight;if(X.top<J.top)Z.scrollTop-=(J.top-X.top)/Y;else if(X.bottom>J.bottom)Z.scrollTop+=(X.bottom-J.bottom)/Y}function rX(Z){return(Z.boost||0)*100+(Z.apply?10:0)+(Z.info?5:0)+(Z.type?1:0)}function wW(Z,$){let J=[],X=null,Y=null,Q=(W)=>{J.push(W);let{section:j}=W.completion;if(j){if(!X)X=[];let z=typeof j=="string"?j:j.name;if(!X.some((_)=>_.name==z))X.push(typeof j=="string"?{name:z}:j)}},K=$.facet(E0);for(let W of Z)if(W.hasResult()){let j=W.result.getMatch;if(W.result.filter===!1)for(let z of W.result.options)Q(new X4(z,W.source,j?j(z):[],1e9-J.length));else{let z=$.sliceDoc(W.from,W.to),_,V=K.filterStrict?new JY(z):new $Y(z);for(let O of W.result.options)if(_=V.match(O.label)){let N=!O.displayLabel?_.matched:j?j(O,_.matched):[],F=_.score+(O.boost||0);if(Q(new X4(O,W.source,N,F)),typeof O.section=="object"&&O.section.rank==="dynamic"){let{name:D}=O.section;if(!Y)Y=Object.create(null);Y[D]=Math.max(F,Y[D]||-1e9)}}}}if(X){let W=Object.create(null),j=0,z=(_,V)=>{return(_.rank==="dynamic"&&V.rank==="dynamic"?Y[V.name]-Y[_.name]:0)||(typeof _.rank=="number"?_.rank:1e9)-(typeof V.rank=="number"?V.rank:1e9)||(_.name<V.name?-1:1)};for(let _ of X.sort(z))j-=1e5,W[_.name]=j;for(let _ of J){let{section:V}=_.completion;if(V)_.score+=W[typeof V=="string"?V:V.name]}}let U=[],q=null,G=K.compareCompletions;for(let W of J.sort((j,z)=>z.score-j.score||G(j.completion,z.completion))){let j=W.completion;if(!q||q.label!=j.label||q.detail!=j.detail||q.type!=null&&j.type!=null&&q.type!=j.type||q.apply!=j.apply||q.boost!=j.boost)U.push(W);else if(rX(W.completion)>rX(q))U[U.length-1]=W;q=W.completion}return U}class Z3{constructor(Z,$,J,X,Y,Q){this.options=Z,this.attrs=$,this.tooltip=J,this.timestamp=X,this.selected=Y,this.disabled=Q}setSelected(Z,$){return Z==this.selected||Z>=this.options.length?this:new Z3(this.options,aX($,Z),this.tooltip,this.timestamp,Z,this.disabled)}static build(Z,$,J,X,Y,Q){if(X&&!Q&&Z.some((q)=>q.isPending))return X.setDisabled();let K=wW(Z,$);if(!K.length)return X&&Z.some((q)=>q.isPending)?X.setDisabled():null;let U=$.facet(E0).selectOnOpen?0:-1;if(X&&X.selected!=U&&X.selected!=-1){let q=X.options[X.selected].completion;for(let G=0;G<K.length;G++)if(K[G].completion==q){U=G;break}}return new Z3(K,aX(J,U),{pos:Z.reduce((q,G)=>G.hasResult()?Math.min(q,G.from):q,1e8),create:fW,above:Y.aboveCursor},X?X.timestamp:Date.now(),U,!1)}map(Z){return new Z3(this.options,this.attrs,{...this.tooltip,pos:Z.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Z3(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class L9{constructor(Z,$,J){this.active=Z,this.id=$,this.open=J}static start(){return new L9(mW,"cm-ac-"+Math.floor(Math.random()*2000000).toString(36),null)}update(Z){let{state:$}=Z,J=$.facet(E0),Y=(J.override||$.languageDataAt("autocomplete",M2($)).map(yW)).map((U)=>{return(this.active.find((G)=>G.source==U)||new j1(U,this.active.some((G)=>G.state!=0)?1:0)).update(Z,J)});if(Y.length==this.active.length&&Y.every((U,q)=>U==this.active[q]))Y=this.active;let Q=this.open,K=Z.effects.some((U)=>U.is(Q4));if(Q&&Z.docChanged)Q=Q.map(Z.changes);if(Z.selection||Y.some((U)=>U.hasResult()&&Z.changes.touchesRange(U.from,U.to))||!hW(Y,this.active)||K)Q=Z3.build(Y,$,this.id,Q,J,K);else if(Q&&Q.disabled&&!Y.some((U)=>U.isPending))Q=null;if(!Q&&Y.every((U)=>!U.isPending)&&Y.some((U)=>U.hasResult()))Y=Y.map((U)=>U.hasResult()?new j1(U.source,0):U);for(let U of Z.effects)if(U.is(QY))Q=Q&&Q.setSelected(U.value,this.id);return Y==this.active&&Q==this.open?this:new L9(Y,this.id,Q)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?vW:uW}}function hW(Z,$){if(Z==$)return!0;for(let J=0,X=0;;){while(J<Z.length&&!Z[J].hasResult())J++;while(X<$.length&&!$[X].hasResult())X++;let Y=J==Z.length,Q=X==$.length;if(Y||Q)return Y==Q;if(Z[J++].result!=$[X++].result)return!1}}var vW={"aria-autocomplete":"list"},uW={};function aX(Z,$){let J={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":Z};if($>-1)J["aria-activedescendant"]=Z+"-"+$;return J}var mW=[];function YY(Z,$){if(Z.isUserEvent("input.complete")){let X=Z.annotation(ZY);if(X&&$.activateOnCompletion(X))return 12}let J=Z.isUserEvent("input.type");return J&&$.activateOnTyping?5:J?1:Z.isUserEvent("delete.backward")?2:Z.selection?8:Z.docChanged?16:0}class j1{constructor(Z,$,J=!1){this.source=Z,this.state=$,this.explicit=J}hasResult(){return!1}get isPending(){return this.state==1}update(Z,$){let J=YY(Z,$),X=this;if(J&8||J&16&&this.touches(Z))X=new j1(X.source,0);if(J&4&&X.state==0)X=new j1(this.source,1);X=X.updateFor(Z,J);for(let Y of Z.effects)if(Y.is(A9))X=new j1(X.source,1,Y.value);else if(Y.is(s3))X=new j1(X.source,0);else if(Y.is(Q4)){for(let Q of Y.value)if(Q.source==X.source)X=Q}return X}updateFor(Z,$){return this.map(Z.changes)}map(Z){return this}touches(Z){return Z.changes.touchesRange(M2(Z.state))}}class $3 extends j1{constructor(Z,$,J,X,Y,Q){super(Z,3,$);this.limit=J,this.result=X,this.from=Y,this.to=Q}hasResult(){return!0}updateFor(Z,$){var J;if(!($&3))return this.map(Z.changes);let X=this.result;if(X.map&&!Z.changes.empty)X=X.map(X,Z.changes);let Y=Z.changes.mapPos(this.from),Q=Z.changes.mapPos(this.to,1),K=M2(Z.state);if(K>Q||!X||$&2&&(M2(Z.startState)==this.from||K<this.limit))return new j1(this.source,$&4?1:0);let U=Z.changes.mapPos(this.limit);if(gW(X.validFor,Z.state,Y,Q))return new $3(this.source,this.explicit,U,X,Y,Q);if(X.update&&(X=X.update(X,Y,Q,new Y4(Z.state,K,!1))))return new $3(this.source,this.explicit,U,X,X.from,(J=X.to)!==null&&J!==void 0?J:M2(Z.state));return new j1(this.source,1,this.explicit)}map(Z){if(Z.empty)return this;if(!(this.result.map?this.result.map(this.result,Z):this.result))return new j1(this.source,0);return new $3(this.source,this.explicit,Z.mapPos(this.limit),this.result,Z.mapPos(this.from),Z.mapPos(this.to,1))}touches(Z){return Z.changes.touchesRange(this.from,this.to)}}function gW(Z,$,J,X){if(!Z)return!1;let Y=$.sliceDoc(J,X);return typeof Z=="function"?Z(Y,J,X,$):eX(Z,!0).test(Y)}var Q4=p.define({map(Z,$){return Z.map((J)=>J.map($))}}),QY=p.define(),c0=z0.define({create(){return L9.start()},update(Z,$){return Z.update($)},provide:(Z)=>[x3.from(Z,($)=>$.tooltip),C.contentAttributes.from(Z,($)=>$.attrs)]});function K4(Z,$){let J=$.completion.apply||$.completion.label,X=Z.state.field(c0).active.find((Y)=>Y.source==$.source);if(!(X instanceof $3))return!1;if(typeof J=="string")Z.dispatch({...TW(Z.state,J,X.from,X.to),annotations:ZY.of($.completion)});else J(Z,$.completion,X.from,X.to);return!0}var fW=SW(c0,K4);function M9(Z,$="option"){return(J)=>{let X=J.state.field(c0,!1);if(!X||!X.open||X.open.disabled||Date.now()-X.open.timestamp<J.state.facet(E0).interactionDelay)return!1;let Y=1,Q;if($=="page"&&(Q=z8(J,X.open.tooltip)))Y=Math.max(2,Math.floor(Q.dom.offsetHeight/Q.dom.querySelector("li").offsetHeight)-1);let{length:K}=X.open.options,U=X.open.selected>-1?X.open.selected+Y*(Z?1:-1):Z?0:K-1;if(U<0)U=$=="page"?0:K-1;else if(U>=K)U=$=="page"?K-1:0;return J.dispatch({effects:QY.of(U)}),!0}}var pW=(Z)=>{let $=Z.state.field(c0,!1);if(Z.state.readOnly||!$||!$.open||$.open.selected<0||$.open.disabled||Date.now()-$.open.timestamp<Z.state.facet(E0).interactionDelay)return!1;return K4(Z,$.open.options[$.open.selected])},$4=(Z)=>{if(!Z.state.field(c0,!1))return!1;return Z.dispatch({effects:A9.of(!0)}),!0},lW=(Z)=>{let $=Z.state.field(c0,!1);if(!$||!$.active.some((J)=>J.state!=0))return!1;return Z.dispatch({effects:s3.of(null)}),!0};class KY{constructor(Z,$){this.active=Z,this.context=$,this.time=Date.now(),this.updates=[],this.done=void 0}}var dW=50,cW=1000,sW=j0.fromClass(class{constructor(Z){this.view=Z,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let $ of Z.state.field(c0).active)if($.isPending)this.startQuery($)}update(Z){let $=Z.state.field(c0),J=Z.state.facet(E0);if(!Z.selectionSet&&!Z.docChanged&&Z.startState.field(c0)==$)return;let X=Z.transactions.some((Q)=>{let K=YY(Q,J);return K&8||(Q.selection||Q.docChanged)&&!(K&3)});for(let Q=0;Q<this.running.length;Q++){let K=this.running[Q];if(X||K.context.abortOnDocChange&&Z.docChanged||K.updates.length+Z.transactions.length>dW&&Date.now()-K.time>cW){for(let U of K.context.abortListeners)try{U()}catch(q){k0(this.view.state,q)}K.context.abortListeners=null,this.running.splice(Q--,1)}else K.updates.push(...Z.transactions)}if(this.debounceUpdate>-1)clearTimeout(this.debounceUpdate);if(Z.transactions.some((Q)=>Q.effects.some((K)=>K.is(A9))))this.pendingStart=!0;let Y=this.pendingStart?50:J.activateOnTypingDelay;if(this.debounceUpdate=$.active.some((Q)=>Q.isPending&&!this.running.some((K)=>K.active.source==Q.source))?setTimeout(()=>this.startUpdate(),Y):-1,this.composing!=0){for(let Q of Z.transactions)if(Q.isUserEvent("input.type"))this.composing=2;else if(this.composing==2&&Q.selection)this.composing=3}}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:Z}=this.view,$=Z.field(c0);for(let J of $.active)if(J.isPending&&!this.running.some((X)=>X.active.source==J.source))this.startQuery(J);if(this.running.length&&$.open&&$.open.disabled)this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(E0).updateSyncTime)}startQuery(Z){let{state:$}=this.view,J=M2($),X=new Y4($,J,Z.explicit,this.view),Y=new KY(Z,X);this.running.push(Y),Promise.resolve(Z.source(X)).then((Q)=>{if(!Y.context.aborted)Y.done=Q||null,this.scheduleAccept()},(Q)=>{this.view.dispatch({effects:s3.of(null)}),k0(this.view.state,Q)})}scheduleAccept(){if(this.running.every((Z)=>Z.done!==void 0))this.accept();else if(this.debounceAccept<0)this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(E0).updateSyncTime)}accept(){var Z;if(this.debounceAccept>-1)clearTimeout(this.debounceAccept);this.debounceAccept=-1;let $=[],J=this.view.state.facet(E0),X=this.view.state.field(c0);for(let Y=0;Y<this.running.length;Y++){let Q=this.running[Y];if(Q.done===void 0)continue;if(this.running.splice(Y--,1),Q.done){let U=M2(Q.updates.length?Q.updates[0].startState:this.view.state),q=Math.min(U,Q.done.from+(Q.active.explicit?0:1)),G=new $3(Q.active.source,Q.active.explicit,q,Q.done,Q.done.from,(Z=Q.done.to)!==null&&Z!==void 0?Z:U);for(let W of Q.updates)G=G.update(W,J);if(G.hasResult()){$.push(G);continue}}let K=X.active.find((U)=>U.source==Q.active.source);if(K&&K.isPending)if(Q.done==null){let U=new j1(Q.active.source,0);for(let q of Q.updates)U=U.update(q,J);if(!U.isPending)$.push(U)}else this.startQuery(K)}if($.length||X.open&&X.open.disabled)this.view.dispatch({effects:Q4.of($)})}},{eventHandlers:{blur(Z){let $=this.view.state.field(c0,!1);if($&&$.tooltip&&this.view.state.facet(E0).closeOnBlur){let J=$.open&&z8(this.view,$.open.tooltip);if(!J||!J.dom.contains(Z.relatedTarget))setTimeout(()=>this.view.dispatch({effects:s3.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){if(this.composing==3)setTimeout(()=>this.view.dispatch({effects:A9.of(!1)}),20);this.composing=0}}}),nW=typeof navigator=="object"&&/Win/.test(navigator.platform),iW=N1.highest(C.domEventHandlers({keydown(Z,$){let J=$.state.field(c0,!1);if(!J||!J.open||J.open.disabled||J.open.selected<0||Z.key.length>1||Z.ctrlKey&&!(nW&&Z.altKey)||Z.metaKey)return!1;let X=J.open.options[J.open.selected],Y=J.active.find((K)=>K.source==X.source),Q=X.completion.commitCharacters||Y.result.commitCharacters;if(Q&&Q.indexOf(Z.key)>-1)K4($,X);return!1}})),rW=C.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:0.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:0.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ’'"}},".cm-completionIcon-class":{"&:after":{content:"'â—‹'"}},".cm-completionIcon-interface":{"&:after":{content:"'â—Œ'"}},".cm-completionIcon-variable":{"&:after":{content:"'\uD835\uDC65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\uD835\uDC36'"}},".cm-completionIcon-type":{"&:after":{content:"'\uD835\uDC61'"}},".cm-completionIcon-enum":{"&:after":{content:"'âˆª'"}},".cm-completionIcon-property":{"&:after":{content:"'â–¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\uD83D\uDD11ï¸Ž'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â–¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var n3={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},D2=p.define({map(Z,$){let J=$.mapPos(Z,-1,T0.TrackAfter);return J==null?void 0:J}}),U4=new class extends H1{};U4.startSide=1;U4.endSide=-1;var UY=z0.define({create(){return i.empty},update(Z,$){if(Z=Z.map($.changes),$.selection){let J=$.state.doc.lineAt($.selection.main.head);Z=Z.update({filter:(X)=>X>=J.from&&X<=J.to})}for(let J of $.effects)if(J.is(D2))Z=Z.update({add:[U4.range(J.value,J.value+1)]});return Z}});function qY(){return[oW,UY]}var J4="()[]{}<>Â«Â»Â»Â«ï¼»ï¼½ï½›ï½";function GY(Z){for(let $=0;$<J4.length;$+=2)if(J4.charCodeAt($)==Z)return J4.charAt($+1);return j3(Z<128?Z:Z+1)}function WY(Z,$){return Z.languageDataAt("closeBrackets",$)[0]||n3}var aW=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),oW=C.inputHandler.of((Z,$,J,X)=>{if((aW?Z.composing:Z.compositionStarted)||Z.state.readOnly)return!1;let Y=Z.state.selection.main;if(X.length>2||X.length==2&&i0(y0(X,0))==1||$!=Y.from||J!=Y.to)return!1;let Q=eW(Z.state,X);if(!Q)return!1;return Z.dispatch(Q),!0}),tW=({state:Z,dispatch:$})=>{if(Z.readOnly)return!1;let X=WY(Z,Z.selection.main.head).brackets||n3.brackets,Y=null,Q=Z.changeByRange((K)=>{if(K.empty){let U=Zj(Z.doc,K.head);for(let q of X)if(q==U&&B9(Z.doc,K.head)==GY(y0(q,0)))return{changes:{from:K.head-q.length,to:K.head+q.length},range:M.cursor(K.head-q.length)}}return{range:Y=K}});if(!Y)$(Z.update(Q,{scrollIntoView:!0,userEvent:"delete.backward"}));return!Y},jY=[{key:"Backspace",run:tW}];function eW(Z,$){let J=WY(Z,Z.selection.main.head),X=J.brackets||n3.brackets;for(let Y of X){let Q=GY(y0(Y,0));if($==Y)return Q==Y?Xj(Z,Y,X.indexOf(Y+Y+Y)>-1,J):$j(Z,Y,Q,J.before||n3.before);if($==Q&&zY(Z,Z.selection.main.from))return Jj(Z,Y,Q)}return null}function zY(Z,$){let J=!1;return Z.field(UY).between(0,Z.doc.length,(X)=>{if(X==$)J=!0}),J}function B9(Z,$){let J=Z.sliceString($,$+2);return J.slice(0,i0(y0(J,0)))}function Zj(Z,$){let J=Z.sliceString($-2,$);return i0(y0(J,0))==J.length?J:J.slice(1)}function $j(Z,$,J,X){let Y=null,Q=Z.changeByRange((K)=>{if(!K.empty)return{changes:[{insert:$,from:K.from},{insert:J,from:K.to}],effects:D2.of(K.to+$.length),range:M.range(K.anchor+$.length,K.head+$.length)};let U=B9(Z.doc,K.head);if(!U||/\s/.test(U)||X.indexOf(U)>-1)return{changes:{insert:$+J,from:K.head},effects:D2.of(K.head+$.length),range:M.cursor(K.head+$.length)};return{range:Y=K}});return Y?null:Z.update(Q,{scrollIntoView:!0,userEvent:"input.type"})}function Jj(Z,$,J){let X=null,Y=Z.changeByRange((Q)=>{if(Q.empty&&B9(Z.doc,Q.head)==J)return{changes:{from:Q.head,to:Q.head+J.length,insert:J},range:M.cursor(Q.head+J.length)};return X={range:Q}});return X?null:Z.update(Y,{scrollIntoView:!0,userEvent:"input.type"})}function Xj(Z,$,J,X){let Y=X.stringPrefixes||n3.stringPrefixes,Q=null,K=Z.changeByRange((U)=>{if(!U.empty)return{changes:[{insert:$,from:U.from},{insert:$,from:U.to}],effects:D2.of(U.to+$.length),range:M.range(U.anchor+$.length,U.head+$.length)};let q=U.head,G=B9(Z.doc,q),W;if(G==$){if(oX(Z,q))return{changes:{insert:$+$,from:q},effects:D2.of(q+$.length),range:M.cursor(q+$.length)};else if(zY(Z,q)){let z=J&&Z.sliceDoc(q,q+$.length*3)==$+$+$?$+$+$:$;return{changes:{from:q,to:q+z.length,insert:z},range:M.cursor(q+z.length)}}}else if(J&&Z.sliceDoc(q-2*$.length,q)==$+$&&(W=tX(Z,q-2*$.length,Y))>-1&&oX(Z,W))return{changes:{insert:$+$+$+$,from:q},effects:D2.of(q+$.length),range:M.cursor(q+$.length)};else if(Z.charCategorizer(q)(G)!=Q0.Word){if(tX(Z,q,Y)>-1&&!Yj(Z,q,$,Y))return{changes:{insert:$+$,from:q},effects:D2.of(q+$.length),range:M.cursor(q+$.length)}}return{range:Q=U}});return Q?null:Z.update(K,{scrollIntoView:!0,userEvent:"input.type"})}function oX(Z,$){let J=B0(Z).resolveInner($+1);return J.parent&&J.from==$}function Yj(Z,$,J,X){let Y=B0(Z).resolveInner($,-1),Q=X.reduce((K,U)=>Math.max(K,U.length),0);for(let K=0;K<5;K++){let U=Z.sliceDoc(Y.from,Math.min(Y.to,Y.from+J.length+Q)),q=U.indexOf(J);if(!q||q>-1&&X.indexOf(U.slice(0,q))>-1){let W=Y.firstChild;while(W&&W.from==Y.from&&W.to-W.from>J.length+q){if(Z.sliceDoc(W.to-J.length,W.to)==J)return!1;W=W.firstChild}return!0}let G=Y.to==$&&Y.parent;if(!G)break;Y=G}return!1}function tX(Z,$,J){let X=Z.charCategorizer($);if(X(Z.sliceDoc($-1,$))!=Q0.Word)return $;for(let Y of J){let Q=$-Y.length;if(Z.sliceDoc(Q,$)==Y&&X(Z.sliceDoc(Q-1,Q))!=Q0.Word)return Q}return-1}function _Y(Z={}){return[iW,c0,E0.of(Z),sW,Qj,rW]}var q4=[{key:"Ctrl-Space",run:$4},{mac:"Alt-`",run:$4},{mac:"Alt-i",run:$4},{key:"Escape",run:lW},{key:"ArrowDown",run:M9(!0)},{key:"ArrowUp",run:M9(!1)},{key:"PageDown",run:M9(!0,"page")},{key:"PageUp",run:M9(!1,"page")},{key:"Enter",run:pW}],Qj=N1.highest(k3.computeN([E0],(Z)=>Z.facet(E0).defaultKeymap?[q4]:[]));class G4{constructor(Z,$,J){this.from=Z,this.to=$,this.diagnostic=J}}class A2{constructor(Z,$,J){this.diagnostics=Z,this.panel=$,this.selected=J}static init(Z,$,J){let X=J.facet(i3).markerFilter;if(X)Z=X(Z,J);let Y=Z.slice().sort((z,_)=>z.from-_.from||z.to-_.to),Q=new n0,K=[],U=0,q=J.doc.iter(),G=0,W=J.doc.length;for(let z=0;;){let _=z==Y.length?null:Y[z];if(!_&&!K.length)break;let V,O;if(K.length)V=U,O=K.reduce((D,A)=>Math.min(D,A.to),_&&_.from>V?_.from:1e8);else{if(V=_.from,V>W)break;O=_.to,K.push(_),z++}while(z<Y.length){let D=Y[z];if(D.from==V&&(D.to>D.from||D.to==V))K.push(D),z++,O=Math.min(D.to,O);else{O=Math.min(D.from,O);break}}O=Math.min(O,W);let N=!1;if(K.some((D)=>D.from==V&&(D.to==O||O==W))){if(N=V==O,!N&&O-V<10){let D=V-(G+q.value.length);if(D>0)q.next(D),G=V;for(let A=V;;){if(A>=O){N=!0;break}if(!q.lineBreak&&G+q.value.length>A)break;A=G+q.value.length,G+=q.value.length,q.next()}}}let F=Hj(K);if(N)Q.add(V,V,m.widget({widget:new DY(F),diagnostics:K.slice()}));else{let D=K.reduce((A,L)=>L.markClass?A+" "+L.markClass:A,"");Q.add(V,O,m.mark({class:"cm-lintRange cm-lintRange-"+F+D,diagnostics:K.slice(),inclusiveEnd:K.some((A)=>A.to>O)}))}if(U=O,U==W)break;for(let D=0;D<K.length;D++)if(K[D].to<=U)K.splice(D--,1)}let j=Q.finish();return new A2(j,$,J3(j))}}function J3(Z,$=null,J=0){let X=null;return Z.between(J,1e9,(Y,Q,{spec:K})=>{if($&&K.diagnostics.indexOf($)<0)return;if(!X)X=new G4(Y,Q,$||K.diagnostics[0]);else if(K.diagnostics.indexOf(X.diagnostic)<0)return!1;else X=new G4(X.from,Q,X.diagnostic)}),X}function Kj(Z,$){let J=$.pos,X=$.end||J,Y=Z.state.facet(i3).hideOn(Z,J,X);if(Y!=null)return Y;let Q=Z.startState.doc.lineAt($.pos);return!!(Z.effects.some((K)=>K.is(HY))||Z.changes.touchesRange(Q.from,Math.max(Q.to,X)))}function Uj(Z,$){return Z.field(e0,!1)?$:$.concat(p.appendConfig.of(Nj))}var HY=p.define(),j4=p.define(),NY=p.define(),e0=z0.define({create(){return new A2(m.none,null,null)},update(Z,$){if($.docChanged&&Z.diagnostics.size){let J=Z.diagnostics.map($.changes),X=null,Y=Z.panel;if(Z.selected){let Q=$.changes.mapPos(Z.selected.from,1);X=J3(J,Z.selected.diagnostic,Q)||J3(J,null,Q)}if(!J.size&&Y&&$.state.facet(i3).autoPanel)Y=null;Z=new A2(J,Y,X)}for(let J of $.effects)if(J.is(HY)){let X=!$.state.facet(i3).autoPanel?Z.panel:J.value.length?r3.open:null;Z=A2.init(J.value,X,$.state)}else if(J.is(j4))Z=new A2(Z.diagnostics,J.value?r3.open:null,Z.selected);else if(J.is(NY))Z=new A2(Z.diagnostics,Z.panel,J.value);return Z},provide:(Z)=>[H2.from(Z,($)=>$.panel),C.decorations.from(Z,($)=>$.diagnostics)]});var qj=m.mark({class:"cm-lintRange cm-lintRange-active"});function Gj(Z,$,J){let{diagnostics:X}=Z.state.field(e0),Y,Q=-1,K=-1;X.between($-(J<0?1:0),$+(J>0?1:0),(q,G,{spec:W})=>{if($>=q&&$<=G&&(q==G||($>q||J>0)&&($<G||J<0)))return Y=W.diagnostics,Q=q,K=G,!1});let U=Z.state.facet(i3).tooltipFilter;if(Y&&U)Y=U(Y,Z.state);if(!Y)return null;return{pos:Q,end:K,above:Z.state.doc.lineAt(Q).to<K,create(){return{dom:Wj(Z,Y)}}}}function Wj(Z,$){return $0("ul",{class:"cm-tooltip-lint"},$.map((J)=>IY(Z,J,!1)))}var jj=(Z)=>{let $=Z.state.field(e0,!1);if(!$||!$.panel)Z.dispatch({effects:Uj(Z.state,[j4.of(!0)])});let J=w3(Z,r3.open);if(J)J.dom.querySelector(".cm-panel-lint ul").focus();return!0},OY=(Z)=>{let $=Z.state.field(e0,!1);if(!$||!$.panel)return!1;return Z.dispatch({effects:j4.of(!1)}),!0},zj=(Z)=>{let $=Z.state.field(e0,!1);if(!$)return!1;let J=Z.state.selection.main,X=$.diagnostics.iter(J.to+1);if(!X.value){if(X=$.diagnostics.iter(0),!X.value||X.from==J.from&&X.to==J.to)return!1}return Z.dispatch({selection:{anchor:X.from,head:X.to},scrollIntoView:!0}),!0};var RY=[{key:"Mod-Shift-m",run:jj,preventDefault:!0},{key:"F8",run:zj}];var i3=k.define({combine(Z){return{sources:Z.map(($)=>$.source).filter(($)=>$!=null),...h0(Z.map(($)=>$.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:VY,tooltipFilter:VY,needsRefresh:($,J)=>!$?J:!J?$:(X)=>$(X)||J(X),hideOn:($,J)=>!$?J:!J?$:(X,Y,Q)=>$(X,Y,Q)||J(X,Y,Q),autoPanel:($,J)=>$||J})}}});function VY(Z,$){return!Z?$:!$?Z:(J,X)=>$(Z(J,X),X)}function FY(Z){let $=[];if(Z)Z:for(let{name:J}of Z){for(let X=0;X<J.length;X++){let Y=J[X];if(/[a-zA-Z]/.test(Y)&&!$.some((Q)=>Q.toLowerCase()==Y.toLowerCase())){$.push(Y);continue Z}}$.push("")}return $}function IY(Z,$,J){var X;let Y=J?FY($.actions):[];return $0("li",{class:"cm-diagnostic cm-diagnostic-"+$.severity},$0("span",{class:"cm-diagnosticText"},$.renderMessage?$.renderMessage(Z):$.message),(X=$.actions)===null||X===void 0?void 0:X.map((Q,K)=>{let U=!1,q=(_)=>{if(_.preventDefault(),U)return;U=!0;let V=J3(Z.state.field(e0).diagnostics,$);if(V)Q.apply(Z,V.from,V.to)},{name:G}=Q,W=Y[K]?G.indexOf(Y[K]):-1,j=W<0?G:[G.slice(0,W),$0("u",G.slice(W,W+1)),G.slice(W+1)],z=Q.markClass?" "+Q.markClass:"";return $0("button",{type:"button",class:"cm-diagnosticAction"+z,onclick:q,onmousedown:q,"aria-label":` Action: ${G}${W<0?"":` (access key "${Y[K]})"`}.`},j)}),$.source&&$0("div",{class:"cm-diagnosticSource"},$.source))}class DY extends o0{constructor(Z){super();this.sev=Z}eq(Z){return Z.sev==this.sev}toDOM(){return $0("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class W4{constructor(Z,$){this.diagnostic=$,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=IY(Z,$,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class r3{constructor(Z){this.view=Z,this.items=[];let $=(X)=>{if(X.ctrlKey||X.altKey||X.metaKey)return;if(X.keyCode==27)OY(this.view),this.view.focus();else if(X.keyCode==38||X.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(X.keyCode==40||X.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(X.keyCode==36)this.moveSelection(0);else if(X.keyCode==35)this.moveSelection(this.items.length-1);else if(X.keyCode==13)this.view.focus();else if(X.keyCode>=65&&X.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:Y}=this.items[this.selectedIndex],Q=FY(Y.actions);for(let K=0;K<Q.length;K++)if(Q[K].toUpperCase().charCodeAt(0)==X.keyCode){let U=J3(this.view.state.field(e0).diagnostics,Y);if(U)Y.actions[K].apply(Z,U.from,U.to)}}else return;X.preventDefault()},J=(X)=>{for(let Y=0;Y<this.items.length;Y++)if(this.items[Y].dom.contains(X.target))this.moveSelection(Y)};this.list=$0("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:$,onclick:J}),this.dom=$0("div",{class:"cm-panel-lint"},this.list,$0("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>OY(this.view)},"Ã—")),this.update()}get selectedIndex(){let Z=this.view.state.field(e0).selected;if(!Z)return-1;for(let $=0;$<this.items.length;$++)if(this.items[$].diagnostic==Z.diagnostic)return $;return-1}update(){let{diagnostics:Z,selected:$}=this.view.state.field(e0),J=0,X=!1,Y=null,Q=new Set;Z.between(0,this.view.state.doc.length,(K,U,{spec:q})=>{for(let G of q.diagnostics){if(Q.has(G))continue;Q.add(G);let W=-1,j;for(let z=J;z<this.items.length;z++)if(this.items[z].diagnostic==G){W=z;break}if(W<0)j=new W4(this.view,G),this.items.splice(J,0,j),X=!0;else if(j=this.items[W],W>J)this.items.splice(J,W-J),X=!0;if($&&j.diagnostic==$.diagnostic){if(!j.dom.hasAttribute("aria-selected"))j.dom.setAttribute("aria-selected","true"),Y=j}else if(j.dom.hasAttribute("aria-selected"))j.dom.removeAttribute("aria-selected");J++}});while(J<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0))X=!0,this.items.pop();if(this.items.length==0)this.items.push(new W4(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),X=!0;if(Y)this.list.setAttribute("aria-activedescendant",Y.id),this.view.requestMeasure({key:this,read:()=>({sel:Y.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:K,panel:U})=>{let q=U.height/this.list.offsetHeight;if(K.top<U.top)this.list.scrollTop-=(U.top-K.top)/q;else if(K.bottom>U.bottom)this.list.scrollTop+=(K.bottom-U.bottom)/q}});else if(this.selectedIndex<0)this.list.removeAttribute("aria-activedescendant");if(X)this.sync()}sync(){let Z=this.list.firstChild;function $(){let J=Z;Z=J.nextSibling,J.remove()}for(let J of this.items)if(J.dom.parentNode==this.list){while(Z!=J.dom)$();Z=J.dom.nextSibling}else this.list.insertBefore(J.dom,Z);while(Z)$()}moveSelection(Z){if(this.selectedIndex<0)return;let $=this.view.state.field(e0),J=J3($.diagnostics,this.items[Z].diagnostic);if(!J)return;this.view.dispatch({selection:{anchor:J.from,head:J.to},scrollIntoView:!0,effects:NY.of(J)})}static open(Z){return new r3(Z)}}function _j(Z,$='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${$}>${encodeURIComponent(Z)}</svg>')`}function E9(Z){return _j(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${Z}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var Oj=C.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:0.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:E9("#d11")},".cm-lintRange-warning":{backgroundImage:E9("orange")},".cm-lintRange-info":{backgroundImage:E9("#999")},".cm-lintRange-hint":{backgroundImage:E9("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Vj(Z){return Z=="error"?4:Z=="warning"?3:Z=="info"?2:1}function Hj(Z){let $="hint",J=1;for(let X of Z){let Y=Vj(X.severity);if(Y>J)J=Y,$=X.severity}return $}var Nj=[e0,C.decorations.compute([e0],(Z)=>{let{selected:$,panel:J}=Z.field(e0);return!$||!J||$.from==$.to?m.none:m.set([qj.range($.from,$.to)])}),f$(Gj,{hideOn:Kj}),Oj];var MY=(()=>[i$(),r$(),x$(),$X(),bJ(),T$(),k$(),n.allowMultipleSelections.of(!0),MJ(),U9(xJ,{fallback:!0}),uJ(),qY(),_Y(),u$(),m$(),v$(),vX(),k3.of([...jY,...bX,...dX,...QX,...PJ,...q4,...RY])])();function z4(Z){var $={as:"keyword",do:"keyword",else:"keyword",end:"keyword",exception:"keyword",fun:"keyword",functor:"keyword",if:"keyword",in:"keyword",include:"keyword",let:"keyword",of:"keyword",open:"keyword",rec:"keyword",struct:"keyword",then:"keyword",type:"keyword",val:"keyword",while:"keyword",with:"keyword"},J=Z.extraWords||{};for(var X in J)if(J.hasOwnProperty(X))$[X]=Z.extraWords[X];var Y=[];for(var Q in $)Y.push(Q);function K(W,j){var z=W.next();if(z==='"')return j.tokenize=U,j.tokenize(W,j);if(z==="{"){if(W.eat("|"))return j.longString=!0,j.tokenize=G,j.tokenize(W,j)}if(z==="("){if(W.match(/^\*(?!\))/))return j.commentLevel++,j.tokenize=q,j.tokenize(W,j)}if(z==="~"||z==="?")return W.eatWhile(/\w/),"variableName.special";if(z==="`")return W.eatWhile(/\w/),"quote";if(z==="/"&&Z.slashComments&&W.eat("/"))return W.skipToEnd(),"comment";if(/\d/.test(z)){if(z==="0"&&W.eat(/[bB]/))W.eatWhile(/[01]/);if(z==="0"&&W.eat(/[xX]/))W.eatWhile(/[0-9a-fA-F]/);if(z==="0"&&W.eat(/[oO]/))W.eatWhile(/[0-7]/);else{if(W.eatWhile(/[\d_]/),W.eat("."))W.eatWhile(/[\d]/);if(W.eat(/[eE]/))W.eatWhile(/[\d\-+]/)}return"number"}if(/[+\-*&%=<>!?|@\.~:]/.test(z))return"operator";if(/[\w\xa1-\uffff]/.test(z)){W.eatWhile(/[\w\xa1-\uffff]/);var _=W.current();return $.hasOwnProperty(_)?$[_]:"variable"}return null}function U(W,j){var z,_=!1,V=!1;while((z=W.next())!=null){if(z==='"'&&!V){_=!0;break}V=!V&&z==="\\"}if(_&&!V)j.tokenize=K;return"string"}function q(W,j){var z,_;while(j.commentLevel>0&&(_=W.next())!=null){if(z==="("&&_==="*")j.commentLevel++;if(z==="*"&&_===")")j.commentLevel--;z=_}if(j.commentLevel<=0)j.tokenize=K;return"comment"}function G(W,j){var z,_;while(j.longString&&(_=W.next())!=null){if(z==="|"&&_==="}")j.longString=!1;z=_}if(!j.longString)j.tokenize=K;return"string"}return{startState:function(){return{tokenize:K,commentLevel:0,longString:!1}},token:function(W,j){if(W.eatSpace())return null;return j.tokenize(W,j)},languageData:{autocomplete:Y,commentTokens:{line:Z.slashComments?"//":void 0,block:{open:"(*",close:"*)"}}}}}var P9=z4({name:"ocaml",extraWords:{and:"keyword",assert:"keyword",begin:"keyword",class:"keyword",constraint:"keyword",done:"keyword",downto:"keyword",external:"keyword",function:"keyword",initializer:"keyword",lazy:"keyword",match:"keyword",method:"keyword",module:"keyword",mutable:"keyword",new:"keyword",nonrec:"keyword",object:"keyword",private:"keyword",sig:"keyword",to:"keyword",try:"keyword",value:"keyword",virtual:"keyword",when:"keyword",raise:"builtin",failwith:"builtin",true:"builtin",false:"builtin",asr:"builtin",land:"builtin",lor:"builtin",lsl:"builtin",lsr:"builtin",lxor:"builtin",mod:"builtin",or:"builtin",raise_notrace:"builtin",trace:"builtin",exit:"builtin",print_string:"builtin",print_endline:"builtin",int:"type",float:"type",bool:"type",char:"type",string:"type",unit:"type",List:"builtin"}}),UO=z4({name:"fsharp",extraWords:{abstract:"keyword",assert:"keyword",base:"keyword",begin:"keyword",class:"keyword",default:"keyword",delegate:"keyword","do!":"keyword",done:"keyword",downcast:"keyword",downto:"keyword",elif:"keyword",extern:"keyword",finally:"keyword",for:"keyword",function:"keyword",global:"keyword",inherit:"keyword",inline:"keyword",interface:"keyword",internal:"keyword",lazy:"keyword","let!":"keyword",match:"keyword",member:"keyword",module:"keyword",mutable:"keyword",namespace:"keyword",new:"keyword",null:"keyword",override:"keyword",private:"keyword",public:"keyword","return!":"keyword",return:"keyword",select:"keyword",static:"keyword",to:"keyword",try:"keyword",upcast:"keyword","use!":"keyword",use:"keyword",void:"keyword",when:"keyword","yield!":"keyword",yield:"keyword",atomic:"keyword",break:"keyword",checked:"keyword",component:"keyword",const:"keyword",constraint:"keyword",constructor:"keyword",continue:"keyword",eager:"keyword",event:"keyword",external:"keyword",fixed:"keyword",method:"keyword",mixin:"keyword",object:"keyword",parallel:"keyword",process:"keyword",protected:"keyword",pure:"keyword",sealed:"keyword",tailcall:"keyword",trait:"keyword",virtual:"keyword",volatile:"keyword",List:"builtin",Seq:"builtin",Map:"builtin",Set:"builtin",Option:"builtin",int:"builtin",string:"builtin",not:"builtin",true:"builtin",false:"builtin",raise:"builtin",failwith:"builtin"},slashComments:!0}),qO=z4({name:"sml",extraWords:{abstype:"keyword",and:"keyword",andalso:"keyword",case:"keyword",datatype:"keyword",fn:"keyword",handle:"keyword",infix:"keyword",infixr:"keyword",local:"keyword",nonfix:"keyword",op:"keyword",orelse:"keyword",raise:"keyword",withtype:"keyword",eqtype:"keyword",sharing:"keyword",sig:"keyword",signature:"keyword",structure:"keyword",where:"keyword",true:"keyword",false:"keyword",int:"builtin",real:"builtin",string:"builtin",char:"builtin",bool:"builtin"},slashComments:!0});var _4={version:"1.7.1",latte:{name:"Latte",emoji:"\uD83C\uDF3B",order:0,dark:!1,colors:{rosewater:{name:"Rosewater",order:0,hex:"#dc8a78",rgb:{r:220,g:138,b:120},hsl:{h:10.799999999999995,s:0.5882352941176472,l:0.6666666666666667},accent:!0},flamingo:{name:"Flamingo",order:1,hex:"#dd7878",rgb:{r:221,g:120,b:120},hsl:{h:0,s:0.5976331360946746,l:0.6686274509803922},accent:!0},pink:{name:"Pink",order:2,hex:"#ea76cb",rgb:{r:234,g:118,b:203},hsl:{h:316.0344827586207,s:0.7341772151898731,l:0.6901960784313725},accent:!0},mauve:{name:"Mauve",order:3,hex:"#8839ef",rgb:{r:136,g:57,b:239},hsl:{h:266.0439560439561,s:0.8504672897196262,l:0.5803921568627451},accent:!0},red:{name:"Red",order:4,hex:"#d20f39",rgb:{r:210,g:15,b:57},hsl:{h:347.0769230769231,s:0.8666666666666666,l:0.4411764705882353},accent:!0},maroon:{name:"Maroon",order:5,hex:"#e64553",rgb:{r:230,g:69,b:83},hsl:{h:354.78260869565213,s:0.76303317535545,l:0.5862745098039216},accent:!0},peach:{name:"Peach",order:6,hex:"#fe640b",rgb:{r:254,g:100,b:11},hsl:{h:21.975308641975307,s:0.9918367346938776,l:0.5196078431372549},accent:!0},yellow:{name:"Yellow",order:7,hex:"#df8e1d",rgb:{r:223,g:142,b:29},hsl:{h:34.948453608247426,s:0.7698412698412698,l:0.49411764705882355},accent:!0},green:{name:"Green",order:8,hex:"#40a02b",rgb:{r:64,g:160,b:43},hsl:{h:109.23076923076923,s:0.5763546798029556,l:0.39803921568627454},accent:!0},teal:{name:"Teal",order:9,hex:"#179299",rgb:{r:23,g:146,b:153},hsl:{h:183.23076923076923,s:0.7386363636363636,l:0.34509803921568627},accent:!0},sky:{name:"Sky",order:10,hex:"#04a5e5",rgb:{r:4,g:165,b:229},hsl:{h:197.0666666666667,s:0.965665236051502,l:0.45686274509803926},accent:!0},sapphire:{name:"Sapphire",order:11,hex:"#209fb5",rgb:{r:32,g:159,b:181},hsl:{h:188.85906040268458,s:0.6995305164319249,l:0.4176470588235294},accent:!0},blue:{name:"Blue",order:12,hex:"#1e66f5",rgb:{r:30,g:102,b:245},hsl:{h:219.90697674418607,s:0.9148936170212768,l:0.5392156862745098},accent:!0},lavender:{name:"Lavender",order:13,hex:"#7287fd",rgb:{r:114,g:135,b:253},hsl:{h:230.93525179856115,s:0.9720279720279721,l:0.7196078431372549},accent:!0},text:{name:"Text",order:14,hex:"#4c4f69",rgb:{r:76,g:79,b:105},hsl:{h:233.79310344827587,s:0.16022099447513813,l:0.3549019607843137},accent:!1},subtext1:{name:"Subtext 1",order:15,hex:"#5c5f77",rgb:{r:92,g:95,b:119},hsl:{h:233.33333333333334,s:0.1279620853080569,l:0.4137254901960784},accent:!1},subtext0:{name:"Subtext 0",order:16,hex:"#6c6f85",rgb:{r:108,g:111,b:133},hsl:{h:232.79999999999998,s:0.10373443983402494,l:0.4725490196078431},accent:!1},overlay2:{name:"Overlay 2",order:17,hex:"#7c7f93",rgb:{r:124,g:127,b:147},hsl:{h:232.17391304347825,s:0.09623430962343092,l:0.5313725490196078},accent:!1},overlay1:{name:"Overlay 1",order:18,hex:"#8c8fa1",rgb:{r:140,g:143,b:161},hsl:{h:231.42857142857144,s:0.10047846889952144,l:0.5901960784313726},accent:!1},overlay0:{name:"Overlay 0",order:19,hex:"#9ca0b0",rgb:{r:156,g:160,b:176},hsl:{h:228.00000000000003,s:0.11235955056179768,l:0.6509803921568628},accent:!1},surface2:{name:"Surface 2",order:20,hex:"#acb0be",rgb:{r:172,g:176,b:190},hsl:{h:226.6666666666667,s:0.12162162162162159,l:0.7098039215686275},accent:!1},surface1:{name:"Surface 1",order:21,hex:"#bcc0cc",rgb:{r:188,g:192,b:204},hsl:{h:225.00000000000003,s:0.13559322033898308,l:0.7686274509803922},accent:!1},surface0:{name:"Surface 0",order:22,hex:"#ccd0da",rgb:{r:204,g:208,b:218},hsl:{h:222.85714285714292,s:0.1590909090909089,l:0.8274509803921568},accent:!1},base:{name:"Base",order:23,hex:"#eff1f5",rgb:{r:239,g:241,b:245},hsl:{h:220.00000000000009,s:0.23076923076923136,l:0.9490196078431372},accent:!1},mantle:{name:"Mantle",order:24,hex:"#e6e9ef",rgb:{r:230,g:233,b:239},hsl:{h:220.00000000000006,s:0.21951219512195116,l:0.919607843137255},accent:!1},crust:{name:"Crust",order:25,hex:"#dce0e8",rgb:{r:220,g:224,b:232},hsl:{h:220.00000000000006,s:0.20689655172413762,l:0.8862745098039215},accent:!1}},ansiColors:{black:{name:"Black",order:0,normal:{name:"Black",hex:"#5c5f77",rgb:{r:92,g:95,b:119},hsl:{h:233.33333333333334,s:0.1279620853080569,l:0.4137254901960784},code:0},bright:{name:"Bright Black",hex:"#6c6f85",rgb:{r:108,g:111,b:133},hsl:{h:232.79999999999998,s:0.10373443983402494,l:0.4725490196078431},code:8}},red:{name:"Red",order:1,normal:{name:"Red",hex:"#d20f39",rgb:{r:210,g:15,b:57},hsl:{h:347.0769230769231,s:0.8666666666666666,l:0.4411764705882353},code:1},bright:{name:"Bright Red",hex:"#de293e",rgb:{r:222,g:41,b:62},hsl:{h:353.0386740331492,s:0.7327935222672065,l:0.515686274509804},code:9}},green:{name:"Green",order:2,normal:{name:"Green",hex:"#40a02b",rgb:{r:64,g:160,b:43},hsl:{h:109.23076923076923,s:0.5763546798029556,l:0.39803921568627454},code:2},bright:{name:"Bright Green",hex:"#49af3d",rgb:{r:73,g:175,b:61},hsl:{h:113.68421052631581,s:0.48305084745762705,l:0.4627450980392157},code:10}},yellow:{name:"Yellow",order:3,normal:{name:"Yellow",hex:"#df8e1d",rgb:{r:223,g:142,b:29},hsl:{h:34.948453608247426,s:0.7698412698412698,l:0.49411764705882355},code:3},bright:{name:"Bright Yellow",hex:"#eea02d",rgb:{r:238,g:160,b:45},hsl:{h:35.751295336787564,s:0.8502202643171807,l:0.5549019607843138},code:11}},blue:{name:"Blue",order:4,normal:{name:"Blue",hex:"#1e66f5",rgb:{r:30,g:102,b:245},hsl:{h:219.90697674418607,s:0.9148936170212768,l:0.5392156862745098},code:4},bright:{name:"Bright Blue",hex:"#456eff",rgb:{r:69,g:110,b:255},hsl:{h:226.77419354838707,s:1,l:0.6352941176470588},code:12}},magenta:{name:"Magenta",order:5,normal:{name:"Magenta",hex:"#ea76cb",rgb:{r:234,g:118,b:203},hsl:{h:316.0344827586207,s:0.7341772151898731,l:0.6901960784313725},code:5},bright:{name:"Bright Magenta",hex:"#fe85d8",rgb:{r:254,g:133,b:216},hsl:{h:318.8429752066116,s:0.983739837398374,l:0.7588235294117647},code:13}},cyan:{name:"Cyan",order:6,normal:{name:"Cyan",hex:"#179299",rgb:{r:23,g:146,b:153},hsl:{h:183.23076923076923,s:0.7386363636363636,l:0.34509803921568627},code:6},bright:{name:"Bright Cyan",hex:"#2d9fa8",rgb:{r:45,g:159,b:168},hsl:{h:184.39024390243904,s:0.5774647887323943,l:0.4176470588235294},code:14}},white:{name:"White",order:7,normal:{name:"White",hex:"#acb0be",rgb:{r:172,g:176,b:190},hsl:{h:226.6666666666667,s:0.12162162162162159,l:0.7098039215686275},code:7},bright:{name:"Bright White",hex:"#bcc0cc",rgb:{r:188,g:192,b:204},hsl:{h:225.00000000000003,s:0.13559322033898308,l:0.7686274509803922},code:15}}}},frappe:{name:"FrappÃ©",emoji:"\uD83E\uDEB4",order:1,dark:!0,colors:{rosewater:{name:"Rosewater",order:0,hex:"#f2d5cf",rgb:{r:242,g:213,b:207},hsl:{h:10.2857142857143,s:0.5737704918032784,l:0.8803921568627451},accent:!0},flamingo:{name:"Flamingo",order:1,hex:"#eebebe",rgb:{r:238,g:190,b:190},hsl:{h:0,s:0.5853658536585367,l:0.8392156862745098},accent:!0},pink:{name:"Pink",order:2,hex:"#f4b8e4",rgb:{r:244,g:184,b:228},hsl:{h:316,s:0.7317073170731713,l:0.8392156862745098},accent:!0},mauve:{name:"Mauve",order:3,hex:"#ca9ee6",rgb:{r:202,g:158,b:230},hsl:{h:276.66666666666663,s:0.5901639344262294,l:0.7607843137254902},accent:!0},red:{name:"Red",order:4,hex:"#e78284",rgb:{r:231,g:130,b:132},hsl:{h:358.8118811881188,s:0.6778523489932885,l:0.7078431372549019},accent:!0},maroon:{name:"Maroon",order:5,hex:"#ea999c",rgb:{r:234,g:153,b:156},hsl:{h:357.77777777777777,s:0.6585365853658534,l:0.7588235294117647},accent:!0},peach:{name:"Peach",order:6,hex:"#ef9f76",rgb:{r:239,g:159,b:118},hsl:{h:20.33057851239669,s:0.7908496732026143,l:0.7},accent:!0},yellow:{name:"Yellow",order:7,hex:"#e5c890",rgb:{r:229,g:200,b:144},hsl:{h:39.52941176470588,s:0.6204379562043796,l:0.7313725490196079},accent:!0},green:{name:"Green",order:8,hex:"#a6d189",rgb:{r:166,g:209,b:137},hsl:{h:95.83333333333331,s:0.4390243902439024,l:0.6784313725490196},accent:!0},teal:{name:"Teal",order:9,hex:"#81c8be",rgb:{r:129,g:200,b:190},hsl:{h:171.5492957746479,s:0.3922651933701657,l:0.6450980392156862},accent:!0},sky:{name:"Sky",order:10,hex:"#99d1db",rgb:{r:153,g:209,b:219},hsl:{h:189.09090909090907,s:0.47826086956521735,l:0.7294117647058823},accent:!0},sapphire:{name:"Sapphire",order:11,hex:"#85c1dc",rgb:{r:133,g:193,b:220},hsl:{h:198.62068965517244,s:0.5541401273885351,l:0.692156862745098},accent:!0},blue:{name:"Blue",order:12,hex:"#8caaee",rgb:{r:140,g:170,b:238},hsl:{h:221.6326530612245,s:0.7424242424242424,l:0.7411764705882353},accent:!0},lavender:{name:"Lavender",order:13,hex:"#babbf1",rgb:{r:186,g:187,b:241},hsl:{h:238.90909090909093,s:0.6626506024096385,l:0.8372549019607842},accent:!0},text:{name:"Text",order:14,hex:"#c6d0f5",rgb:{r:198,g:208,b:245},hsl:{h:227.2340425531915,s:0.7014925373134333,l:0.8686274509803922},accent:!1},subtext1:{name:"Subtext 1",order:15,hex:"#b5bfe2",rgb:{r:181,g:191,b:226},hsl:{h:226.66666666666669,s:0.43689320388349495,l:0.7980392156862746},accent:!1},subtext0:{name:"Subtext 0",order:16,hex:"#a5adce",rgb:{r:165,g:173,b:206},hsl:{h:228.29268292682926,s:0.2949640287769784,l:0.7274509803921569},accent:!1},overlay2:{name:"Overlay 2",order:17,hex:"#949cbb",rgb:{r:148,g:156,b:187},hsl:{h:227.69230769230768,s:0.22285714285714275,l:0.6568627450980392},accent:!1},overlay1:{name:"Overlay 1",order:18,hex:"#838ba7",rgb:{r:131,g:139,b:167},hsl:{h:226.66666666666669,s:0.16981132075471703,l:0.584313725490196},accent:!1},overlay0:{name:"Overlay 0",order:19,hex:"#737994",rgb:{r:115,g:121,b:148},hsl:{h:229.0909090909091,s:0.13360323886639683,l:0.515686274509804},accent:!1},surface2:{name:"Surface 2",order:20,hex:"#626880",rgb:{r:98,g:104,b:128},hsl:{h:228.00000000000003,s:0.1327433628318584,l:0.44313725490196076},accent:!1},surface1:{name:"Surface 1",order:21,hex:"#51576d",rgb:{r:81,g:87,b:109},hsl:{h:227.14285714285714,s:0.14736842105263157,l:0.37254901960784315},accent:!1},surface0:{name:"Surface 0",order:22,hex:"#414559",rgb:{r:65,g:69,b:89},hsl:{h:230.00000000000003,s:0.15584415584415584,l:0.30196078431372547},accent:!1},base:{name:"Base",order:23,hex:"#303446",rgb:{r:48,g:52,b:70},hsl:{h:229.0909090909091,s:0.18644067796610175,l:0.23137254901960785},accent:!1},mantle:{name:"Mantle",order:24,hex:"#292c3c",rgb:{r:41,g:44,b:60},hsl:{h:230.52631578947367,s:0.18811881188118806,l:0.19803921568627453},accent:!1},crust:{name:"Crust",order:25,hex:"#232634",rgb:{r:35,g:38,b:52},hsl:{h:229.41176470588238,s:0.19540229885057467,l:0.17058823529411765},accent:!1}},ansiColors:{black:{name:"Black",order:0,normal:{name:"Black",hex:"#51576d",rgb:{r:81,g:87,b:109},hsl:{h:227.14285714285714,s:0.14736842105263157,l:0.37254901960784315},code:0},bright:{name:"Bright Black",hex:"#626880",rgb:{r:98,g:104,b:128},hsl:{h:228.00000000000003,s:0.1327433628318584,l:0.44313725490196076},code:8}},red:{name:"Red",order:1,normal:{name:"Red",hex:"#e78284",rgb:{r:231,g:130,b:132},hsl:{h:358.8118811881188,s:0.6778523489932885,l:0.7078431372549019},code:1},bright:{name:"Bright Red",hex:"#e67172",rgb:{r:230,g:113,b:114},hsl:{h:359.4871794871795,s:0.7005988023952096,l:0.6725490196078432},code:9}},green:{name:"Green",order:2,normal:{name:"Green",hex:"#a6d189",rgb:{r:166,g:209,b:137},hsl:{h:95.83333333333331,s:0.4390243902439024,l:0.6784313725490196},code:2},bright:{name:"Bright Green",hex:"#8ec772",rgb:{r:142,g:199,b:114},hsl:{h:100.23529411764706,s:0.431472081218274,l:0.6137254901960785},code:10}},yellow:{name:"Yellow",order:3,normal:{name:"Yellow",hex:"#e5c890",rgb:{r:229,g:200,b:144},hsl:{h:39.52941176470588,s:0.6204379562043796,l:0.7313725490196079},code:3},bright:{name:"Bright Yellow",hex:"#d9ba73",rgb:{r:217,g:186,b:115},hsl:{h:41.764705882352935,s:0.5730337078651685,l:0.6509803921568628},code:11}},blue:{name:"Blue",order:4,normal:{name:"Blue",hex:"#8caaee",rgb:{r:140,g:170,b:238},hsl:{h:221.6326530612245,s:0.7424242424242424,l:0.7411764705882353},code:4},bright:{name:"Bright Blue",hex:"#7b9ef0",rgb:{r:123,g:158,b:240},hsl:{h:222.05128205128207,s:0.7959183673469388,l:0.711764705882353},code:12}},magenta:{name:"Magenta",order:5,normal:{name:"Magenta",hex:"#f4b8e4",rgb:{r:244,g:184,b:228},hsl:{h:316,s:0.7317073170731713,l:0.8392156862745098},code:5},bright:{name:"Bright Magenta",hex:"#f2a4db",rgb:{r:242,g:164,b:219},hsl:{h:317.6923076923077,s:0.7499999999999998,l:0.7960784313725491},code:13}},cyan:{name:"Cyan",order:6,normal:{name:"Cyan",hex:"#81c8be",rgb:{r:129,g:200,b:190},hsl:{h:171.5492957746479,s:0.3922651933701657,l:0.6450980392156862},code:6},bright:{name:"Bright Cyan",hex:"#5abfb5",rgb:{r:90,g:191,b:181},hsl:{h:174.05940594059405,s:0.44104803493449785,l:0.5509803921568628},code:14}},white:{name:"White",order:7,normal:{name:"White",hex:"#a5adce",rgb:{r:165,g:173,b:206},hsl:{h:228.29268292682926,s:0.2949640287769784,l:0.7274509803921569},code:7},bright:{name:"Bright White",hex:"#b5bfe2",rgb:{r:181,g:191,b:226},hsl:{h:226.66666666666669,s:0.43689320388349495,l:0.7980392156862746},code:15}}}},macchiato:{name:"Macchiato",emoji:"\uD83C\uDF3A",order:2,dark:!0,colors:{rosewater:{name:"Rosewater",order:0,hex:"#f4dbd6",rgb:{r:244,g:219,b:214},hsl:{h:9.999999999999963,s:0.5769230769230775,l:0.8980392156862745},accent:!0},flamingo:{name:"Flamingo",order:1,hex:"#f0c6c6",rgb:{r:240,g:198,b:198},hsl:{h:0,s:0.5833333333333333,l:0.8588235294117648},accent:!0},pink:{name:"Pink",order:2,hex:"#f5bde6",rgb:{r:245,g:189,b:230},hsl:{h:316.0714285714286,s:0.7368421052631583,l:0.8509803921568628},accent:!0},mauve:{name:"Mauve",order:3,hex:"#c6a0f6",rgb:{r:198,g:160,b:246},hsl:{h:266.51162790697674,s:0.8269230769230772,l:0.7960784313725491},accent:!0},red:{name:"Red",order:4,hex:"#ed8796",rgb:{r:237,g:135,b:150},hsl:{h:351.1764705882353,s:0.7391304347826088,l:0.7294117647058824},accent:!0},maroon:{name:"Maroon",order:5,hex:"#ee99a0",rgb:{r:238,g:153,b:160},hsl:{h:355.05882352941177,s:0.7142857142857143,l:0.7666666666666666},accent:!0},peach:{name:"Peach",order:6,hex:"#f5a97f",rgb:{r:245,g:169,b:127},hsl:{h:21.355932203389827,s:0.8550724637681162,l:0.7294117647058824},accent:!0},yellow:{name:"Yellow",order:7,hex:"#eed49f",rgb:{r:238,g:212,b:159},hsl:{h:40.253164556962034,s:0.6991150442477877,l:0.7784313725490196},accent:!0},green:{name:"Green",order:8,hex:"#a6da95",rgb:{r:166,g:218,b:149},hsl:{h:105.21739130434783,s:0.4825174825174825,l:0.7196078431372549},accent:!0},teal:{name:"Teal",order:9,hex:"#8bd5ca",rgb:{r:139,g:213,b:202},hsl:{h:171.08108108108107,s:0.46835443037974706,l:0.6901960784313725},accent:!0},sky:{name:"Sky",order:10,hex:"#91d7e3",rgb:{r:145,g:215,b:227},hsl:{h:188.78048780487802,s:0.5942028985507245,l:0.7294117647058823},accent:!0},sapphire:{name:"Sapphire",order:11,hex:"#7dc4e4",rgb:{r:125,g:196,b:228},hsl:{h:198.64077669902912,s:0.6560509554140128,l:0.692156862745098},accent:!0},blue:{name:"Blue",order:12,hex:"#8aadf4",rgb:{r:138,g:173,b:244},hsl:{h:220.188679245283,s:0.8281250000000003,l:0.7490196078431373},accent:!0},lavender:{name:"Lavender",order:13,hex:"#b7bdf8",rgb:{r:183,g:189,b:248},hsl:{h:234.46153846153848,s:0.8227848101265824,l:0.8450980392156863},accent:!0},text:{name:"Text",order:14,hex:"#cad3f5",rgb:{r:202,g:211,b:245},hsl:{h:227.4418604651163,s:0.6825396825396831,l:0.8764705882352941},accent:!1},subtext1:{name:"Subtext 1",order:15,hex:"#b8c0e0",rgb:{r:184,g:192,b:224},hsl:{h:228,s:0.39215686274509803,l:0.8},accent:!1},subtext0:{name:"Subtext 0",order:16,hex:"#a5adcb",rgb:{r:165,g:173,b:203},hsl:{h:227.36842105263156,s:0.2676056338028167,l:0.7215686274509804},accent:!1},overlay2:{name:"Overlay 2",order:17,hex:"#939ab7",rgb:{r:147,g:154,b:183},hsl:{h:228.33333333333331,s:0.2000000000000001,l:0.6470588235294117},accent:!1},overlay1:{name:"Overlay 1",order:18,hex:"#8087a2",rgb:{r:128,g:135,b:162},hsl:{h:227.6470588235294,s:0.1545454545454545,l:0.5686274509803921},accent:!1},overlay0:{name:"Overlay 0",order:19,hex:"#6e738d",rgb:{r:110,g:115,b:141},hsl:{h:230.32258064516128,s:0.12350597609561753,l:0.49215686274509807},accent:!1},surface2:{name:"Surface 2",order:20,hex:"#5b6078",rgb:{r:91,g:96,b:120},hsl:{h:229.65517241379308,s:0.13744075829383887,l:0.4137254901960784},accent:!1},surface1:{name:"Surface 1",order:21,hex:"#494d64",rgb:{r:73,g:77,b:100},hsl:{h:231.11111111111114,s:0.15606936416184972,l:0.3392156862745098},accent:!1},surface0:{name:"Surface 0",order:22,hex:"#363a4f",rgb:{r:54,g:58,b:79},hsl:{h:230.4,s:0.1879699248120301,l:0.2607843137254902},accent:!1},base:{name:"Base",order:23,hex:"#24273a",rgb:{r:36,g:39,b:58},hsl:{h:231.8181818181818,s:0.23404255319148934,l:0.1843137254901961},accent:!1},mantle:{name:"Mantle",order:24,hex:"#1e2030",rgb:{r:30,g:32,b:48},hsl:{h:233.33333333333334,s:0.23076923076923075,l:0.15294117647058825},accent:!1},crust:{name:"Crust",order:25,hex:"#181926",rgb:{r:24,g:25,b:38},hsl:{h:235.71428571428572,s:0.22580645161290322,l:0.12156862745098039},accent:!1}},ansiColors:{black:{name:"Black",order:0,normal:{name:"Black",hex:"#494d64",rgb:{r:73,g:77,b:100},hsl:{h:231.11111111111114,s:0.15606936416184972,l:0.3392156862745098},code:0},bright:{name:"Bright Black",hex:"#5b6078",rgb:{r:91,g:96,b:120},hsl:{h:229.65517241379308,s:0.13744075829383887,l:0.4137254901960784},code:8}},red:{name:"Red",order:1,normal:{name:"Red",hex:"#ed8796",rgb:{r:237,g:135,b:150},hsl:{h:351.1764705882353,s:0.7391304347826088,l:0.7294117647058824},code:1},bright:{name:"Bright Red",hex:"#ec7486",rgb:{r:236,g:116,b:134},hsl:{h:351,s:0.759493670886076,l:0.6901960784313725},code:9}},green:{name:"Green",order:2,normal:{name:"Green",hex:"#a6da95",rgb:{r:166,g:218,b:149},hsl:{h:105.21739130434783,s:0.4825174825174825,l:0.7196078431372549},code:2},bright:{name:"Bright Green",hex:"#8ccf7f",rgb:{r:140,g:207,b:127},hsl:{h:110.24999999999999,s:0.45454545454545453,l:0.6549019607843137},code:10}},yellow:{name:"Yellow",order:3,normal:{name:"Yellow",hex:"#eed49f",rgb:{r:238,g:212,b:159},hsl:{h:40.253164556962034,s:0.6991150442477877,l:0.7784313725490196},code:3},bright:{name:"Bright Yellow",hex:"#e1c682",rgb:{r:225,g:198,b:130},hsl:{h:42.94736842105264,s:0.6129032258064515,l:0.696078431372549},code:11}},blue:{name:"Blue",order:4,normal:{name:"Blue",hex:"#8aadf4",rgb:{r:138,g:173,b:244},hsl:{h:220.188679245283,s:0.8281250000000003,l:0.7490196078431373},code:4},bright:{name:"Bright Blue",hex:"#78a1f6",rgb:{r:120,g:161,b:246},hsl:{h:220.47619047619048,s:0.8750000000000002,l:0.7176470588235294},code:12}},magenta:{name:"Magenta",order:5,normal:{name:"Magenta",hex:"#f5bde6",rgb:{r:245,g:189,b:230},hsl:{h:316.0714285714286,s:0.7368421052631583,l:0.8509803921568628},code:5},bright:{name:"Bright Magenta",hex:"#f2a9dd",rgb:{r:242,g:169,b:221},hsl:{h:317.26027397260276,s:0.7373737373737372,l:0.8058823529411765},code:13}},cyan:{name:"Cyan",order:6,normal:{name:"Cyan",hex:"#8bd5ca",rgb:{r:139,g:213,b:202},hsl:{h:171.08108108108107,s:0.46835443037974706,l:0.6901960784313725},code:6},bright:{name:"Bright Cyan",hex:"#63cbc0",rgb:{r:99,g:203,b:192},hsl:{h:173.65384615384616,s:0.4999999999999998,l:0.592156862745098},code:14}},white:{name:"White",order:7,normal:{name:"White",hex:"#a5adcb",rgb:{r:165,g:173,b:203},hsl:{h:227.36842105263156,s:0.2676056338028167,l:0.7215686274509804},code:7},bright:{name:"Bright White",hex:"#b8c0e0",rgb:{r:184,g:192,b:224},hsl:{h:228,s:0.39215686274509803,l:0.8},code:15}}}},mocha:{name:"Mocha",emoji:"\uD83C\uDF3F",order:3,dark:!0,colors:{rosewater:{name:"Rosewater",order:0,hex:"#f5e0dc",rgb:{r:245,g:224,b:220},hsl:{h:9.599999999999968,s:0.555555555555556,l:0.911764705882353},accent:!0},flamingo:{name:"Flamingo",order:1,hex:"#f2cdcd",rgb:{r:242,g:205,b:205},hsl:{h:0,s:0.587301587301587,l:0.8764705882352941},accent:!0},pink:{name:"Pink",order:2,hex:"#f5c2e7",rgb:{r:245,g:194,b:231},hsl:{h:316.4705882352941,s:0.7183098591549301,l:0.8607843137254902},accent:!0},mauve:{name:"Mauve",order:3,hex:"#cba6f7",rgb:{r:203,g:166,b:247},hsl:{h:267.4074074074074,s:0.8350515463917528,l:0.8098039215686275},accent:!0},red:{name:"Red",order:4,hex:"#f38ba8",rgb:{r:243,g:139,b:168},hsl:{h:343.2692307692308,s:0.8124999999999998,l:0.7490196078431373},accent:!0},maroon:{name:"Maroon",order:5,hex:"#eba0ac",rgb:{r:235,g:160,b:172},hsl:{h:350.4,s:0.6521739130434779,l:0.7745098039215685},accent:!0},peach:{name:"Peach",order:6,hex:"#fab387",rgb:{r:250,g:179,b:135},hsl:{h:22.95652173913043,s:0.92,l:0.7549019607843137},accent:!0},yellow:{name:"Yellow",order:7,hex:"#f9e2af",rgb:{r:249,g:226,b:175},hsl:{h:41.35135135135135,s:0.8604651162790699,l:0.8313725490196078},accent:!0},green:{name:"Green",order:8,hex:"#a6e3a1",rgb:{r:166,g:227,b:161},hsl:{h:115.45454545454544,s:0.5409836065573769,l:0.7607843137254902},accent:!0},teal:{name:"Teal",order:9,hex:"#94e2d5",rgb:{r:148,g:226,b:213},hsl:{h:170.00000000000003,s:0.5735294117647057,l:0.7333333333333334},accent:!0},sky:{name:"Sky",order:10,hex:"#89dceb",rgb:{r:137,g:220,b:235},hsl:{h:189.18367346938774,s:0.7101449275362316,l:0.7294117647058823},accent:!0},sapphire:{name:"Sapphire",order:11,hex:"#74c7ec",rgb:{r:116,g:199,b:236},hsl:{h:198.5,s:0.759493670886076,l:0.6901960784313725},accent:!0},blue:{name:"Blue",order:12,hex:"#89b4fa",rgb:{r:137,g:180,b:250},hsl:{h:217.1681415929203,s:0.9186991869918699,l:0.7588235294117647},accent:!0},lavender:{name:"Lavender",order:13,hex:"#b4befe",rgb:{r:180,g:190,b:254},hsl:{h:231.89189189189187,s:0.9736842105263159,l:0.8509803921568628},accent:!0},text:{name:"Text",order:14,hex:"#cdd6f4",rgb:{r:205,g:214,b:244},hsl:{h:226.15384615384616,s:0.6393442622950825,l:0.8803921568627451},accent:!1},subtext1:{name:"Subtext 1",order:15,hex:"#bac2de",rgb:{r:186,g:194,b:222},hsl:{h:226.66666666666669,s:0.35294117647058837,l:0.8},accent:!1},subtext0:{name:"Subtext 0",order:16,hex:"#a6adc8",rgb:{r:166,g:173,b:200},hsl:{h:227.6470588235294,s:0.23611111111111102,l:0.7176470588235294},accent:!1},overlay2:{name:"Overlay 2",order:17,hex:"#9399b2",rgb:{r:147,g:153,b:178},hsl:{h:228.38709677419354,s:0.16756756756756758,l:0.6372549019607843},accent:!1},overlay1:{name:"Overlay 1",order:18,hex:"#7f849c",rgb:{r:127,g:132,b:156},hsl:{h:229.65517241379308,s:0.12775330396475776,l:0.5549019607843138},accent:!1},overlay0:{name:"Overlay 0",order:19,hex:"#6c7086",rgb:{r:108,g:112,b:134},hsl:{h:230.7692307692308,s:0.10743801652892565,l:0.4745098039215686},accent:!1},surface2:{name:"Surface 2",order:20,hex:"#585b70",rgb:{r:88,g:91,b:112},hsl:{h:232.5,s:0.12,l:0.39215686274509803},accent:!1},surface1:{name:"Surface 1",order:21,hex:"#45475a",rgb:{r:69,g:71,b:90},hsl:{h:234.2857142857143,s:0.13207547169811326,l:0.31176470588235294},accent:!1},surface0:{name:"Surface 0",order:22,hex:"#313244",rgb:{r:49,g:50,b:68},hsl:{h:236.84210526315792,s:0.16239316239316234,l:0.22941176470588237},accent:!1},base:{name:"Base",order:23,hex:"#1e1e2e",rgb:{r:30,g:30,b:46},hsl:{h:240,s:0.21052631578947367,l:0.14901960784313725},accent:!1},mantle:{name:"Mantle",order:24,hex:"#181825",rgb:{r:24,g:24,b:37},hsl:{h:240,s:0.2131147540983607,l:0.11960784313725491},accent:!1},crust:{name:"Crust",order:25,hex:"#11111b",rgb:{r:17,g:17,b:27},hsl:{h:240,s:0.22727272727272727,l:0.08627450980392157},accent:!1}},ansiColors:{black:{name:"Black",order:0,normal:{name:"Black",hex:"#45475a",rgb:{r:69,g:71,b:90},hsl:{h:234.2857142857143,s:0.13207547169811326,l:0.31176470588235294},code:0},bright:{name:"Bright Black",hex:"#585b70",rgb:{r:88,g:91,b:112},hsl:{h:232.5,s:0.12,l:0.39215686274509803},code:8}},red:{name:"Red",order:1,normal:{name:"Red",hex:"#f38ba8",rgb:{r:243,g:139,b:168},hsl:{h:343.2692307692308,s:0.8124999999999998,l:0.7490196078431373},code:1},bright:{name:"Bright Red",hex:"#f37799",rgb:{r:243,g:119,b:153},hsl:{h:343.54838709677415,s:0.8378378378378376,l:0.7098039215686274},code:9}},green:{name:"Green",order:2,normal:{name:"Green",hex:"#a6e3a1",rgb:{r:166,g:227,b:161},hsl:{h:115.45454545454544,s:0.5409836065573769,l:0.7607843137254902},code:2},bright:{name:"Bright Green",hex:"#89d88b",rgb:{r:137,g:216,b:139},hsl:{h:121.51898734177213,s:0.5031847133757963,l:0.692156862745098},code:10}},yellow:{name:"Yellow",order:3,normal:{name:"Yellow",hex:"#f9e2af",rgb:{r:249,g:226,b:175},hsl:{h:41.35135135135135,s:0.8604651162790699,l:0.8313725490196078},code:3},bright:{name:"Bright Yellow",hex:"#ebd391",rgb:{r:235,g:211,b:145},hsl:{h:44,s:0.692307692307692,l:0.7450980392156863},code:11}},blue:{name:"Blue",order:4,normal:{name:"Blue",hex:"#89b4fa",rgb:{r:137,g:180,b:250},hsl:{h:217.1681415929203,s:0.9186991869918699,l:0.7588235294117647},code:4},bright:{name:"Bright Blue",hex:"#74a8fc",rgb:{r:116,g:168,b:252},hsl:{h:217.05882352941174,s:0.9577464788732396,l:0.7215686274509804},code:12}},magenta:{name:"Magenta",order:5,normal:{name:"Magenta",hex:"#f5c2e7",rgb:{r:245,g:194,b:231},hsl:{h:316.4705882352941,s:0.7183098591549301,l:0.8607843137254902},code:5},bright:{name:"Bright Magenta",hex:"#f2aede",rgb:{r:242,g:174,b:222},hsl:{h:317.6470588235294,s:0.7234042553191488,l:0.8156862745098039},code:13}},cyan:{name:"Cyan",order:6,normal:{name:"Cyan",hex:"#94e2d5",rgb:{r:148,g:226,b:213},hsl:{h:170.00000000000003,s:0.5735294117647057,l:0.7333333333333334},code:6},bright:{name:"Bright Cyan",hex:"#6bd7ca",rgb:{r:107,g:215,b:202},hsl:{h:172.77777777777777,s:0.5744680851063831,l:0.6313725490196078},code:14}},white:{name:"White",order:7,normal:{name:"White",hex:"#a6adc8",rgb:{r:166,g:173,b:200},hsl:{h:227.6470588235294,s:0.23611111111111102,l:0.7176470588235294},code:7},bright:{name:"Bright White",hex:"#bac2de",rgb:{r:186,g:194,b:222},hsl:{h:226.66666666666669,s:0.35294117647058837,l:0.8},code:15}}}}};var C9=(Z)=>Object.entries(Z),{version:zO,...Rj}=_4,_O=_4.version,X3=C9(Rj).reduce((Z,[$,J])=>{return Z[$]={...J,colorEntries:C9(J.colors),ansiColorEntries:C9(J.ansiColors)},Z},{}),OO=C9(X3);function T9(Z){let{colors:$,dark:J}=Z,X=C.theme({"&":{color:$.text.hex,backgroundColor:$.base.hex},".cm-content":{caretColor:$.rosewater.hex},".cm-cursor, .cm-dropCursor":{borderLeftColor:$.rosewater.hex},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:$.surface2.hex},".cm-panels":{backgroundColor:$.mantle.hex,color:$.text.hex},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:`${$.blue.hex}59`,outline:`1px solid ${$.blue.hex}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:`${$.blue.hex}2f`},".cm-activeLine":{backgroundColor:$.surface0.hex},".cm-selectionMatch":{backgroundColor:`${$.surface2.hex}4d`},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:`${$.surface2.hex}47`,color:$.text.hex},".cm-gutters":{backgroundColor:$.base.hex,color:$.subtext0.hex,border:"none"},".cm-activeLineGutter":{backgroundColor:$.surface0.hex},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:$.overlay0.hex},".cm-tooltip":{border:"none",backgroundColor:$.surface0.hex},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:$.surface0.hex,borderBottomColor:$.surface0.hex},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:$.surface1.hex,color:$.text.hex}}},{dark:J}),Y=i2.define([{tag:I.keyword,color:$.mauve.hex},{tag:[I.name,I.definition(I.name),I.deleted,I.character,I.macroName],color:$.text.hex},{tag:[I.function(I.variableName),I.function(I.propertyName),I.propertyName,I.labelName],color:$.blue.hex},{tag:[I.color,I.constant(I.name),I.standard(I.name)],color:$.peach.hex},{tag:[I.self,I.atom],color:$.red.hex},{tag:[I.typeName,I.className,I.changed,I.annotation,I.namespace],color:$.yellow.hex},{tag:[I.operator],color:$.sky.hex},{tag:[I.url,I.link],color:$.teal.hex},{tag:[I.escape,I.regexp],color:$.pink.hex},{tag:[I.meta,I.punctuation,I.separator,I.comment],color:$.overlay2.hex},{tag:I.strong,fontWeight:"bold"},{tag:I.emphasis,fontStyle:"italic"},{tag:I.strikethrough,textDecoration:"line-through"},{tag:I.link,color:$.blue.hex,textDecoration:"underline"},{tag:I.heading,fontWeight:"bold",color:$.blue.hex},{tag:[I.special(I.variableName)],color:$.lavender.hex},{tag:[I.bool,I.number],color:$.peach.hex},{tag:[I.processingInstruction,I.string,I.inserted],color:$.green.hex},{tag:I.invalid,color:$.red.hex}]);return[X,U9(Y)]}var AY=T9(X3.latte),IO=T9(X3.frappe),DO=T9(X3.macchiato),LY=T9(X3.mocha);var O4=new b2;function a3(Z){return Z?LY:AY}var X2=null;function BY(Z){let $=document.getElementById("editor");if(!$)return;if(!X2){let J=window.matchMedia("(prefers-color-scheme: dark)").matches,X=n.create({doc:Z,extensions:[MY,F2.define(P9),O4.of(a3(J)),C.lineWrapping,C.theme({"&":{height:"100%",backgroundColor:"var(--bg-app)",color:"var(--fg-primary)"},".cm-scroller":{overflow:"auto",fontFamily:"var(--font-mono)"}})]});X2=new C({state:X,parent:$})}else{let J=X2.state.doc.toString();if(J!==Z)X2.dispatch({changes:{from:0,to:J.length,insert:Z}})}}function EY(Z){if(X2)X2.dispatch({effects:O4.reconfigure(a3(Z))})}function PY(){return X2?X2.state.doc.toString():""}function V4(){return!!(window.ocaml&&window.ocaml.run)}async function CY(Z){if(!window.ocaml||!window.ocaml.run)throw Error("Compiler not ready yet.");return window.ocaml.run(Z)}function N4(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var B2=N4();function wY(Z){B2=Z}var Z6={exec:()=>null};function J0(Z,$=""){let J=typeof Z=="string"?Z:Z.source,X={replace:(Y,Q)=>{let K=typeof Q=="string"?Q:Q.source;return K=K.replace(f0.caret,"$1"),J=J.replace(Y,K),X},getRegex:()=>new RegExp(J,$)};return X}var Fj=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),f0={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:(Z)=>new RegExp(`^( {0,3}${Z})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}#`),htmlBeginRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}<(?:[a-z].*>|!--)`,"i")},Ij=/^(?:[ \t]*(?:\n|$))+/,Dj=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Mj=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,$6=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Aj=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,R4=/(?:[*+-]|\d{1,9}[.)])/,hY=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,vY=J0(hY).replace(/bull/g,R4).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Lj=J0(hY).replace(/bull/g,R4).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),F4=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Bj=/^[^\n]+/,I4=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Ej=J0(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",I4).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Pj=J0(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,R4).getRegex(),x9="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",D4=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Cj=J0("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",D4).replace("tag",x9).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),uY=J0(F4).replace("hr",$6).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x9).getRegex(),Tj=J0(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",uY).getRegex(),M4={blockquote:Tj,code:Dj,def:Ej,fences:Mj,heading:Aj,hr:$6,html:Cj,lheading:vY,list:Pj,newline:Ij,paragraph:uY,table:Z6,text:Bj},TY=J0("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",$6).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x9).getRegex(),yj={...M4,lheading:Lj,table:TY,paragraph:J0(F4).replace("hr",$6).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",TY).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",x9).getRegex()},bj={...M4,html:J0(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",D4).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Z6,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:J0(F4).replace("hr",$6).replace("heading",` *#{1,6} *[^
]`).replace("lheading",vY).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},kj=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Sj=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,mY=/^( {2,}|\\)\n(?!\s*$)/,xj=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,w9=/[\p{P}\p{S}]/u,A4=/[\s\p{P}\p{S}]/u,gY=/[^\s\p{P}\p{S}]/u,wj=J0(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,A4).getRegex(),fY=/(?!~)[\p{P}\p{S}]/u,hj=/(?!~)[\s\p{P}\p{S}]/u,vj=/(?:[^\s\p{P}\p{S}]|~)/u,uj=J0(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Fj?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),pY=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,mj=J0(pY,"u").replace(/punct/g,w9).getRegex(),gj=J0(pY,"u").replace(/punct/g,fY).getRegex(),lY="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",fj=J0(lY,"gu").replace(/notPunctSpace/g,gY).replace(/punctSpace/g,A4).replace(/punct/g,w9).getRegex(),pj=J0(lY,"gu").replace(/notPunctSpace/g,vj).replace(/punctSpace/g,hj).replace(/punct/g,fY).getRegex(),lj=J0("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,gY).replace(/punctSpace/g,A4).replace(/punct/g,w9).getRegex(),dj=J0(/\\(punct)/,"gu").replace(/punct/g,w9).getRegex(),cj=J0(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),sj=J0(D4).replace("(?:-->|$)","-->").getRegex(),nj=J0("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",sj).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),b9=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,ij=J0(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",b9).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),dY=J0(/^!?\[(label)\]\[(ref)\]/).replace("label",b9).replace("ref",I4).getRegex(),cY=J0(/^!?\[(ref)\](?:\[\])?/).replace("ref",I4).getRegex(),rj=J0("reflink|nolink(?!\\()","g").replace("reflink",dY).replace("nolink",cY).getRegex(),yY=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,L4={_backpedal:Z6,anyPunctuation:dj,autolink:cj,blockSkip:uj,br:mY,code:Sj,del:Z6,emStrongLDelim:mj,emStrongRDelimAst:fj,emStrongRDelimUnd:lj,escape:kj,link:ij,nolink:cY,punctuation:wj,reflink:dY,reflinkSearch:rj,tag:nj,text:xj,url:Z6},aj={...L4,link:J0(/^!?\[(label)\]\((.*?)\)/).replace("label",b9).getRegex(),reflink:J0(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",b9).getRegex()},H4={...L4,emStrongRDelimAst:pj,emStrongLDelim:gj,url:J0(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",yY).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:J0(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",yY).getRegex()},oj={...H4,br:J0(mY).replace("{2,}","*").getRegex(),text:J0(H4.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},y9={normal:M4,gfm:yj,pedantic:bj},o3={normal:L4,gfm:H4,breaks:oj,pedantic:aj},tj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bY=(Z)=>tj[Z];function f1(Z,$){if($){if(f0.escapeTest.test(Z))return Z.replace(f0.escapeReplace,bY)}else if(f0.escapeTestNoEncode.test(Z))return Z.replace(f0.escapeReplaceNoEncode,bY);return Z}function kY(Z){try{Z=encodeURI(Z).replace(f0.percentDecode,"%")}catch{return null}return Z}function SY(Z,$){let J=Z.replace(f0.findPipe,(Q,K,U)=>{let q=!1,G=K;for(;--G>=0&&U[G]==="\\";)q=!q;return q?"|":" |"}),X=J.split(f0.splitPipe),Y=0;if(X[0].trim()||X.shift(),X.length>0&&!X.at(-1)?.trim()&&X.pop(),$)if(X.length>$)X.splice($);else for(;X.length<$;)X.push("");for(;Y<X.length;Y++)X[Y]=X[Y].trim().replace(f0.slashPipe,"|");return X}function t3(Z,$,J){let X=Z.length;if(X===0)return"";let Y=0;for(;Y<X;){let Q=Z.charAt(X-Y-1);if(Q===$&&!J)Y++;else if(Q!==$&&J)Y++;else break}return Z.slice(0,X-Y)}function ej(Z,$){if(Z.indexOf($[1])===-1)return-1;let J=0;for(let X=0;X<Z.length;X++)if(Z[X]==="\\")X++;else if(Z[X]===$[0])J++;else if(Z[X]===$[1]&&(J--,J<0))return X;return J>0?-2:-1}function xY(Z,$,J,X,Y){let Q=$.href,K=$.title||null,U=Z[1].replace(Y.other.outputLinkReplace,"$1");X.state.inLink=!0;let q={type:Z[0].charAt(0)==="!"?"image":"link",raw:J,href:Q,title:K,text:U,tokens:X.inlineTokens(U)};return X.state.inLink=!1,q}function Zz(Z,$,J){let X=Z.match(J.other.indentCodeCompensation);if(X===null)return $;let Y=X[1];return $.split(`
`).map((Q)=>{let K=Q.match(J.other.beginningSpace);if(K===null)return Q;let[U]=K;return U.length>=Y.length?Q.slice(Y.length):Q}).join(`
`)}var k9=class{options;rules;lexer;constructor(Z){this.options=Z||B2}space(Z){let $=this.rules.block.newline.exec(Z);if($&&$[0].length>0)return{type:"space",raw:$[0]}}code(Z){let $=this.rules.block.code.exec(Z);if($){let J=$[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:$[0],codeBlockStyle:"indented",text:this.options.pedantic?J:t3(J,`
`)}}}fences(Z){let $=this.rules.block.fences.exec(Z);if($){let J=$[0],X=Zz(J,$[3]||"",this.rules);return{type:"code",raw:J,lang:$[2]?$[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):$[2],text:X}}}heading(Z){let $=this.rules.block.heading.exec(Z);if($){let J=$[2].trim();if(this.rules.other.endingHash.test(J)){let X=t3(J,"#");(this.options.pedantic||!X||this.rules.other.endingSpaceChar.test(X))&&(J=X.trim())}return{type:"heading",raw:$[0],depth:$[1].length,text:J,tokens:this.lexer.inline(J)}}}hr(Z){let $=this.rules.block.hr.exec(Z);if($)return{type:"hr",raw:t3($[0],`
`)}}blockquote(Z){let $=this.rules.block.blockquote.exec(Z);if($){let J=t3($[0],`
`).split(`
`),X="",Y="",Q=[];for(;J.length>0;){let K=!1,U=[],q;for(q=0;q<J.length;q++)if(this.rules.other.blockquoteStart.test(J[q]))U.push(J[q]),K=!0;else if(!K)U.push(J[q]);else break;J=J.slice(q);let G=U.join(`
`),W=G.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");X=X?`${X}
${G}`:G,Y=Y?`${Y}
${W}`:W;let j=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(W,Q,!0),this.lexer.state.top=j,J.length===0)break;let z=Q.at(-1);if(z?.type==="code")break;if(z?.type==="blockquote"){let _=z,V=_.raw+`
`+J.join(`
`),O=this.blockquote(V);Q[Q.length-1]=O,X=X.substring(0,X.length-_.raw.length)+O.raw,Y=Y.substring(0,Y.length-_.text.length)+O.text;break}else if(z?.type==="list"){let _=z,V=_.raw+`
`+J.join(`
`),O=this.list(V);Q[Q.length-1]=O,X=X.substring(0,X.length-z.raw.length)+O.raw,Y=Y.substring(0,Y.length-_.raw.length)+O.raw,J=V.substring(Q.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:X,tokens:Q,text:Y}}}list(Z){let $=this.rules.block.list.exec(Z);if($){let J=$[1].trim(),X=J.length>1,Y={type:"list",raw:"",ordered:X,start:X?+J.slice(0,-1):"",loose:!1,items:[]};J=X?`\\d{1,9}\\${J.slice(-1)}`:`\\${J}`,this.options.pedantic&&(J=X?J:"[*+-]");let Q=this.rules.other.listItemRegex(J),K=!1;for(;Z;){let q=!1,G="",W="";if(!($=Q.exec(Z))||this.rules.block.hr.test(Z))break;G=$[0],Z=Z.substring(G.length);let j=$[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,(O)=>" ".repeat(3*O.length)),z=Z.split(`
`,1)[0],_=!j.trim(),V=0;if(this.options.pedantic?(V=2,W=j.trimStart()):_?V=$[1].length+1:(V=$[2].search(this.rules.other.nonSpaceChar),V=V>4?1:V,W=j.slice(V),V+=$[1].length),_&&this.rules.other.blankLine.test(z)&&(G+=z+`
`,Z=Z.substring(z.length+1),q=!0),!q){let O=this.rules.other.nextBulletRegex(V),N=this.rules.other.hrRegex(V),F=this.rules.other.fencesBeginRegex(V),D=this.rules.other.headingBeginRegex(V),A=this.rules.other.htmlBeginRegex(V);for(;Z;){let L=Z.split(`
`,1)[0],B;if(z=L,this.options.pedantic?(z=z.replace(this.rules.other.listReplaceNesting,"  "),B=z):B=z.replace(this.rules.other.tabCharGlobal,"    "),F.test(z)||D.test(z)||A.test(z)||O.test(z)||N.test(z))break;if(B.search(this.rules.other.nonSpaceChar)>=V||!z.trim())W+=`
`+B.slice(V);else{if(_||j.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||F.test(j)||D.test(j)||N.test(j))break;W+=`
`+z}!_&&!z.trim()&&(_=!0),G+=L+`
`,Z=Z.substring(L.length+1),j=B.slice(V)}}Y.loose||(K?Y.loose=!0:this.rules.other.doubleBlankLine.test(G)&&(K=!0)),Y.items.push({type:"list_item",raw:G,task:!!this.options.gfm&&this.rules.other.listIsTask.test(W),loose:!1,text:W,tokens:[]}),Y.raw+=G}let U=Y.items.at(-1);if(U)U.raw=U.raw.trimEnd(),U.text=U.text.trimEnd();else return;Y.raw=Y.raw.trimEnd();for(let q of Y.items){if(this.lexer.state.top=!1,q.tokens=this.lexer.blockTokens(q.text,[]),q.task){if(q.text=q.text.replace(this.rules.other.listReplaceTask,""),q.tokens[0]?.type==="text"||q.tokens[0]?.type==="paragraph"){q.tokens[0].raw=q.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),q.tokens[0].text=q.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let W=this.lexer.inlineQueue.length-1;W>=0;W--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[W].src)){this.lexer.inlineQueue[W].src=this.lexer.inlineQueue[W].src.replace(this.rules.other.listReplaceTask,"");break}}let G=this.rules.other.listTaskCheckbox.exec(q.raw);if(G){let W={type:"checkbox",raw:G[0]+" ",checked:G[0]!=="[ ]"};q.checked=W.checked,Y.loose?q.tokens[0]&&["paragraph","text"].includes(q.tokens[0].type)&&"tokens"in q.tokens[0]&&q.tokens[0].tokens?(q.tokens[0].raw=W.raw+q.tokens[0].raw,q.tokens[0].text=W.raw+q.tokens[0].text,q.tokens[0].tokens.unshift(W)):q.tokens.unshift({type:"paragraph",raw:W.raw,text:W.raw,tokens:[W]}):q.tokens.unshift(W)}}if(!Y.loose){let G=q.tokens.filter((j)=>j.type==="space"),W=G.length>0&&G.some((j)=>this.rules.other.anyLine.test(j.raw));Y.loose=W}}if(Y.loose)for(let q of Y.items){q.loose=!0;for(let G of q.tokens)G.type==="text"&&(G.type="paragraph")}return Y}}html(Z){let $=this.rules.block.html.exec(Z);if($)return{type:"html",block:!0,raw:$[0],pre:$[1]==="pre"||$[1]==="script"||$[1]==="style",text:$[0]}}def(Z){let $=this.rules.block.def.exec(Z);if($){let J=$[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),X=$[2]?$[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",Y=$[3]?$[3].substring(1,$[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):$[3];return{type:"def",tag:J,raw:$[0],href:X,title:Y}}}table(Z){let $=this.rules.block.table.exec(Z);if(!$||!this.rules.other.tableDelimiter.test($[2]))return;let J=SY($[1]),X=$[2].replace(this.rules.other.tableAlignChars,"").split("|"),Y=$[3]?.trim()?$[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],Q={type:"table",raw:$[0],header:[],align:[],rows:[]};if(J.length===X.length){for(let K of X)this.rules.other.tableAlignRight.test(K)?Q.align.push("right"):this.rules.other.tableAlignCenter.test(K)?Q.align.push("center"):this.rules.other.tableAlignLeft.test(K)?Q.align.push("left"):Q.align.push(null);for(let K=0;K<J.length;K++)Q.header.push({text:J[K],tokens:this.lexer.inline(J[K]),header:!0,align:Q.align[K]});for(let K of Y)Q.rows.push(SY(K,Q.header.length).map((U,q)=>({text:U,tokens:this.lexer.inline(U),header:!1,align:Q.align[q]})));return Q}}lheading(Z){let $=this.rules.block.lheading.exec(Z);if($)return{type:"heading",raw:$[0],depth:$[2].charAt(0)==="="?1:2,text:$[1],tokens:this.lexer.inline($[1])}}paragraph(Z){let $=this.rules.block.paragraph.exec(Z);if($){let J=$[1].charAt($[1].length-1)===`
`?$[1].slice(0,-1):$[1];return{type:"paragraph",raw:$[0],text:J,tokens:this.lexer.inline(J)}}}text(Z){let $=this.rules.block.text.exec(Z);if($)return{type:"text",raw:$[0],text:$[0],tokens:this.lexer.inline($[0])}}escape(Z){let $=this.rules.inline.escape.exec(Z);if($)return{type:"escape",raw:$[0],text:$[1]}}tag(Z){let $=this.rules.inline.tag.exec(Z);if($)return!this.lexer.state.inLink&&this.rules.other.startATag.test($[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test($[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test($[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test($[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:$[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:$[0]}}link(Z){let $=this.rules.inline.link.exec(Z);if($){let J=$[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(J)){if(!this.rules.other.endAngleBracket.test(J))return;let Q=t3(J.slice(0,-1),"\\");if((J.length-Q.length)%2===0)return}else{let Q=ej($[2],"()");if(Q===-2)return;if(Q>-1){let K=($[0].indexOf("!")===0?5:4)+$[1].length+Q;$[2]=$[2].substring(0,Q),$[0]=$[0].substring(0,K).trim(),$[3]=""}}let X=$[2],Y="";if(this.options.pedantic){let Q=this.rules.other.pedanticHrefTitle.exec(X);Q&&(X=Q[1],Y=Q[3])}else Y=$[3]?$[3].slice(1,-1):"";return X=X.trim(),this.rules.other.startAngleBracket.test(X)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(J)?X=X.slice(1):X=X.slice(1,-1)),xY($,{href:X&&X.replace(this.rules.inline.anyPunctuation,"$1"),title:Y&&Y.replace(this.rules.inline.anyPunctuation,"$1")},$[0],this.lexer,this.rules)}}reflink(Z,$){let J;if((J=this.rules.inline.reflink.exec(Z))||(J=this.rules.inline.nolink.exec(Z))){let X=(J[2]||J[1]).replace(this.rules.other.multipleSpaceGlobal," "),Y=$[X.toLowerCase()];if(!Y){let Q=J[0].charAt(0);return{type:"text",raw:Q,text:Q}}return xY(J,Y,J[0],this.lexer,this.rules)}}emStrong(Z,$,J=""){let X=this.rules.inline.emStrongLDelim.exec(Z);if(!X||X[3]&&J.match(this.rules.other.unicodeAlphaNumeric))return;if(!(X[1]||X[2])||!J||this.rules.inline.punctuation.exec(J)){let Y=[...X[0]].length-1,Q,K,U=Y,q=0,G=X[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(G.lastIndex=0,$=$.slice(-1*Z.length+Y);(X=G.exec($))!=null;){if(Q=X[1]||X[2]||X[3]||X[4]||X[5]||X[6],!Q)continue;if(K=[...Q].length,X[3]||X[4]){U+=K;continue}else if((X[5]||X[6])&&Y%3&&!((Y+K)%3)){q+=K;continue}if(U-=K,U>0)continue;K=Math.min(K,K+U+q);let W=[...X[0]][0].length,j=Z.slice(0,Y+X.index+W+K);if(Math.min(Y,K)%2){let _=j.slice(1,-1);return{type:"em",raw:j,text:_,tokens:this.lexer.inlineTokens(_)}}let z=j.slice(2,-2);return{type:"strong",raw:j,text:z,tokens:this.lexer.inlineTokens(z)}}}}codespan(Z){let $=this.rules.inline.code.exec(Z);if($){let J=$[2].replace(this.rules.other.newLineCharGlobal," "),X=this.rules.other.nonSpaceChar.test(J),Y=this.rules.other.startingSpaceChar.test(J)&&this.rules.other.endingSpaceChar.test(J);return X&&Y&&(J=J.substring(1,J.length-1)),{type:"codespan",raw:$[0],text:J}}}br(Z){let $=this.rules.inline.br.exec(Z);if($)return{type:"br",raw:$[0]}}del(Z){let $=this.rules.inline.del.exec(Z);if($)return{type:"del",raw:$[0],text:$[2],tokens:this.lexer.inlineTokens($[2])}}autolink(Z){let $=this.rules.inline.autolink.exec(Z);if($){let J,X;return $[2]==="@"?(J=$[1],X="mailto:"+J):(J=$[1],X=J),{type:"link",raw:$[0],text:J,href:X,tokens:[{type:"text",raw:J,text:J}]}}}url(Z){let $;if($=this.rules.inline.url.exec(Z)){let J,X;if($[2]==="@")J=$[0],X="mailto:"+J;else{let Y;do Y=$[0],$[0]=this.rules.inline._backpedal.exec($[0])?.[0]??"";while(Y!==$[0]);J=$[0],$[1]==="www."?X="http://"+$[0]:X=$[0]}return{type:"link",raw:$[0],text:J,href:X,tokens:[{type:"text",raw:J,text:J}]}}}inlineText(Z){let $=this.rules.inline.text.exec(Z);if($){let J=this.lexer.state.inRawBlock;return{type:"text",raw:$[0],text:$[0],escaped:J}}}},E1=class Z{tokens;options;state;inlineQueue;tokenizer;constructor($){this.tokens=[],this.tokens.links=Object.create(null),this.options=$||B2,this.options.tokenizer=this.options.tokenizer||new k9,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let J={other:f0,block:y9.normal,inline:o3.normal};this.options.pedantic?(J.block=y9.pedantic,J.inline=o3.pedantic):this.options.gfm&&(J.block=y9.gfm,this.options.breaks?J.inline=o3.breaks:J.inline=o3.gfm),this.tokenizer.rules=J}static get rules(){return{block:y9,inline:o3}}static lex($,J){return new Z(J).lex($)}static lexInline($,J){return new Z(J).inlineTokens($)}lex($){$=$.replace(f0.carriageReturn,`
`),this.blockTokens($,this.tokens);for(let J=0;J<this.inlineQueue.length;J++){let X=this.inlineQueue[J];this.inlineTokens(X.src,X.tokens)}return this.inlineQueue=[],this.tokens}blockTokens($,J=[],X=!1){for(this.options.pedantic&&($=$.replace(f0.tabCharGlobal,"    ").replace(f0.spaceLine,""));$;){let Y;if(this.options.extensions?.block?.some((K)=>(Y=K.call({lexer:this},$,J))?($=$.substring(Y.raw.length),J.push(Y),!0):!1))continue;if(Y=this.tokenizer.space($)){$=$.substring(Y.raw.length);let K=J.at(-1);Y.raw.length===1&&K!==void 0?K.raw+=`
`:J.push(Y);continue}if(Y=this.tokenizer.code($)){$=$.substring(Y.raw.length);let K=J.at(-1);K?.type==="paragraph"||K?.type==="text"?(K.raw+=(K.raw.endsWith(`
`)?"":`
`)+Y.raw,K.text+=`
`+Y.text,this.inlineQueue.at(-1).src=K.text):J.push(Y);continue}if(Y=this.tokenizer.fences($)){$=$.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.heading($)){$=$.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.hr($)){$=$.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.blockquote($)){$=$.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.list($)){$=$.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.html($)){$=$.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.def($)){$=$.substring(Y.raw.length);let K=J.at(-1);K?.type==="paragraph"||K?.type==="text"?(K.raw+=(K.raw.endsWith(`
`)?"":`
`)+Y.raw,K.text+=`
`+Y.raw,this.inlineQueue.at(-1).src=K.text):this.tokens.links[Y.tag]||(this.tokens.links[Y.tag]={href:Y.href,title:Y.title},J.push(Y));continue}if(Y=this.tokenizer.table($)){$=$.substring(Y.raw.length),J.push(Y);continue}if(Y=this.tokenizer.lheading($)){$=$.substring(Y.raw.length),J.push(Y);continue}let Q=$;if(this.options.extensions?.startBlock){let K=1/0,U=$.slice(1),q;this.options.extensions.startBlock.forEach((G)=>{q=G.call({lexer:this},U),typeof q=="number"&&q>=0&&(K=Math.min(K,q))}),K<1/0&&K>=0&&(Q=$.substring(0,K+1))}if(this.state.top&&(Y=this.tokenizer.paragraph(Q))){let K=J.at(-1);X&&K?.type==="paragraph"?(K.raw+=(K.raw.endsWith(`
`)?"":`
`)+Y.raw,K.text+=`
`+Y.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=K.text):J.push(Y),X=Q.length!==$.length,$=$.substring(Y.raw.length);continue}if(Y=this.tokenizer.text($)){$=$.substring(Y.raw.length);let K=J.at(-1);K?.type==="text"?(K.raw+=(K.raw.endsWith(`
`)?"":`
`)+Y.raw,K.text+=`
`+Y.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=K.text):J.push(Y);continue}if($){let K="Infinite loop on byte: "+$.charCodeAt(0);if(this.options.silent){console.error(K);break}else throw Error(K)}}return this.state.top=!0,J}inline($,J=[]){return this.inlineQueue.push({src:$,tokens:J}),J}inlineTokens($,J=[]){let X=$,Y=null;if(this.tokens.links){let q=Object.keys(this.tokens.links);if(q.length>0)for(;(Y=this.tokenizer.rules.inline.reflinkSearch.exec(X))!=null;)q.includes(Y[0].slice(Y[0].lastIndexOf("[")+1,-1))&&(X=X.slice(0,Y.index)+"["+"a".repeat(Y[0].length-2)+"]"+X.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Y=this.tokenizer.rules.inline.anyPunctuation.exec(X))!=null;)X=X.slice(0,Y.index)+"++"+X.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let Q;for(;(Y=this.tokenizer.rules.inline.blockSkip.exec(X))!=null;)Q=Y[2]?Y[2].length:0,X=X.slice(0,Y.index+Q)+"["+"a".repeat(Y[0].length-Q-2)+"]"+X.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);X=this.options.hooks?.emStrongMask?.call({lexer:this},X)??X;let K=!1,U="";for(;$;){K||(U=""),K=!1;let q;if(this.options.extensions?.inline?.some((W)=>(q=W.call({lexer:this},$,J))?($=$.substring(q.raw.length),J.push(q),!0):!1))continue;if(q=this.tokenizer.escape($)){$=$.substring(q.raw.length),J.push(q);continue}if(q=this.tokenizer.tag($)){$=$.substring(q.raw.length),J.push(q);continue}if(q=this.tokenizer.link($)){$=$.substring(q.raw.length),J.push(q);continue}if(q=this.tokenizer.reflink($,this.tokens.links)){$=$.substring(q.raw.length);let W=J.at(-1);q.type==="text"&&W?.type==="text"?(W.raw+=q.raw,W.text+=q.text):J.push(q);continue}if(q=this.tokenizer.emStrong($,X,U)){$=$.substring(q.raw.length),J.push(q);continue}if(q=this.tokenizer.codespan($)){$=$.substring(q.raw.length),J.push(q);continue}if(q=this.tokenizer.br($)){$=$.substring(q.raw.length),J.push(q);continue}if(q=this.tokenizer.del($)){$=$.substring(q.raw.length),J.push(q);continue}if(q=this.tokenizer.autolink($)){$=$.substring(q.raw.length),J.push(q);continue}if(!this.state.inLink&&(q=this.tokenizer.url($))){$=$.substring(q.raw.length),J.push(q);continue}let G=$;if(this.options.extensions?.startInline){let W=1/0,j=$.slice(1),z;this.options.extensions.startInline.forEach((_)=>{z=_.call({lexer:this},j),typeof z=="number"&&z>=0&&(W=Math.min(W,z))}),W<1/0&&W>=0&&(G=$.substring(0,W+1))}if(q=this.tokenizer.inlineText(G)){$=$.substring(q.raw.length),q.raw.slice(-1)!=="_"&&(U=q.raw.slice(-1)),K=!0;let W=J.at(-1);W?.type==="text"?(W.raw+=q.raw,W.text+=q.text):J.push(q);continue}if($){let W="Infinite loop on byte: "+$.charCodeAt(0);if(this.options.silent){console.error(W);break}else throw Error(W)}}return J}},S9=class{options;parser;constructor(Z){this.options=Z||B2}space(Z){return""}code({text:Z,lang:$,escaped:J}){let X=($||"").match(f0.notSpaceStart)?.[0],Y=Z.replace(f0.endingNewline,"")+`
`;return X?'<pre><code class="language-'+f1(X)+'">'+(J?Y:f1(Y,!0))+`</code></pre>
`:"<pre><code>"+(J?Y:f1(Y,!0))+`</code></pre>
`}blockquote({tokens:Z}){return`<blockquote>
${this.parser.parse(Z)}</blockquote>
`}html({text:Z}){return Z}def(Z){return""}heading({tokens:Z,depth:$}){return`<h${$}>${this.parser.parseInline(Z)}</h${$}>
`}hr(Z){return`<hr>
`}list(Z){let{ordered:$,start:J}=Z,X="";for(let K=0;K<Z.items.length;K++){let U=Z.items[K];X+=this.listitem(U)}let Y=$?"ol":"ul",Q=$&&J!==1?' start="'+J+'"':"";return"<"+Y+Q+`>
`+X+"</"+Y+`>
`}listitem(Z){return`<li>${this.parser.parse(Z.tokens)}</li>
`}checkbox({checked:Z}){return"<input "+(Z?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:Z}){return`<p>${this.parser.parseInline(Z)}</p>
`}table(Z){let $="",J="";for(let Y=0;Y<Z.header.length;Y++)J+=this.tablecell(Z.header[Y]);$+=this.tablerow({text:J});let X="";for(let Y=0;Y<Z.rows.length;Y++){let Q=Z.rows[Y];J="";for(let K=0;K<Q.length;K++)J+=this.tablecell(Q[K]);X+=this.tablerow({text:J})}return X&&(X=`<tbody>${X}</tbody>`),`<table>
<thead>
`+$+`</thead>
`+X+`</table>
`}tablerow({text:Z}){return`<tr>
${Z}</tr>
`}tablecell(Z){let $=this.parser.parseInline(Z.tokens),J=Z.header?"th":"td";return(Z.align?`<${J} align="${Z.align}">`:`<${J}>`)+$+`</${J}>
`}strong({tokens:Z}){return`<strong>${this.parser.parseInline(Z)}</strong>`}em({tokens:Z}){return`<em>${this.parser.parseInline(Z)}</em>`}codespan({text:Z}){return`<code>${f1(Z,!0)}</code>`}br(Z){return"<br>"}del({tokens:Z}){return`<del>${this.parser.parseInline(Z)}</del>`}link({href:Z,title:$,tokens:J}){let X=this.parser.parseInline(J),Y=kY(Z);if(Y===null)return X;Z=Y;let Q='<a href="'+Z+'"';return $&&(Q+=' title="'+f1($)+'"'),Q+=">"+X+"</a>",Q}image({href:Z,title:$,text:J,tokens:X}){X&&(J=this.parser.parseInline(X,this.parser.textRenderer));let Y=kY(Z);if(Y===null)return f1(J);Z=Y;let Q=`<img src="${Z}" alt="${J}"`;return $&&(Q+=` title="${f1($)}"`),Q+=">",Q}text(Z){return"tokens"in Z&&Z.tokens?this.parser.parseInline(Z.tokens):("escaped"in Z)&&Z.escaped?Z.text:f1(Z.text)}},B4=class{strong({text:Z}){return Z}em({text:Z}){return Z}codespan({text:Z}){return Z}del({text:Z}){return Z}html({text:Z}){return Z}text({text:Z}){return Z}link({text:Z}){return""+Z}image({text:Z}){return""+Z}br(){return""}checkbox({raw:Z}){return Z}},P1=class Z{options;renderer;textRenderer;constructor($){this.options=$||B2,this.options.renderer=this.options.renderer||new S9,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new B4}static parse($,J){return new Z(J).parse($)}static parseInline($,J){return new Z(J).parseInline($)}parse($){let J="";for(let X=0;X<$.length;X++){let Y=$[X];if(this.options.extensions?.renderers?.[Y.type]){let K=Y,U=this.options.extensions.renderers[K.type].call({parser:this},K);if(U!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(K.type)){J+=U||"";continue}}let Q=Y;switch(Q.type){case"space":{J+=this.renderer.space(Q);break}case"hr":{J+=this.renderer.hr(Q);break}case"heading":{J+=this.renderer.heading(Q);break}case"code":{J+=this.renderer.code(Q);break}case"table":{J+=this.renderer.table(Q);break}case"blockquote":{J+=this.renderer.blockquote(Q);break}case"list":{J+=this.renderer.list(Q);break}case"checkbox":{J+=this.renderer.checkbox(Q);break}case"html":{J+=this.renderer.html(Q);break}case"def":{J+=this.renderer.def(Q);break}case"paragraph":{J+=this.renderer.paragraph(Q);break}case"text":{J+=this.renderer.text(Q);break}default:{let K='Token with "'+Q.type+'" type was not found.';if(this.options.silent)return console.error(K),"";throw Error(K)}}}return J}parseInline($,J=this.renderer){let X="";for(let Y=0;Y<$.length;Y++){let Q=$[Y];if(this.options.extensions?.renderers?.[Q.type]){let U=this.options.extensions.renderers[Q.type].call({parser:this},Q);if(U!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Q.type)){X+=U||"";continue}}let K=Q;switch(K.type){case"escape":{X+=J.text(K);break}case"html":{X+=J.html(K);break}case"link":{X+=J.link(K);break}case"image":{X+=J.image(K);break}case"checkbox":{X+=J.checkbox(K);break}case"strong":{X+=J.strong(K);break}case"em":{X+=J.em(K);break}case"codespan":{X+=J.codespan(K);break}case"br":{X+=J.br(K);break}case"del":{X+=J.del(K);break}case"text":{X+=J.text(K);break}default:{let U='Token with "'+K.type+'" type was not found.';if(this.options.silent)return console.error(U),"";throw Error(U)}}}return X}},e3=class{options;block;constructor(Z){this.options=Z||B2}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(Z){return Z}postprocess(Z){return Z}processAllTokens(Z){return Z}emStrongMask(Z){return Z}provideLexer(){return this.block?E1.lex:E1.lexInline}provideParser(){return this.block?P1.parse:P1.parseInline}},$z=class{defaults=N4();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=P1;Renderer=S9;TextRenderer=B4;Lexer=E1;Tokenizer=k9;Hooks=e3;constructor(...Z){this.use(...Z)}walkTokens(Z,$){let J=[];for(let X of Z)switch(J=J.concat($.call(this,X)),X.type){case"table":{let Y=X;for(let Q of Y.header)J=J.concat(this.walkTokens(Q.tokens,$));for(let Q of Y.rows)for(let K of Q)J=J.concat(this.walkTokens(K.tokens,$));break}case"list":{let Y=X;J=J.concat(this.walkTokens(Y.items,$));break}default:{let Y=X;this.defaults.extensions?.childTokens?.[Y.type]?this.defaults.extensions.childTokens[Y.type].forEach((Q)=>{let K=Y[Q].flat(1/0);J=J.concat(this.walkTokens(K,$))}):Y.tokens&&(J=J.concat(this.walkTokens(Y.tokens,$)))}}return J}use(...Z){let $=this.defaults.extensions||{renderers:{},childTokens:{}};return Z.forEach((J)=>{let X={...J};if(X.async=this.defaults.async||X.async||!1,J.extensions&&(J.extensions.forEach((Y)=>{if(!Y.name)throw Error("extension name required");if("renderer"in Y){let Q=$.renderers[Y.name];Q?$.renderers[Y.name]=function(...K){let U=Y.renderer.apply(this,K);return U===!1&&(U=Q.apply(this,K)),U}:$.renderers[Y.name]=Y.renderer}if("tokenizer"in Y){if(!Y.level||Y.level!=="block"&&Y.level!=="inline")throw Error("extension level must be 'block' or 'inline'");let Q=$[Y.level];Q?Q.unshift(Y.tokenizer):$[Y.level]=[Y.tokenizer],Y.start&&(Y.level==="block"?$.startBlock?$.startBlock.push(Y.start):$.startBlock=[Y.start]:Y.level==="inline"&&($.startInline?$.startInline.push(Y.start):$.startInline=[Y.start]))}"childTokens"in Y&&Y.childTokens&&($.childTokens[Y.name]=Y.childTokens)}),X.extensions=$),J.renderer){let Y=this.defaults.renderer||new S9(this.defaults);for(let Q in J.renderer){if(!(Q in Y))throw Error(`renderer '${Q}' does not exist`);if(["options","parser"].includes(Q))continue;let K=Q,U=J.renderer[K],q=Y[K];Y[K]=(...G)=>{let W=U.apply(Y,G);return W===!1&&(W=q.apply(Y,G)),W||""}}X.renderer=Y}if(J.tokenizer){let Y=this.defaults.tokenizer||new k9(this.defaults);for(let Q in J.tokenizer){if(!(Q in Y))throw Error(`tokenizer '${Q}' does not exist`);if(["options","rules","lexer"].includes(Q))continue;let K=Q,U=J.tokenizer[K],q=Y[K];Y[K]=(...G)=>{let W=U.apply(Y,G);return W===!1&&(W=q.apply(Y,G)),W}}X.tokenizer=Y}if(J.hooks){let Y=this.defaults.hooks||new e3;for(let Q in J.hooks){if(!(Q in Y))throw Error(`hook '${Q}' does not exist`);if(["options","block"].includes(Q))continue;let K=Q,U=J.hooks[K],q=Y[K];e3.passThroughHooks.has(Q)?Y[K]=(G)=>{if(this.defaults.async&&e3.passThroughHooksRespectAsync.has(Q))return(async()=>{let j=await U.call(Y,G);return q.call(Y,j)})();let W=U.call(Y,G);return q.call(Y,W)}:Y[K]=(...G)=>{if(this.defaults.async)return(async()=>{let j=await U.apply(Y,G);return j===!1&&(j=await q.apply(Y,G)),j})();let W=U.apply(Y,G);return W===!1&&(W=q.apply(Y,G)),W}}X.hooks=Y}if(J.walkTokens){let Y=this.defaults.walkTokens,Q=J.walkTokens;X.walkTokens=function(K){let U=[];return U.push(Q.call(this,K)),Y&&(U=U.concat(Y.call(this,K))),U}}this.defaults={...this.defaults,...X}}),this}setOptions(Z){return this.defaults={...this.defaults,...Z},this}lexer(Z,$){return E1.lex(Z,$??this.defaults)}parser(Z,$){return P1.parse(Z,$??this.defaults)}parseMarkdown(Z){return($,J)=>{let X={...J},Y={...this.defaults,...X},Q=this.onError(!!Y.silent,!!Y.async);if(this.defaults.async===!0&&X.async===!1)return Q(Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof $>"u"||$===null)return Q(Error("marked(): input parameter is undefined or null"));if(typeof $!="string")return Q(Error("marked(): input parameter is of type "+Object.prototype.toString.call($)+", string expected"));if(Y.hooks&&(Y.hooks.options=Y,Y.hooks.block=Z),Y.async)return(async()=>{let K=Y.hooks?await Y.hooks.preprocess($):$,U=await(Y.hooks?await Y.hooks.provideLexer():Z?E1.lex:E1.lexInline)(K,Y),q=Y.hooks?await Y.hooks.processAllTokens(U):U;Y.walkTokens&&await Promise.all(this.walkTokens(q,Y.walkTokens));let G=await(Y.hooks?await Y.hooks.provideParser():Z?P1.parse:P1.parseInline)(q,Y);return Y.hooks?await Y.hooks.postprocess(G):G})().catch(Q);try{Y.hooks&&($=Y.hooks.preprocess($));let K=(Y.hooks?Y.hooks.provideLexer():Z?E1.lex:E1.lexInline)($,Y);Y.hooks&&(K=Y.hooks.processAllTokens(K)),Y.walkTokens&&this.walkTokens(K,Y.walkTokens);let U=(Y.hooks?Y.hooks.provideParser():Z?P1.parse:P1.parseInline)(K,Y);return Y.hooks&&(U=Y.hooks.postprocess(U)),U}catch(K){return Q(K)}}}onError(Z,$){return(J)=>{if(J.message+=`
Please report this to https://github.com/markedjs/marked.`,Z){let X="<p>An error occurred:</p><pre>"+f1(J.message+"",!0)+"</pre>";return $?Promise.resolve(X):X}if($)return Promise.reject(J);throw J}}},L2=new $z;function X0(Z,$){return L2.parse(Z,$)}X0.options=X0.setOptions=function(Z){return L2.setOptions(Z),X0.defaults=L2.defaults,wY(X0.defaults),X0};X0.getDefaults=N4;X0.defaults=B2;X0.use=function(...Z){return L2.use(...Z),X0.defaults=L2.defaults,wY(X0.defaults),X0};X0.walkTokens=function(Z,$){return L2.walkTokens(Z,$)};X0.parseInline=L2.parseInline;X0.Parser=P1;X0.parser=P1.parse;X0.Renderer=S9;X0.TextRenderer=B4;X0.Lexer=E1;X0.lexer=E1.lex;X0.Tokenizer=k9;X0.Hooks=e3;X0.parse=X0;var{options:SO,setOptions:xO,use:wO,walkTokens:hO,parseInline:vO}=X0;var uO=P1.parse,mO=E1.lex;var E4={};(function Z($,J,X,Y){var Q=!!($.Worker&&$.Blob&&$.Promise&&$.OffscreenCanvas&&$.OffscreenCanvasRenderingContext2D&&$.HTMLCanvasElement&&$.HTMLCanvasElement.prototype.transferControlToOffscreen&&$.URL&&$.URL.createObjectURL),K=typeof Path2D==="function"&&typeof DOMMatrix==="function",U=function(){if(!$.OffscreenCanvas)return!1;try{var R=new OffscreenCanvas(1,1),H=R.getContext("2d");H.fillRect(0,0,1,1);var h=R.transferToImageBitmap();H.createPattern(h,"no-repeat")}catch(u){return!1}return!0}();function q(){}function G(R){var H=J.exports.Promise,h=H!==void 0?H:$.Promise;if(typeof h==="function")return new h(R);return R(q,q),null}var W=function(R,H){return{transform:function(h){if(R)return h;if(H.has(h))return H.get(h);var u=new OffscreenCanvas(h.width,h.height),l=u.getContext("2d");return l.drawImage(h,0,0),H.set(h,u),u},clear:function(){H.clear()}}}(U,new Map),j=function(){var R=Math.floor(16.666666666666668),H,h,u={},l=0;if(typeof requestAnimationFrame==="function"&&typeof cancelAnimationFrame==="function")H=function(c){var s=Math.random();return u[s]=requestAnimationFrame(function f(t){if(l===t||l+R-1<t)l=t,delete u[s],c();else u[s]=requestAnimationFrame(f)}),s},h=function(c){if(u[c])cancelAnimationFrame(u[c])};else H=function(c){return setTimeout(c,R)},h=function(c){return clearTimeout(c)};return{frame:H,cancel:h}}(),z=function(){var R,H,h={};function u(l){function c(s,f){l.postMessage({options:s||{},callback:f})}l.init=function(f){var t=f.transferControlToOffscreen();l.postMessage({canvas:t},[t])},l.fire=function(f,t,U0){if(H)return c(f,null),H;var O0=Math.random().toString(36).slice(2);return H=G(function(G0){function V0(C0){if(C0.data.callback!==O0)return;delete h[O0],l.removeEventListener("message",V0),H=null,W.clear(),U0(),G0()}l.addEventListener("message",V0),c(f,O0),h[O0]=V0.bind(null,{data:{callback:O0}})}),H},l.reset=function(){l.postMessage({reset:!0});for(var f in h)h[f](),delete h[f]}}return function(){if(R)return R;if(!X&&Q){var l=["var CONFETTI, SIZE = {}, module = {};","("+Z.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{R=new Worker(URL.createObjectURL(new Blob([l])))}catch(c){return typeof console<"u"&&typeof console.warn==="function"&&console.warn("\uD83C\uDF8A Could not load worker",c),null}u(R)}return R}}(),_={particleCount:50,angle:90,spread:45,startVelocity:45,decay:0.9,gravity:1,drift:0,ticks:200,x:0.5,y:0.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function V(R,H){return H?H(R):R}function O(R){return!(R===null||R===void 0)}function N(R,H,h){return V(R&&O(R[H])?R[H]:_[H],h)}function F(R){return R<0?0:Math.floor(R)}function D(R,H){return Math.floor(Math.random()*(H-R))+R}function A(R){return parseInt(R,16)}function L(R){return R.map(B)}function B(R){var H=String(R).replace(/[^0-9a-f]/gi,"");if(H.length<6)H=H[0]+H[0]+H[1]+H[1]+H[2]+H[2];return{r:A(H.substring(0,2)),g:A(H.substring(2,4)),b:A(H.substring(4,6))}}function w(R){var H=N(R,"origin",Object);return H.x=N(H,"x",Number),H.y=N(H,"y",Number),H}function S(R){R.width=document.documentElement.clientWidth,R.height=document.documentElement.clientHeight}function d(R){var H=R.getBoundingClientRect();R.width=H.width,R.height=H.height}function r(R){var H=document.createElement("canvas");return H.style.position="fixed",H.style.top="0px",H.style.left="0px",H.style.pointerEvents="none",H.style.zIndex=R,H}function T(R,H,h,u,l,c,s,f,t){R.save(),R.translate(H,h),R.rotate(c),R.scale(u,l),R.arc(0,0,1,s,f,t),R.restore()}function P(R){var H=R.angle*(Math.PI/180),h=R.spread*(Math.PI/180);return{x:R.x,y:R.y,wobble:Math.random()*10,wobbleSpeed:Math.min(0.11,Math.random()*0.1+0.05),velocity:R.startVelocity*0.5+Math.random()*R.startVelocity,angle2D:-H+(0.5*h-Math.random()*h),tiltAngle:(Math.random()*0.5+0.25)*Math.PI,color:R.color,shape:R.shape,tick:0,totalTicks:R.ticks,decay:R.decay,drift:R.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:R.gravity*3,ovalScalar:0.6,scalar:R.scalar,flat:R.flat}}function E(R,H){if(H.x+=Math.cos(H.angle2D)*H.velocity+H.drift,H.y+=Math.sin(H.angle2D)*H.velocity+H.gravity,H.velocity*=H.decay,H.flat)H.wobble=0,H.wobbleX=H.x+10*H.scalar,H.wobbleY=H.y+10*H.scalar,H.tiltSin=0,H.tiltCos=0,H.random=1;else H.wobble+=H.wobbleSpeed,H.wobbleX=H.x+10*H.scalar*Math.cos(H.wobble),H.wobbleY=H.y+10*H.scalar*Math.sin(H.wobble),H.tiltAngle+=0.1,H.tiltSin=Math.sin(H.tiltAngle),H.tiltCos=Math.cos(H.tiltAngle),H.random=Math.random()+2;var h=H.tick++/H.totalTicks,u=H.x+H.random*H.tiltCos,l=H.y+H.random*H.tiltSin,c=H.wobbleX+H.random*H.tiltCos,s=H.wobbleY+H.random*H.tiltSin;if(R.fillStyle="rgba("+H.color.r+", "+H.color.g+", "+H.color.b+", "+(1-h)+")",R.beginPath(),K&&H.shape.type==="path"&&typeof H.shape.path==="string"&&Array.isArray(H.shape.matrix))R.fill(P0(H.shape.path,H.shape.matrix,H.x,H.y,Math.abs(c-u)*0.1,Math.abs(s-l)*0.1,Math.PI/10*H.wobble));else if(H.shape.type==="bitmap"){var f=Math.PI/10*H.wobble,t=Math.abs(c-u)*0.1,U0=Math.abs(s-l)*0.1,O0=H.shape.bitmap.width*H.scalar,G0=H.shape.bitmap.height*H.scalar,V0=new DOMMatrix([Math.cos(f)*t,Math.sin(f)*t,-Math.sin(f)*U0,Math.cos(f)*U0,H.x,H.y]);V0.multiplySelf(new DOMMatrix(H.shape.matrix));var C0=R.createPattern(W.transform(H.shape.bitmap),"no-repeat");C0.setTransform(V0),R.globalAlpha=1-h,R.fillStyle=C0,R.fillRect(H.x-O0/2,H.y-G0/2,O0,G0),R.globalAlpha=1}else if(H.shape==="circle")R.ellipse?R.ellipse(H.x,H.y,Math.abs(c-u)*H.ovalScalar,Math.abs(s-l)*H.ovalScalar,Math.PI/10*H.wobble,0,2*Math.PI):T(R,H.x,H.y,Math.abs(c-u)*H.ovalScalar,Math.abs(s-l)*H.ovalScalar,Math.PI/10*H.wobble,0,2*Math.PI);else if(H.shape==="star"){var Z0=Math.PI/2*3,p0=4*H.scalar,_1=8*H.scalar,O1=H.x,h1=H.y,U2=5,C1=Math.PI/U2;while(U2--)O1=H.x+Math.cos(Z0)*_1,h1=H.y+Math.sin(Z0)*_1,R.lineTo(O1,h1),Z0+=C1,O1=H.x+Math.cos(Z0)*p0,h1=H.y+Math.sin(Z0)*p0,R.lineTo(O1,h1),Z0+=C1}else R.moveTo(Math.floor(H.x),Math.floor(H.y)),R.lineTo(Math.floor(H.wobbleX),Math.floor(l)),R.lineTo(Math.floor(c),Math.floor(s)),R.lineTo(Math.floor(u),Math.floor(H.wobbleY));return R.closePath(),R.fill(),H.tick<H.totalTicks}function y(R,H,h,u,l){var c=H.slice(),s=R.getContext("2d"),f,t,U0=G(function(O0){function G0(){f=t=null,s.clearRect(0,0,u.width,u.height),W.clear(),l(),O0()}function V0(){if(X&&!(u.width===Y.width&&u.height===Y.height))u.width=R.width=Y.width,u.height=R.height=Y.height;if(!u.width&&!u.height)h(R),u.width=R.width,u.height=R.height;if(s.clearRect(0,0,u.width,u.height),c=c.filter(function(C0){return E(s,C0)}),c.length)f=j.frame(V0);else G0()}f=j.frame(V0),t=G0});return{addFettis:function(O0){return c=c.concat(O0),U0},canvas:R,promise:U0,reset:function(){if(f)j.cancel(f);if(t)t()}}}function g(R,H){var h=!R,u=!!N(H||{},"resize"),l=!1,c=N(H,"disableForReducedMotion",Boolean),s=Q&&!!N(H||{},"useWorker"),f=s?z():null,t=h?S:d,U0=R&&f?!!R.__confetti_initialized:!1,O0=typeof matchMedia==="function"&&matchMedia("(prefers-reduced-motion)").matches,G0;function V0(Z0,p0,_1){var O1=N(Z0,"particleCount",F),h1=N(Z0,"angle",Number),U2=N(Z0,"spread",Number),C1=N(Z0,"startVelocity",Number),WQ=N(Z0,"decay",Number),jQ=N(Z0,"gravity",Number),zQ=N(Z0,"drift",Number),k4=N(Z0,"colors",L),_Q=N(Z0,"ticks",Number),S4=N(Z0,"shapes"),OQ=N(Z0,"scalar"),VQ=!!N(Z0,"flat"),x4=w(Z0),w4=O1,r9=[],HQ=R.width*x4.x,NQ=R.height*x4.y;while(w4--)r9.push(P({x:HQ,y:NQ,angle:h1,spread:U2,startVelocity:C1,color:k4[w4%k4.length],shape:S4[D(0,S4.length)],ticks:_Q,decay:WQ,gravity:jQ,drift:zQ,scalar:OQ,flat:VQ}));if(G0)return G0.addFettis(r9);return G0=y(R,r9,t,p0,_1),G0.promise}function C0(Z0){var p0=c||N(Z0,"disableForReducedMotion",Boolean),_1=N(Z0,"zIndex",Number);if(p0&&O0)return G(function(C1){C1()});if(h&&G0)R=G0.canvas;else if(h&&!R)R=r(_1),document.body.appendChild(R);if(u&&!U0)t(R);var O1={width:R.width,height:R.height};if(f&&!U0)f.init(R);if(U0=!0,f)R.__confetti_initialized=!0;function h1(){if(f){var C1={getBoundingClientRect:function(){if(!h)return R.getBoundingClientRect()}};t(C1),f.postMessage({resize:{width:C1.width,height:C1.height}});return}O1.width=O1.height=null}function U2(){if(G0=null,u)l=!1,$.removeEventListener("resize",h1);if(h&&R){if(document.body.contains(R))document.body.removeChild(R);R=null,U0=!1}}if(u&&!l)l=!0,$.addEventListener("resize",h1,!1);if(f)return f.fire(Z0,O1,U2);return V0(Z0,O1,U2)}return C0.reset=function(){if(f)f.reset();if(G0)G0.reset()},C0}var o;function F0(){if(!o)o=g(null,{useWorker:!0,resize:!0});return o}function P0(R,H,h,u,l,c,s){var f=new Path2D(R),t=new Path2D;t.addPath(f,new DOMMatrix(H));var U0=new Path2D;return U0.addPath(t,new DOMMatrix([Math.cos(s)*l,Math.sin(s)*l,-Math.sin(s)*c,Math.cos(s)*c,h,u])),U0}function $1(R){if(!K)throw Error("path confetti are not supported in this browser");var H,h;if(typeof R==="string")H=R;else H=R.path,h=R.matrix;var u=new Path2D(H),l=document.createElement("canvas"),c=l.getContext("2d");if(!h){var s=1000,f=s,t=s,U0=0,O0=0,G0,V0;for(var C0=0;C0<s;C0+=2)for(var Z0=0;Z0<s;Z0+=2)if(c.isPointInPath(u,C0,Z0,"nonzero"))f=Math.min(f,C0),t=Math.min(t,Z0),U0=Math.max(U0,C0),O0=Math.max(O0,Z0);G0=U0-f,V0=O0-t;var p0=10,_1=Math.min(p0/G0,p0/V0);h=[_1,0,0,_1,-Math.round(G0/2+f)*_1,-Math.round(V0/2+t)*_1]}return{type:"path",path:H,matrix:h}}function L0(R){var H,h=1,u="#000000",l='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';if(typeof R==="string")H=R;else H=R.text,h="scalar"in R?R.scalar:h,l="fontFamily"in R?R.fontFamily:l,u="color"in R?R.color:u;var c=10*h,s=""+c+"px "+l,f=new OffscreenCanvas(c,c),t=f.getContext("2d");t.font=s;var U0=t.measureText(H),O0=Math.ceil(U0.actualBoundingBoxRight+U0.actualBoundingBoxLeft),G0=Math.ceil(U0.actualBoundingBoxAscent+U0.actualBoundingBoxDescent),V0=2,C0=U0.actualBoundingBoxLeft+V0,Z0=U0.actualBoundingBoxAscent+V0;O0+=V0+V0,G0+=V0+V0,f=new OffscreenCanvas(O0,G0),t=f.getContext("2d"),t.font=s,t.fillStyle=u,t.fillText(H,C0,Z0);var p0=1/h;return{type:"bitmap",bitmap:f.transferToImageBitmap(),matrix:[p0,0,0,p0,-O0*p0/2,-G0*p0/2]}}J.exports=function(){return F0().apply(this,arguments)},J.exports.reset=function(){F0().reset()},J.exports.create=g,J.exports.shapeFromPath=$1,J.exports.shapeFromText=L0})(function(){if(typeof window<"u")return window;if(typeof self<"u")return self;return this||{}}(),E4,!1);var sY=E4.exports,sO=E4.exports.create;function T4(Z,$,J,X,Y,Q){this.indented=Z,this.column=$,this.type=J,this.info=X,this.align=Y,this.prev=Q}function h9(Z,$,J,X){var Y=Z.indented;if(Z.context&&Z.context.type=="statement"&&J!="statement")Y=Z.context.indented;return Z.context=new T4(Y,$,J,X,null,Z.context)}function J6(Z){var $=Z.context.type;if($==")"||$=="]"||$=="}")Z.indented=Z.context.indented;return Z.context=Z.context.prev}function nY(Z,$,J){if($.prevToken=="variable"||$.prevToken=="type")return!0;if(/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(Z.string.slice(0,J)))return!0;if($.typeAtEndOfLine&&Z.column()==Z.indentation())return!0}function P4(Z){for(;;){if(!Z||Z.type=="top")return!0;if(Z.type=="}"&&Z.prev.info!="namespace")return!1;Z=Z.prev}}function Z1(Z){var{statementIndentUnit:$,dontAlignCalls:J}=Z,X=Z.keywords||{},Y=Z.types||{},Q=Z.builtin||{},K=Z.blockKeywords||{},U=Z.defKeywords||{},q=Z.atoms||{},G=Z.hooks||{},W=Z.multiLineStrings,j=Z.indentStatements!==!1,z=Z.indentSwitch!==!1,_=Z.namespaceSeparator,V=Z.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,O=Z.numberStart||/[\d\.]/,N=Z.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,F=Z.isOperatorChar||/[+\-*&%=<>!?|\/]/,D=Z.isIdentifierChar||/[\w\$_\xa1-\uffff]/,A=Z.isReservedIdentifier||!1,L,B;function w(T,P){var E=T.next();if(G[E]){var y=G[E](T,P);if(y!==!1)return y}if(E=='"'||E=="'")return P.tokenize=S(E),P.tokenize(T,P);if(O.test(E)){if(T.backUp(1),T.match(N))return"number";T.next()}if(V.test(E))return L=E,null;if(E=="/"){if(T.eat("*"))return P.tokenize=d,d(T,P);if(T.eat("/"))return T.skipToEnd(),"comment"}if(F.test(E)){while(!T.match(/^\/[\/*]/,!1)&&T.eat(F));return"operator"}if(T.eatWhile(D),_)while(T.match(_))T.eatWhile(D);var g=T.current();if(p1(X,g)){if(p1(K,g))L="newstatement";if(p1(U,g))B=!0;return"keyword"}if(p1(Y,g))return"type";if(p1(Q,g)||A&&A(g)){if(p1(K,g))L="newstatement";return"builtin"}if(p1(q,g))return"atom";return"variable"}function S(T){return function(P,E){var y=!1,g,o=!1;while((g=P.next())!=null){if(g==T&&!y){o=!0;break}y=!y&&g=="\\"}if(o||!(y||W))E.tokenize=null;return"string"}}function d(T,P){var E=!1,y;while(y=T.next()){if(y=="/"&&E){P.tokenize=null;break}E=y=="*"}return"comment"}function r(T,P){if(Z.typeFirstDefinitions&&T.eol()&&P4(P.context))P.typeAtEndOfLine=nY(T,P,T.pos)}return{name:Z.name,startState:function(T){return{tokenize:null,context:new T4(-T,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(T,P){var E=P.context;if(T.sol()){if(E.align==null)E.align=!1;P.indented=T.indentation(),P.startOfLine=!0}if(T.eatSpace())return r(T,P),null;L=B=null;var y=(P.tokenize||w)(T,P);if(y=="comment"||y=="meta")return y;if(E.align==null)E.align=!0;if(L==";"||L==":"||L==","&&T.match(/^\s*(?:\/\/.*)?$/,!1))while(P.context.type=="statement")J6(P);else if(L=="{")h9(P,T.column(),"}");else if(L=="[")h9(P,T.column(),"]");else if(L=="(")h9(P,T.column(),")");else if(L=="}"){while(E.type=="statement")E=J6(P);if(E.type=="}")E=J6(P);while(E.type=="statement")E=J6(P)}else if(L==E.type)J6(P);else if(j&&((E.type=="}"||E.type=="top")&&L!=";"||E.type=="statement"&&L=="newstatement"))h9(P,T.column(),"statement",T.current());if(y=="variable"&&(P.prevToken=="def"||Z.typeFirstDefinitions&&nY(T,P,T.start)&&P4(P.context)&&T.match(/^\s*\(/,!1)))y="def";if(G.token){var g=G.token(T,P,y);if(g!==void 0)y=g}if(y=="def"&&Z.styleDefs===!1)y="variable";return P.startOfLine=!1,P.prevToken=B?"def":y||L,r(T,P),y},indent:function(T,P,E){if(T.tokenize!=w&&T.tokenize!=null||T.typeAtEndOfLine&&P4(T.context))return null;var y=T.context,g=P&&P.charAt(0),o=g==y.type;if(y.type=="statement"&&g=="}")y=y.prev;if(Z.dontIndentStatements)while(y.type=="statement"&&Z.dontIndentStatements.test(y.info))y=y.prev;if(G.indent){var F0=G.indent(T,y,P,E.unit);if(typeof F0=="number")return F0}var P0=y.prev&&y.prev.info=="switch";if(Z.allmanIndentation&&/[{(]/.test(g)){while(y.type!="top"&&y.type!="}")y=y.prev;return y.indented}if(y.type=="statement")return y.indented+(g=="{"?0:$||E.unit);if(y.align&&(!J||y.type!=")"))return y.column+(o?0:1);if(y.type==")"&&!o)return y.indented+($||E.unit);return y.indented+(o?0:E.unit)+(!o&&P0&&!/^(?:case|default)\b/.test(P)?E.unit:0)},languageData:{indentOnInput:z?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}},autocomplete:Object.keys(X).concat(Object.keys(Y)).concat(Object.keys(Q)).concat(Object.keys(q)),...Z.languageData}}}function v(Z){var $={},J=Z.split(" ");for(var X=0;X<J.length;++X)$[J[X]]=!0;return $}function p1(Z,$){if(typeof Z==="function")return Z($);else return Z.propertyIsEnumerable($)}var Y6="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile inline restrict asm fortran",aY="alignas alignof and and_eq audit axiom bitand bitor catch class compl concept constexpr const_cast decltype delete dynamic_cast explicit export final friend import module mutable namespace new noexcept not not_eq operator or or_eq override private protected public reinterpret_cast requires static_assert static_cast template this thread_local throw try typeid typename using virtual xor xor_eq",oY="bycopy byref in inout oneway out self super atomic nonatomic retain copy readwrite readonly strong weak assign typeof nullable nonnull null_resettable _cmd @interface @implementation @end @protocol @encode @property @synthesize @dynamic @class @public @package @private @protected @required @optional @try @catch @finally @import @selector @encode @defs @synchronized @autoreleasepool @compatibility_alias @available",tY="FOUNDATION_EXPORT FOUNDATION_EXTERN NS_INLINE NS_FORMAT_FUNCTION  NS_RETURNS_RETAINEDNS_ERROR_ENUM NS_RETURNS_NOT_RETAINED NS_RETURNS_INNER_POINTER NS_DESIGNATED_INITIALIZER NS_ENUM NS_OPTIONS NS_REQUIRES_NIL_TERMINATION NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_SWIFT_NAME NS_REFINED_FOR_SWIFT",Jz=v("int long char short double float unsigned signed void bool"),Xz=v("SEL instancetype id Class Protocol BOOL");function Q6(Z){return p1(Jz,Z)||/.+_t$/.test(Z)}function eY(Z){return Q6(Z)||p1(Xz,Z)}var K6="case do else for if switch while struct enum union",u9="struct enum union";function Q2(Z,$){if(!$.startOfLine)return!1;for(var J,X=null;J=Z.peek();){if(J=="\\"&&Z.match(/^.$/)){X=Q2;break}else if(J=="/"&&Z.match(/^\/[\/\*]/,!1))break;Z.next()}return $.tokenize=X,"meta"}function m9(Z,$){if($.prevToken=="type")return"type";return!1}function g9(Z){if(!Z||Z.length<2)return!1;if(Z[0]!="_")return!1;return Z[1]=="_"||Z[1]!==Z[1].toLowerCase()}function A0(Z){return Z.eatWhile(/[\w\.']/),"number"}function Y2(Z,$){if(Z.backUp(1),Z.match(/^(?:R|u8R|uR|UR|LR)/)){var J=Z.match(/^"([^\s\\()]{0,16})\(/);if(!J)return!1;return $.cpp11RawStringDelim=J[1],$.tokenize=rY,rY(Z,$)}if(Z.match(/^(?:u8|u|U|L)/)){if(Z.match(/^["']/,!1))return"string";return!1}return Z.next(),!1}function ZQ(Z){var $=/(\w+)::~?(\w+)$/.exec(Z);return $&&$[1]==$[2]}function iY(Z,$){var J;while((J=Z.next())!=null)if(J=='"'&&!Z.eat('"')){$.tokenize=null;break}return"string"}function rY(Z,$){var J=$.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),X=Z.match(new RegExp(".*?\\)"+J+'"'));if(X)$.tokenize=null;else Z.skipToEnd();return"string"}var $Q=Z1({name:"c",keywords:v(Y6),types:Q6,blockKeywords:v(K6),defKeywords:v(u9),typeFirstDefinitions:!0,atoms:v("NULL true false"),isReservedIdentifier:g9,hooks:{"#":Q2,"*":m9}}),iO=Z1({name:"cpp",keywords:v(Y6+" "+aY),types:Q6,blockKeywords:v(K6+" class try catch"),defKeywords:v(u9+" class namespace"),typeFirstDefinitions:!0,atoms:v("true false NULL nullptr"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,isReservedIdentifier:g9,hooks:{"#":Q2,"*":m9,u:Y2,U:Y2,L:Y2,R:Y2,"0":A0,"1":A0,"2":A0,"3":A0,"4":A0,"5":A0,"6":A0,"7":A0,"8":A0,"9":A0,token:function(Z,$,J){if(J=="variable"&&Z.peek()=="("&&($.prevToken==";"||$.prevToken==null||$.prevToken=="}")&&ZQ(Z.current()))return"def"}},namespaceSeparator:"::"}),rO=Z1({name:"java",keywords:v("abstract assert break case catch class const continue default do else enum extends final finally for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:v("var byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:v("catch class do else finally for if switch try while"),defKeywords:v("class interface enum @interface"),typeFirstDefinitions:!0,atoms:v("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(Z){if(Z.match("interface",!1))return!1;return Z.eatWhile(/[\w\$_]/),"meta"},'"':function(Z,$){if(!Z.match(/""$/))return!1;return $.tokenize=JQ,$.tokenize(Z,$)}}}),aO=Z1({name:"csharp",keywords:v("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in init interface internal is lock namespace new operator out override params private protected public readonly record ref required return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:v("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:v("catch class do else finally for foreach if struct switch try while"),defKeywords:v("class interface namespace record struct var"),typeFirstDefinitions:!0,atoms:v("true false null"),hooks:{"@":function(Z,$){if(Z.eat('"'))return $.tokenize=iY,iY(Z,$);return Z.eatWhile(/[\w\$_]/),"meta"}}});function JQ(Z,$){var J=!1;while(!Z.eol()){if(!J&&Z.match('"""')){$.tokenize=null;break}J=Z.next()=="\\"&&!J}return"string"}function X6(Z){return function($,J){var X;while(X=$.next())if(X=="*"&&$.eat("/"))if(Z==1){J.tokenize=null;break}else return J.tokenize=X6(Z-1),J.tokenize($,J);else if(X=="/"&&$.eat("*"))return J.tokenize=X6(Z+1),J.tokenize($,J);return"comment"}}var oO=Z1({name:"scala",keywords:v("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:v("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:v("catch class enum do else finally for forSome if match switch try while"),defKeywords:v("class enum def object package trait type val var"),atoms:v("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(Z){return Z.eatWhile(/[\w\$_]/),"meta"},'"':function(Z,$){if(!Z.match('""'))return!1;return $.tokenize=JQ,$.tokenize(Z,$)},"'":function(Z){if(Z.match(/^(\\[^'\s]+|[^\\'])'/))return"character";return Z.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(Z,$){var J=$.context;if(J.type=="}"&&J.align&&Z.eat(">"))return $.context=new T4(J.indented,J.column,J.type,J.info,null,J.prev),"operator";else return!1},"/":function(Z,$){if(!Z.eat("*"))return!1;return $.tokenize=X6(1),$.tokenize(Z,$)}},languageData:{closeBrackets:{brackets:["(","[","{","'",'"','"""']}}});function Yz(Z){return function($,J){var X=!1,Y,Q=!1;while(!$.eol()){if(!Z&&!X&&$.match('"')){Q=!0;break}if(Z&&$.match('"""')){Q=!0;break}if(Y=$.next(),!X&&Y=="$"&&$.match("{"))$.skipTo("}");X=!X&&Y=="\\"&&!Z}if(Q||!Z)J.tokenize=null;return"string"}}var tO=Z1({name:"kotlin",keywords:v("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam"),types:v("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(ul?|l|f)?/i,blockKeywords:v("catch class do else finally for if where try while enum"),defKeywords:v("class val var object interface fun"),atoms:v("true false null this"),hooks:{"@":function(Z){return Z.eatWhile(/[\w\$_]/),"meta"},"*":function(Z,$){return $.prevToken=="."?"variable":"operator"},'"':function(Z,$){return $.tokenize=Yz(Z.match('""')),$.tokenize(Z,$)},"/":function(Z,$){if(!Z.eat("*"))return!1;return $.tokenize=X6(1),$.tokenize(Z,$)},indent:function(Z,$,J,X){var Y=J&&J.charAt(0);if((Z.prevToken=="}"||Z.prevToken==")")&&J=="")return Z.indented;if(Z.prevToken=="operator"&&J!="}"&&Z.context.type!="}"||Z.prevToken=="variable"&&Y=="."||(Z.prevToken=="}"||Z.prevToken==")")&&Y==".")return X*2+$.indented;if($.align&&$.type=="}")return $.indented+(Z.context.type==(J||"").charAt(0)?0:X)}},languageData:{closeBrackets:{brackets:["(","[","{","'",'"','"""']}}}),eO=Z1({name:"shader",keywords:v("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:v("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:v("for while do if else struct"),builtin:v("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:v("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TextureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":Q2}}),ZV=Z1({name:"nesc",keywords:v(Y6+" as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:Q6,blockKeywords:v(K6),atoms:v("null true false"),hooks:{"#":Q2}}),$V=Z1({name:"objectivec",keywords:v(Y6+" "+oY),types:eY,builtin:v(tY),blockKeywords:v(K6+" @synthesize @try @catch @finally @autoreleasepool @synchronized"),defKeywords:v(u9+" @interface @implementation @protocol @class"),dontIndentStatements:/^@.*$/,typeFirstDefinitions:!0,atoms:v("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:g9,hooks:{"#":Q2,"*":m9}}),JV=Z1({name:"objectivecpp",keywords:v(Y6+" "+oY+" "+aY),types:eY,builtin:v(tY),blockKeywords:v(K6+" @synthesize @try @catch @finally @autoreleasepool @synchronized class try catch"),defKeywords:v(u9+" @interface @implementation @protocol @class class namespace"),dontIndentStatements:/^@.*$|^template$/,typeFirstDefinitions:!0,atoms:v("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:g9,hooks:{"#":Q2,"*":m9,u:Y2,U:Y2,L:Y2,R:Y2,"0":A0,"1":A0,"2":A0,"3":A0,"4":A0,"5":A0,"6":A0,"7":A0,"8":A0,"9":A0,token:function(Z,$,J){if(J=="variable"&&Z.peek()=="("&&($.prevToken==";"||$.prevToken==null||$.prevToken=="}")&&ZQ(Z.current()))return"def"}},namespaceSeparator:"::"}),XV=Z1({name:"squirrel",keywords:v("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:Q6,blockKeywords:v("case catch class else for foreach if switch try while"),defKeywords:v("function local class"),typeFirstDefinitions:!0,atoms:v("true false null"),hooks:{"#":Q2}}),v9=null;function XQ(Z){return function($,J){var X=!1,Y,Q=!1;while(!$.eol()){if(!X&&$.match('"')&&(Z=="single"||$.match('""'))){Q=!0;break}if(!X&&$.match("``")){v9=XQ(Z),Q=!0;break}Y=$.next(),X=Z=="single"&&!X&&Y=="\\"}if(Q)J.tokenize=null;return"string"}}var YV=Z1({name:"ceylon",keywords:v("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(Z){var $=Z.charAt(0);return $===$.toUpperCase()&&$!==$.toLowerCase()},blockKeywords:v("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:v("class dynamic function interface module object package value"),builtin:v("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:v("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(Z){return Z.eatWhile(/[\w\$_]/),"meta"},'"':function(Z,$){return $.tokenize=XQ(Z.match('""')?"triple":"single"),$.tokenize(Z,$)},"`":function(Z,$){if(!v9||!Z.match("`"))return!1;return $.tokenize=v9,v9=null,$.tokenize(Z,$)},"'":function(Z){if(Z.match(/^(\\[^'\s]+|[^\\'])'/))return"string.special";return Z.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(Z,$,J){if((J=="variable"||J=="type")&&$.prevToken==".")return"variableName.special"}},languageData:{closeBrackets:{brackets:["(","[","{","'",'"','"""']}}});function Qz(Z){(Z.interpolationStack||(Z.interpolationStack=[])).push(Z.tokenize)}function YQ(Z){return(Z.interpolationStack||(Z.interpolationStack=[])).pop()}function Kz(Z){return Z.interpolationStack?Z.interpolationStack.length:0}function C4(Z,$,J,X){var Y=!1;if($.eat(Z))if($.eat(Z))Y=!0;else return"string";function Q(K,U){var q=!1;while(!K.eol()){if(!X&&!q&&K.peek()=="$")return Qz(U),U.tokenize=Uz,"string";var G=K.next();if(G==Z&&!q&&(!Y||K.match(Z+Z))){U.tokenize=null;break}q=!X&&!q&&G=="\\"}return"string"}return J.tokenize=Q,Q($,J)}function Uz(Z,$){if(Z.eat("$"),Z.eat("{"))$.tokenize=null;else $.tokenize=qz;return null}function qz(Z,$){return Z.eatWhile(/[\w_]/),$.tokenize=YQ($),"variable"}var QV=Z1({name:"dart",keywords:v("this super static final const abstract class extends external factory implements mixin get native set typedef with enum throw rethrow assert break case continue default in return new deferred async await covariant try catch finally do else for if switch while import library export part of show hide is as extension on yield late required sealed base interface when inline"),blockKeywords:v("try catch finally do else for if switch while"),builtin:v("void bool num int double dynamic var String Null Never"),atoms:v("true false null"),number:/^(?:0x[a-f\d_]+|(?:[\d_]+\.?[\d_]*|\.[\d_]+)(?:e[-+]?[\d_]+)?)/i,hooks:{"@":function(Z){return Z.eatWhile(/[\w\$_\.]/),"meta"},"'":function(Z,$){return C4("'",Z,$,!1)},'"':function(Z,$){return C4('"',Z,$,!1)},r:function(Z,$){var J=Z.peek();if(J=="'"||J=='"')return C4(Z.next(),Z,$,!0);return!1},"}":function(Z,$){if(Kz($)>0)return $.tokenize=YQ($),null;return!1},"/":function(Z,$){if(!Z.eat("*"))return!1;return $.tokenize=X6(1),$.tokenize(Z,$)},token:function(Z,$,J){if(J=="variable"){var X=RegExp("^[_$]*[A-Z][a-zA-Z0-9_$]*$","g");if(X.test(Z.current()))return"type"}}}});var K2={CHECK:`<svg xmlns="http://www.w3.org/2000/svg"
    width="14" height="14" viewBox="0 0 24 24" fill="none"
  stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"
  class="text-green-500">
  <polyline points="20 6 9 17 4 12"></polyline></svg>`,LEFT_ARROW:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
  stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="m15 18-6-6 6-6" /></svg>`,RIGHT_ARROW:`<svg width="18" height="18" style="display: block; transform: scale(-1,1)" viewBox="0 0 24 24" fill="none" stroke="currentColor"
  stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="m15 18-6-6 6-6" /></svg>`,PLAY:`<svg fill="currentColor" width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M18.54,9,8.88,3.46a3.42,3.42,0,0,0-5.13,3V17.58A3.42,3.42,0,0,0,7.17,21a3.43,3.43,0,0,0,1.71-.46L18.54,15a3.42,3.42,0,0,0,0-5.92Zm-1,4.19L7.88,18.81a1.44,1.44,0,0,1-1.42,0,1.42,1.42,0,0,1-.71-1.23V6.42a1.42,1.42,0,0,1,.71-1.23A1.51,1.51,0,0,1,7.17,5a1.54,1.54,0,0,1,.71.19l9.66,5.58a1.42,1.42,0,0,1,0,2.46Z"/>
  </svg>`,STOP:`<svg fill="currentColor" width="16" height="16" viewBox="-1 0 19 19" xmlns="http://www.w3.org/2000/svg"
    class="cf-icon-svg"><path d="M16.417 9.583A7.917 7.917 0 1 1 8.5 1.666a7.917 7.917 0 0 1 7.917 7.917zm-5.267 6.274a6.766 6.766 0 0 0 1.756-1.084L3.31 5.177a6.81 6.81 0 0 0 7.84 10.68zm3.624-3.624a6.808 6.808 0 0 0-10.68-7.84l9.596 9.596a6.77 6.77 0 0 0 1.084-1.756z"/>
  </svg>`,TRASH:`<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    width="14" height="14" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve">
  <path fill="none" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" d="M23,27H11c-1.1,0-2-0.9-2-2V8h16v17
  C25,26.1,24.1,27,23,27z"/>
  <line fill="none" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" x1="27" y1="8" x2="7" y2="8"/>
  <path fill="none" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" d="M14,8V6c0-0.6,0.4-1,1-1h4c0.6,0,1,0.4,1,1v2"/>
  <line fill="none" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" x1="17" y1="23" x2="17" y2="12"/>
  <line fill="none" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" x1="21" y1="23" x2="21" y2="12"/>
  <line fill="none" stroke="currentColor" stroke-width="2" stroke-miterlimit="10" x1="13" y1="23" x2="13" y2="12"/>
  </svg>`};var QQ=document.getElementById("ex-desc"),l9=document.getElementById("ex-desc-mobile"),f9=document.getElementById("problem-header"),Gz=document.getElementById("sidebar-list"),d9=document.getElementById("run-btn"),s0=document.getElementById("status"),l1=document.getElementById("console-output"),c9=document.getElementById("sidebar-toggle"),z1=document.getElementById("sidebar-nav"),KQ=document.getElementById("reset-btn"),y4=document.getElementById("clear-console-btn"),Y3=document.getElementById("tab-problem"),Q3=document.getElementById("tab-code"),s9=document.getElementById("tab-prev"),n9=document.getElementById("tab-next"),p9=document.getElementById("code-pane");function UQ(Z){if(Z==="problem")l9.classList.remove("hidden"),p9.classList.add("hidden"),p9.classList.remove("flex"),Y3.classList.add("text-fg-primary","border-brand"),Y3.classList.remove("text-fg-muted","border-transparent"),Q3.classList.add("text-fg-muted","border-transparent"),Q3.classList.remove("text-fg-primary","border-brand");else l9.classList.add("hidden"),p9.classList.remove("hidden"),p9.classList.add("flex"),Q3.classList.add("text-fg-primary","border-brand"),Q3.classList.remove("text-fg-muted","border-transparent"),Y3.classList.add("text-fg-muted","border-transparent"),Y3.classList.remove("text-fg-primary","border-brand")}if(Y3&&Q3)Y3.addEventListener("click",()=>UQ("problem")),Q3.addEventListener("click",()=>UQ("code"));function qQ(){let{currentExerciseId:Z}=J1.getState(),$=x0.findIndex((J)=>J.id===Z);if($<x0.length-1)window.location.hash="#"+x0[$+1].id}function GQ(){let{currentExerciseId:Z}=J1.getState(),$=x0.findIndex((J)=>J.id===Z);if($>0)window.location.hash="#"+x0[$-1].id}if(s9&&n9)s9.addEventListener("click",GQ),n9.addEventListener("click",qQ);function Wz(Z,$,J){let X=null;Z.innerHTML=$,Z.addEventListener("click",()=>{if(X)clearTimeout(X),X=null,Z.innerHTML=$,J();else Z.innerHTML='<span class="text-xs font-bold tracking-wider">Discard changes? Click to confirm.</span>',X=setTimeout(()=>{X=null,Z.innerHTML=$},5000)})}var jz={code({text:Z,lang:$}){return`<div class="cm-static-code mb-4" data-lang="${$||""}">${Z}</div>`}};X0.use({renderer:jz});var zz=(Z)=>{return X0.parse(Z)};function _z(){let Z=window.matchMedia("(prefers-color-scheme: dark)").matches;document.querySelectorAll(".cm-static-code").forEach((J)=>{let X=J.textContent||"",Y=J.getAttribute("data-lang");J.textContent="",new C({state:n.create({doc:X,extensions:[n.readOnly.of(!0),C.editable.of(!1),a3(Z),Y==="ocaml"||!Y?F2.define(P9):Y==="c"||Y==="clike"?F2.define($Q):[],C.lineWrapping,C.theme({"&":{borderRadius:"4px",overflow:"hidden",backgroundColor:"var(--bg-app)"},".cm-scroller":{overflow:"visible"}})]}),parent:J})})}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(Z)=>{let $=Z.matches;EY($),b4()});function b4(){let{currentExerciseId:Z,completedIds:$,userCode:J}=J1.getState(),X=x0.find((j)=>j.id===Z);if(!X)return;let Y=x0.findIndex((j)=>j.id===Z),Q=Y>0,K=Y<x0.length-1;if(s9)s9.disabled=!Q;if(n9)n9.disabled=!K;let U=`<div class="markdown-body">${zz(X.description)}</div>`,G=`<h1 class="text-3xl font-bold mb-6 text-fg-primary">${X.id} ${X.title}</h1>`+U;if(QQ)QQ.innerHTML=G;if(l9)l9.innerHTML=G;if(f9)f9.innerHTML=`
            <button class="nav-prev-d px-4 py-1.5 hover:bg-bg-app rounded text-fg-muted hover:text-fg-primary transition-colors disabled:opacity-30 disabled:hover:text-fg-muted"
                ${!Q?"disabled":""} title="Previous (Alt + Left)">
                ${K2.LEFT_ARROW}
            </button>
            <div class="flex-1"></div>
            <button class="nav-next-d px-4 py-1.5 hover:bg-bg-app rounded text-fg-muted hover:text-fg-primary transition-colors disabled:opacity-30 disabled:hover:text-fg-muted"
                ${!K?"disabled":""} title="Next (Alt + Right)">
                ${K2.RIGHT_ARROW}
            </button>
        `,f9.querySelector(".nav-prev-d")?.addEventListener("click",GQ),f9.querySelector(".nav-next-d")?.addEventListener("click",qQ);_z(),Gz.innerHTML=x0.map((j)=>{let z=$.includes(j.id);return`<div class="nav-item cursor-pointer p-3 text-sm flex justify-between items-center transition-colors ${j.id===Z?"bg-bg-surface text-fg-primary border-l-2 border-brand":"text-fg-muted hover:text-fg-primary"} ${z?"opacity-40":""}"
                    onclick="location.hash='#${j.id}'">
                  <span>${j.id} ${j.title}</span>
                  ${z?K2.CHECK:""}
                </div>`}).join("");let W="";if(!J[Z])W=X.initialCode;else W=J[Z];BY(W),l1.textContent="// Ready..."}async function Oz(){if(!V4()){alert("Compiler is still loading... please wait.");return}let{currentExerciseId:Z}=J1.getState(),$=x0.find((X)=>X.id===Z);if(!$)return;s0.textContent="Running...",s0.className="text-yellow-500 text-xs font-mono animate-pulse",i9(!1),l1.textContent="";let J="";try{let X=PY();J1.getState().saveUserCode(Z,X);let Y=X+`
`+($.testCode||""),Q=await CY(Y);if(!Q.success){s0.textContent="FAILED",s0.className="text-red-500 font-bold text-xs",l1.textContent=Q.err||"Compilation/Runtime Error";return}if(J=Q.out,l1.textContent=J,J.includes("Test failed")||J.includes("Failure")){s0.textContent="FAILED",s0.className="text-red-500 font-bold text-xs";return}let K=$.validate(X,Q.out);if(K!==!0){s0.textContent="FAILED",s0.className="text-red-500 font-bold text-xs",l1.textContent+=`

${K}`;return}s0.textContent="PASSED",s0.className="text-green-500 font-bold text-xs",l1.textContent+=`

ALL TESTS PASSED!`,J1.getState().markComplete($.id),sY({particleCount:100,spread:70,origin:{y:0.6}})}catch(X){s0.textContent="ERROR",s0.className="text-red-600 font-bold text-xs",l1.textContent="Runtime Error: "+X.message}finally{i9(!0)}}function i9(Z){d9.disabled=!Z,d9.innerHTML=`<span>${Z?K2.PLAY:K2.STOP}</span><span>Run</span>`}function Vz(){let Z=setInterval(()=>{if(V4())clearInterval(Z),s0.textContent="Compiler Ready",s0.className="text-green-600 text-xs font-mono",d9.classList.remove("opacity-50","cursor-not-allowed"),i9(!0)},500)}J1.subscribe(b4);d9.addEventListener("click",Oz);if(KQ)Wz(KQ,K2.TRASH,()=>{let{currentExerciseId:Z}=J1.getState(),$=x0.find((J)=>J.id===Z);if(!$)return;J1.getState().saveUserCode(Z,$.initialCode)});if(y4)y4.innerHTML=K2.TRASH,y4.addEventListener("click",()=>{if(l1)l1.textContent=""});if(c9&&z1)c9.addEventListener("click",()=>{z1.classList.toggle("hidden"),z1.classList.toggle("flex"),z1.classList.toggle("lg:hidden"),z1.classList.toggle("lg:flex")});document.addEventListener("click",(Z)=>{if(!z1||!c9)return;let $=!z1.classList.contains("hidden");if(window.innerWidth<1024&&$){let X=Z.target,Y=z1.contains(X),Q=c9.contains(X);if(!Y&&!Q)z1.classList.toggle("hidden"),z1.classList.toggle("flex"),z1.classList.toggle("lg:hidden"),z1.classList.toggle("lg:flex")}});window.addEventListener("hashchange",()=>{let Z=window.location.hash.slice(1);if(x0.find(($)=>$.id===Z))J1.getState().setCurrent(Z)});Vz();var Hz=window.location.hash.slice(1)||x0[0].id;J1.getState().setCurrent(Hz);i9(!1);b4();
